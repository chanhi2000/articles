import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as p,b as t,t as r,e,n,g as s,f as c,r as l,o as d}from"./app-BgNevrm5.js";const m={},h={id:"frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´",tabindex:"-1"},u={class:"header-anchor",href:"#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"},f=t("nav",{class:"table-of-contents"},[t("ul")],-1),k=t("hr",null,null,-1),w=c(`<blockquote><p>Updated for Xcode 15</p></blockquote><p>SwiftData is built on top of Core Data, and uses the same underlying storage mechanisms. This means you can make an app run with both SwiftData and Core Data side by side, both reading and writing from the same persistent store.</p><div class="hint-container important"><p class="hint-container-title">Important</p><p>If you&#39;re moving from Core Data to SwiftData (or vice versa ‚Äì it happens!), I would recommend <em>against</em> the coexistence approach because it&#39;s more trouble than it&#39;s worth. Instead, it&#39;s better to make the jump from one to the other without looking back, if you can.</p></div><p>I&#39;m going to assume you&#39;ve already decided that co-existence is the right move for your app, so let&#39;s look at how it&#39;s done.</p><p>First, it&#39;s important that both your SwiftData and Core Data stacks write to the same underlying data store.</p><p>So, you might create a constant value like this one:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> storeURL <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span>documentsDirectory<span class="token punctuation">.</span><span class="token function">appending</span><span class="token punctuation">(</span>path<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;shared.store&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>You would then send that to SwiftData using a custom model configuration:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> config <span class="token operator">=</span> <span class="token class-name">ModelConfiguration</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> storeURL<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">let</span> container <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token class-name">ModelContainer</span><span class="token punctuation">(</span><span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token class-name">YourModel</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">,</span> configurations<span class="token punctuation">:</span> config<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>And do the same for Core Data, also enabling persistent history tracking at the same time:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">if</span> <span class="token keyword">let</span> description <span class="token operator">=</span> coreDataContainer<span class="token punctuation">.</span>persistentStoreDescriptions<span class="token punctuation">.</span>first <span class="token punctuation">{</span></span>
<span class="line">    description<span class="token punctuation">.</span>url <span class="token operator">=</span> storeURL</span>
<span class="line">    description<span class="token punctuation">.</span><span class="token function">setOption</span><span class="token punctuation">(</span><span class="token boolean">true</span> <span class="token keyword">as</span> <span class="token class-name">NSNumber</span><span class="token punctuation">,</span> forKey<span class="token punctuation">:</span> <span class="token class-name">NSPersistentHistoryTrackingKey</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container important"><p class="hint-container-title">Important</p><p>You must enable persistent history tracking in Core Data, because it&#39;s enabled by default in SwiftData and the two must match. If you&#39;re using <code>NSPersistentCloudKitContainer</code> persistent history tracking is enabled by default.</p></div><p>Second, you need to make sure that your SwiftData and Core Data model names do not clash. If you have the same model in both frameworks at the same time, you need to rename one of them to avoid problems.</p><div class="hint-container important"><p class="hint-container-title">Important</p><p>Do not change your Core Data entity names ‚Äì these must remain the same as your SwiftData model class names. Instead, change the Name value under Class in the Core Data model editor, which affects the class name that gets generated for your entity.</p></div><p>Apple used the simple prefix &quot;CD&quot; for Core Data objects, which is a simple change that&#39;s nice and clear to understand later on.</p><p>Last but definitely not least: it is an absolute requirement that your SwiftData and Core Data models are the same ‚Äì if for example you add a property to one, or rename a property, you must make the same change to the other model.</p><p>Once you&#39;ve done that work you&#39;re in a good place to see how well your Core Data and SwiftData stack work together ‚Äì hopefully smoothly, but you might also notice a few places where Core Data changes aren&#39;t reflected in SwiftData queries. I&#39;ve found that adding a sprinkling <code>objectWillChange.send()</code> to my Core Data view models gives SwiftData the nudge it needs to spot all the updates.</p><p>Coexistence is great for times when you need backwards compatibility, or you want to move to SwiftData in incremental steps, but the tight requirements about keeping both sets of models in sync might prove rather onerous in the long term.</p>`,18);function g(o,y){const a=l("VPCard");return d(),p("div",null,[t("h1",h,[t("a",u,[t("span",null,r(o.$frontmatter.title)+" Í¥ÄÎ†®",1)])]),e(a,n(s({title:"SwiftData by Example",desc:"Back to Home",link:"/hackingwithswift.com/swiftdata/README.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),f,k,e(a,n(s({title:"How to make Core Data and SwiftData coexist in the same app | SwiftData by Example",desc:"How to make Core Data and SwiftData coexist in the same app",link:"https://hackingwithswift.com/quick-start/swiftdata/how-to-make-core-data-and-swiftdata-coexist-in-the-same-app",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),w])}const v=i(m,[["render",g],["__file","how-to-make-core-data-and-swiftdata-coexist-in-the-same-app.html.vue"]]),C=JSON.parse('{"path":"/hackingwithswift.com/swiftdata/how-to-make-core-data-and-swiftdata-coexist-in-the-same-app.html","title":"How to make Core Data and SwiftData coexist in the same app","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"How to make Core Data and SwiftData coexist in the same app","description":"Article(s) > How to make Core Data and SwiftData coexist in the same app","category":["Swift","Article(s)"],"tag":["blog","hackingwithswift.com","crashcourse","swift","swiftdata","xcode","appstore"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > How to make Core Data and SwiftData coexist in the same app"},{"property":"og:description","content":"How to make Core Data and SwiftData coexist in the same app"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/swiftdata/how-to-make-core-data-and-swiftdata-coexist-in-the-same-app.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/swiftdata/how-to-make-core-data-and-swiftdata-coexist-in-the-same-app.html"}],["meta",{"property":"og:site_name","content":"üìöBookshelf"}],["meta",{"property":"og:title","content":"How to make Core Data and SwiftData coexist in the same app"}],["meta",{"property":"og:description","content":"Article(s) > How to make Core Data and SwiftData coexist in the same app"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"hackingwithswift.com"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"swiftdata"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:published_time","content":"2023-09-30T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"How to make Core Data and SwiftData coexist in the same app\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-09-30T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[]}"]],"date":"2023-09-30T00:00:00.000Z","isOriginal":false},"headers":[],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":2.29,"words":688},"filePathRelative":"hackingwithswift.com/swiftdata/how-to-make-core-data-and-swiftdata-coexist-in-the-same-app.md","localizedDate":"2023ÎÖÑ 9Ïõî 30Ïùº","excerpt":"\\n"}');export{v as comp,C as data};
