import{_ as c}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,b as t,t as r,e as a,n as o,g as n,f as l,r as d,o as p}from"./app-BgNevrm5.js";const h={},u={id:"frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´",tabindex:"-1"},m={class:"header-anchor",href:"#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"},g=t("nav",{class:"table-of-contents"},[t("ul")],-1),w=t("hr",null,null,-1),b=l(`<blockquote><p>Updated for Xcode 15</p></blockquote><p>Although SwiftData doesn&#39;t have the concept of child contexts, you can create as many peer or sibling contexts as you need, all attached to the same model container, and mixing foreground and background tasks freely.</p><div class="hint-container important"><p class="hint-container-title">Important</p><p><code>ModelContext</code> and all SwiftData models do not conform to <code>Sendable</code>, which means they can&#39;t be transferred between Swift actors. <code>ModelContainer</code> <em>does</em> conform to <code>Sendable</code>, so please use that to create your background context.</p><p>Creating a new model context is as simple as calling its initializer with a model container, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">BackgroundDataHander</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">var</span> context<span class="token punctuation">:</span> <span class="token class-name">ModelContext</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>with container<span class="token punctuation">:</span> <span class="token class-name">ModelContainer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        context <span class="token operator">=</span> <span class="token class-name">ModelContext</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As we&#39;ve used a class above, it&#39;s important to create it away from the main actor by using <code>async let</code>, <code>Task.detached()</code>, or other concurrency options. If you use an actor rather than a class, the context will be bound to its actor rather than the main actor used for your main context.</p><div class="hint-container important"><p class="hint-container-title">Important</p><p>If you intend to create a background context using an actor in order to do bulk data imports, I would recommend against storing the context as a property because the extra actor synchronization will slow down your code dramatically.</p></div></div><p>When a save is triggered on your background context, its changes will automatically be reflected in your other contexts, including updating any <code>@Query</code> properties in your SwiftUI views.</p><p>Apple&#39;s official view is that autosave is enabled for the main context, but <em>not</em> for model context created by hand. In my experience this is inconsistent: yes, the main context always has autosave enabled, but any extra contexts you create by hand may or may not.</p><p>Very roughly ‚Äì and this is simply through observation rather than actual facts that will stand the test of time ‚Äì if you create a new model context on the main actor, it will have autosave enabled, but if you create it to run on a separate actor then autosave will be disabled.</p><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>Until we have more certainty around when autosave is actually enabled or not, I would recommend being explicit when creating your background contexts.</p></div><p>Because SwiftData models are not sendable, you should transfer them between tasks using their <code>id</code> property. This allows you to load the object on your background context, without worrying about data races.</p>`,8);function k(s,f){const e=d("VPCard");return p(),i("div",null,[t("h1",u,[t("a",m,[t("span",null,r(s.$frontmatter.title)+" Í¥ÄÎ†®",1)])]),a(e,o(n({title:"SwiftData by Example",desc:"Back to Home",link:"/hackingwithswift.com/swiftdata/README.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),g,w,a(e,o(n({title:"How to create a background context | SwiftData by Example",desc:"How to create a background context",link:"https://hackingwithswift.com/quick-start/swiftdata/how-to-create-a-background-context",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),b])}const v=c(h,[["render",k],["__file","how-to-create-a-background-context.html.vue"]]),_=JSON.parse('{"path":"/hackingwithswift.com/swiftdata/how-to-create-a-background-context.html","title":"How to create a background context","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"How to create a background context","description":"Article(s) > How to create a background context","category":["Swift","Article(s)"],"tag":["blog","hackingwithswift.com","crashcourse","swift","swiftdata","xcode","appstore"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > How to create a background context"},{"property":"og:description","content":"How to create a background context"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/swiftdata/how-to-create-a-background-context.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/swiftdata/how-to-create-a-background-context.html"}],["meta",{"property":"og:site_name","content":"üìöBookshelf"}],["meta",{"property":"og:title","content":"How to create a background context"}],["meta",{"property":"og:description","content":"Article(s) > How to create a background context"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"hackingwithswift.com"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"swiftdata"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:published_time","content":"2023-09-30T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"How to create a background context\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-09-30T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[]}"]],"date":"2023-09-30T00:00:00.000Z","isOriginal":false},"headers":[],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":1.72,"words":515},"filePathRelative":"hackingwithswift.com/swiftdata/how-to-create-a-background-context.md","localizedDate":"2023ÎÖÑ 9Ïõî 30Ïùº","excerpt":"\\n"}');export{v as comp,_ as data};
