import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as r,b as t,t as d,e as n,n as a,g as e,d as o,a as u,f as h,r as c,o as k}from"./app-BgNevrm5.js";const m={},f={id:"frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´",tabindex:"-1"},g={class:"header-anchor",href:"#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"},w=t("nav",{class:"table-of-contents"},[t("ul")],-1),b=t("hr",null,null,-1),v=t("blockquote",null,[t("p",null,"Available from Swift 5.5")],-1),y={href:"https://github.com/apple/swift-evolution/blob/main/proposals/0306-actors.md",target:"_blank",rel:"noopener noreferrer"},S=t("code",null,"apple/swift-evolution",-1),_=h(`<p>To demonstrate the problem actors solve, consider this Swift code that creates a <code>RiskyCollector</code> class able to trade cards from their deck with another collector:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">RiskyCollector</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> deck<span class="token punctuation">:</span> <span class="token class-name">Set</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>deck<span class="token punctuation">:</span> <span class="token class-name">Set</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>deck <span class="token operator">=</span> deck</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">send</span><span class="token punctuation">(</span>card selected<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> to person<span class="token punctuation">:</span> <span class="token class-name">RiskyCollector</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">guard</span> deck<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>selected<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        deck<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>selected<span class="token punctuation">)</span></span>
<span class="line">        person<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>card<span class="token punctuation">:</span> selected<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">transfer</span><span class="token punctuation">(</span>card<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        deck<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>card<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In a single-threaded environment that code is safe: we check whether our deck contains the card in question, remove it, then add it to the other collector‚Äôs deck. However, in a multi-threaded environment our code has a potential race condition, which is a problem whereby the results of the code will vary as two separate parts of our code run side by side.</p><p>If we call <code>send(card:to:)</code> more than once at the same time, the following chain of events can happen:</p><ol><li>The first thread checks whether the card is in the deck, and it is so it continues.</li><li>The second thread also checks whether the card is in the deck, and it is so it continues.</li><li>The first thread removes the card from the deck and transfer it to the other person.</li><li>The second thread attempts to remove the card from the deck, but actually it‚Äôs already gone so nothing will happen. However, it still transfers the card to the other person.</li></ol><p>In that situation one player loses a card while the other gains <em>two</em> cards, and if that card happened to be a Black Lotus from Magic the Gathering then you‚Äôve got a big problem!</p><p>Actors solve this problem by introducing <em>actor isolation</em>: stored properties and methods cannot be read from outside the actor object unless they are performed asynchronously, and stored properties cannot be <em>written</em> from outside the actor object at all. The async behavior isn‚Äôt there for performance; instead it‚Äôs because Swift automatically places these requests into a queue that is processed sequentially to avoid race conditions.</p><p>So, we could rewrite out <code>RiskyCollector</code> class to be a <code>SafeCollector</code> actor, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">actor</span> <span class="token class-name">SafeCollector</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> deck<span class="token punctuation">:</span> <span class="token class-name">Set</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>deck<span class="token punctuation">:</span> <span class="token class-name">Set</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>deck <span class="token operator">=</span> deck</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">send</span><span class="token punctuation">(</span>card selected<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> to person<span class="token punctuation">:</span> <span class="token class-name">SafeCollector</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token operator">-&gt;</span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">guard</span> deck<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>selected<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        deck<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>selected<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">await</span> person<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>card<span class="token punctuation">:</span> selected<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">transfer</span><span class="token punctuation">(</span>card<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        deck<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>card<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There are several things to notice in that example:</p><ol><li>Actors are created using the new <code>actor</code> keyword. This is a new concrete nominal type in Swift, joining structs, classes, and enums.</li><li>The <code>send()</code> method is marked with <code>async</code>, because it will need to suspend its work while waiting for the transfer to complete.</li><li>Although the <code>transfer(card:)</code> method is <em>not</em> marked with <code>async</code>, we still need to <em>call</em> it with <code>await</code> because it will wait until the other <code>SafeCollector</code> actor is able to handle the request.</li></ol><p>To be clear, an actor can use its own properties and methods freely, asynchronously or otherwise, but when interacting with a different actor it must always be done asynchronously. With these changes Swift can ensure that all actor-isolated state is never accessed concurrently, and more importantly this is done at compile time so that safety is guaranteed.</p><p>Actors and classes have some similarities:</p><ul><li>Both are reference types, so they can be used for shared state.</li><li>They can have methods, properties, initializers, and subscripts.</li><li>They can conform to protocols and be generic.</li><li>Any properties and methods that are static behave the same in both types, because they have no concept of <code>self</code> and therefore don‚Äôt get isolated.</li></ul><p>Beyond actor isolation, there are two other important differences between actors and classes:</p><ul><li>Actors do not currently support inheritance, which makes their initializers much simpler ‚Äì there is no need for convenience initializers, overriding, the <code>final</code> keyword, and more. This might change in the future.</li><li>All actors implicitly conform to a new <code>Actor</code> protocol; no other concrete type can use this. This allows you to restrict other parts of your code so it can work only with actors.</li></ul><p>The best way I‚Äôve heard to explain how actors differ from classes is this: ‚Äúactors pass messages, not memory.‚Äù So, rather than one actor poking directly around in another‚Äôs properties or calling their methods, we instead send a message asking for the data and let the Swift runtime handle it for us safely.</p>`,17),C={class:"hint-container details"},A=t("summary",null,"Other Changes in Swift 5.5",-1),x={href:"https://hackingwithswift.com/files/playgrounds/swift/playground-5-4-to-5-5.playground.zip",target:"_blank",rel:"noopener noreferrer"};function T(l,I){const s=c("VPCard"),i=c("FontIcon");return k(),r("div",null,[t("h1",f,[t("a",g,[t("span",null,d(l.$frontmatter.title)+" Í¥ÄÎ†®",1)])]),n(s,a(e({title:"HACKING WITH SWIFT",desc:"What's new in Swift?",link:"/hackingwithswift.com/swift/README.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),w,b,n(s,a(e({title:"Actors | Changes in Swift 5.5",desc:"Actors",link:"https://hackingwithswift.com/swift/5.5/actors",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),v,t("p",null,[t("a",y,[o("SE-0306 ("),n(i,{icon:"iconfont icon-github"}),S,o(")")]),o(" introduced actors, which are conceptually similar to classes that are safe to use in concurrent environments. This is possible because Swift ensures that mutable state inside your actor is only ever accessed by a single thread at any given time, which helps eliminate a variety of serious bugs right at the compiler level.")]),_,t("details",C,[A,n(s,a(e({title:"Async await | Changes in Swift 5.5",desc:"Async await",link:"/hackingwithswift.com/swift/5.5/async-await.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),n(s,a(e({title:"Async sequences | Changes in Swift 5.5",desc:"Async sequences",link:"/hackingwithswift.com/swift/5.5/async-sequences.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),n(s,a(e({title:"Effectful read-only properties | Changes in Swift 5.5",desc:"Effectful read-only properties",link:"/hackingwithswift.com/swift/5.5/effectful-read-only-properties.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),n(s,a(e({title:"Structured concurrency | Changes in Swift 5.5",desc:"Structured concurrency",link:"/hackingwithswift.com/swift/5.5/structured-concurrency.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),n(s,a(e({title:"async let bindings | Changes in Swift 5.5",desc:"async let bindings",link:"/hackingwithswift.com/swift/5.5/async-let-bindings.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),n(s,a(e({title:"Continuations for interfacing async tasks with synchronous code | Changes in Swift 5.5",desc:"Continuations for interfacing async tasks with synchronous code",link:"/hackingwithswift.com/swift/5.5/continuations.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),u(` 
\`\`\`component VPCard
{
  "title": "Actors | Changes in Swift 5.5",
  "desc": "Actors",
  "link": "/hackingwithswift.com/swift/5.5/actors.md",
  "logo": "https://hackingwithswift.com/favicon.svg",
  "background": "rgba(54,94,226,0.2)"
}
\`\`\`
`),n(s,a(e({title:"Global actors | Changes in Swift 5.5",desc:"Global actors",link:"/hackingwithswift.com/swift/5.5/global-actors.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),n(s,a(e({title:"Sendable and @Sendable closures | Changes in Swift 5.5",desc:"Sendable and @Sendable closures",link:"/hackingwithswift.com/swift/5.5/sendable.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),n(s,a(e({title:"if for postfix member expressions | Changes in Swift 5.5",desc:"if for postfix member expressions",link:"/hackingwithswift.com/swift/5.5/postfix-if.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),n(s,a(e({title:"Interchangeable use of CGFloat and Double types | Changes in Swift 5.5",desc:"Interchangeable use of CGFloat and Double types",link:"/hackingwithswift.com/swift/5.5/interchangeable-cgfloat-double.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),n(s,a(e({title:"Codable synthesis for enums with associated values | Changes in Swift 5.5",desc:"Codable synthesis for enums with associated values",link:"/hackingwithswift.com/swift/5.5/codable-enums.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),n(s,a(e({title:"lazy now works in local contexts | Changes in Swift 5.5",desc:"lazy now works in local contexts",link:"/hackingwithswift.com/swift/5.5/local-lazy.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),n(s,a(e({title:"Extending property wrappers to function and closure parameters | Changes in Swift 5.5",desc:"Extending property wrappers to function and closure parameters",link:"/hackingwithswift.com/swift/5.5/property-wrapper-function-parameters.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),n(s,a(e({title:"Extending static member lookup in generic contexts | Changes in Swift 5.5",desc:"Extending static member lookup in generic contexts",link:"/hackingwithswift.com/swift/5.5/static-member-generic.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),t("p",null,[t("a",x,[n(i,{icon:"fas fa-file-zipper"}),o("Download Swift 5.5 playground")])])])])}const q=p(m,[["render",T],["__file","actors.html.vue"]]),z=JSON.parse('{"path":"/hackingwithswift.com/swift/5.5/actors.html","title":"Actors","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Actors","description":"Article(s) > Actors","category":["Swift","Article(s)"],"tag":["blog","hackingwithswift.com","swift","swift-5.5"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > Actors"},{"property":"og:description","content":"Actors"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/swift/5.5/async-await.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/swift/5.5/actors.html"}],["meta",{"property":"og:site_name","content":"üìöBookshelf"}],["meta",{"property":"og:title","content":"Actors"}],["meta",{"property":"og:description","content":"Article(s) > Actors"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"hackingwithswift.com"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"swift-5.5"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Actors\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]],"isOriginal":false},"headers":[],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":4.53,"words":1359},"filePathRelative":"hackingwithswift.com/swift/5.5/actors.md","excerpt":"\\n"}');export{q as comp,z as data};
