import{_ as m}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as h,b as n,t as g,e as a,n as v,g as b,w as t,d as s,f as o,r as c,o as f}from"./app-BgNevrm5.js";const y={},w={id:"frontmatter-title-관련",tabindex:"-1"},_={class:"header-anchor",href:"#frontmatter-title-관련"},A={class:"table-of-contents"},C=n("hr",null,null,-1),P=o('<div class="hint-container note"><p class="hint-container-title">Update Note</p><p>This tutorial is now up to date with the latest version of the Google Maps API, the latest version of Android Studio version 3.0.1, and uses Kotlin for app development. Update by Joe Howard. Original tutorial by Eunice Obugyei.</p></div><p>From fitness apps such as Runkeeper to games such as Pokemon Go, location services are an increasingly important part of modern apps.</p><p>In this Google Maps API tutorial, you will create an app named <strong>City Guide</strong>. The app allows a user to search for a location, use Google Maps to show the address of the location and listen for the user’s location changes.</p><p>You will learn how to use the Google Maps Android API, the Google Location Services API and the Google Places API for Android to do the following:</p><ul><li>Show a user’s current location</li><li>Display and customize markers on a map</li><li>Retrieve the address of a location given the coordinates</li><li>Listen for location updates</li><li>Search for places</li></ul><div class="hint-container note"><p class="hint-container-title">Note</p><p>This Google Maps API tutorial assumes you are already familiar with the basics of Android development with Kotlin. If you are completely new to Android development, read through our <a href="https://kodeco.com/478209-beginning-android-development-with-kotlin-part-one-installing-android-studio" target="_blank" rel="noopener noreferrer">Beginning Android Development with Kotlin</a> tutorial to familiarize yourself with the basics. <!-- TODO: 작성 (/kodeco.com/478209-beginning-android-development-with-kotlin-part-one-installing-android-studio.md) --></p></div><hr><h2 id="getting-started" tabindex="-1"><a class="header-anchor" href="#getting-started"><span>Getting Started</span></a></h2><p>Open <strong>Android Studio 3.0.1</strong> or later and select <strong>Start a new Android Studio project</strong> from the <strong>Quick Start</strong> menu, or choose <strong>File/New Project…</strong>:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/welcome.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>In the <strong>Create New Project</strong> dialog, on the <strong>Create Android Project</strong> view, enter the name of the app as <strong>City Guide</strong>, company domain of <strong>android.raywenderlich.com</strong>, select your preferred folder location for the project files, make sure that <strong>Include Kotlin support</strong>, and click <strong>Next</strong>:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/new_project.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>On the <strong>Target Android Devices</strong> view, check the <strong>Phone and Tablet</strong> box and select the minimum SDK you want the app to support. Specify <strong>API 16</strong> from the <strong>Minimum SDK</strong> drop down and click <strong>Next</strong>.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/target.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>On the <strong>Add an Activity to Mobile</strong> view, select the <strong>Google Maps Activity</strong> and click <strong>Next</strong>.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/add_activity.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>On the <strong>Configure Activity</strong> view, click <strong>Finish</strong> to complete the project creation process.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/configure_activity.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>Android Studio will use Gradle to build your project. This may take a few seconds.</p>',19),I=n("code",null,"MapsActivity.kt",-1),M=o(`<div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">package</span> com<span class="token punctuation">.</span>raywenderlich<span class="token punctuation">.</span>android<span class="token punctuation">.</span>cityguide</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span>AppCompatActivity</span>
<span class="line"><span class="token keyword">import</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Bundle</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>gms<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>CameraUpdateFactory</span>
<span class="line"><span class="token keyword">import</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>gms<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>GoogleMap</span>
<span class="line"><span class="token keyword">import</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>gms<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>OnMapReadyCallback</span>
<span class="line"><span class="token keyword">import</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>gms<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>SupportMapFragment</span>
<span class="line"><span class="token keyword">import</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>gms<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>model<span class="token punctuation">.</span>LatLng</span>
<span class="line"><span class="token keyword">import</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>gms<span class="token punctuation">.</span>maps<span class="token punctuation">.</span>model<span class="token punctuation">.</span>MarkerOptions</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> MapsActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> OnMapReadyCallback <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> mMap<span class="token operator">:</span> GoogleMap</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_maps<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// Obtain the SupportMapFragment and get notified when the map is ready to be used.</span></span>
<span class="line">    <span class="token keyword">val</span> mapFragment <span class="token operator">=</span> supportFragmentManager</span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">findFragmentById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>map<span class="token punctuation">)</span> <span class="token keyword">as</span> SupportMapFragment</span>
<span class="line">    mapFragment<span class="token punctuation">.</span><span class="token function">getMapAsync</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">/**</span>
<span class="line">   * Manipulates the map once available.</span>
<span class="line">   * This callback is triggered when the map is ready to be used.</span>
<span class="line">   * This is where we can add markers or lines, add listeners or move the camera. In this case,</span>
<span class="line">   * we just add a marker near Sydney, Australia.</span>
<span class="line">   * If Google Play services is not installed on the device, the user will be prompted to install</span>
<span class="line">   * it inside the SupportMapFragment. This method will only be triggered once the user has</span>
<span class="line">   * installed Google Play services and returned to the app.</span>
<span class="line">   */</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onMapReady</span><span class="token punctuation">(</span>googleMap<span class="token operator">:</span> GoogleMap<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    mMap <span class="token operator">=</span> googleMap</span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Add a marker in Sydney and move the camera</span></span>
<span class="line">    <span class="token keyword">val</span> sydney <span class="token operator">=</span> <span class="token function">LatLng</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">34.0</span><span class="token punctuation">,</span> <span class="token number">151.0</span><span class="token punctuation">)</span></span>
<span class="line">    mMap<span class="token punctuation">.</span><span class="token function">addMarker</span><span class="token punctuation">(</span><span class="token function">MarkerOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span>sydney<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Marker in Sydney&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    mMap<span class="token punctuation">.</span><span class="token function">moveCamera</span><span class="token punctuation">(</span>CameraUpdateFactory<span class="token punctuation">.</span><span class="token function">newLatLng</span><span class="token punctuation">(</span>sydney<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><code>MapsActivity</code> currently implements the <strong>OnMapReadyCallback</strong> interface and extends <strong>AppCompatActivity</strong>.</li><li>The class overrides <strong>AppCompatActivity</strong>’s <code>onCreate()</code> method</li><li>You also override <strong>OnMapReadyCallback</strong>’s <strong>onMapReady()</strong> method. This method is called when the map is ready to be used. The code declared in this method creates a marker with coordinates near Sydney, Australia and adds the marker to the map.</li></ol><p>The template adds the following in the <strong>manifests/AndroidManifest.xml</strong>:</p><ol><li>A declaration of the <code>ACCESS_FINE_LOCATION</code> permission. This is required to access the user’s precise location.</li><li>The <code>com.google.android.geo.API_KEY</code> meta-data. This is used to specify the API key.</li></ol>`,4),L=n("strong",null,"Google Play Services",-1),S=n("code",null,"build.gradle",-1),x=o(`<div class="language-groovy line-numbers-mode" data-highlighter="prismjs" data-ext="groovy" data-title="groovy"><pre><code><span class="line">implementation <span class="token string">&#39;com.google.android.gms:play-services-maps:11.8.0&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/09/mapping_start_project_6_run_1.png" alt="When the build is complete, run the app to see what you have" width="240" tabindex="0" loading="lazy"><figcaption>When the build is complete, run the app to see what you have</figcaption></figure><p>All you have is a blank screen with no map; you haven’t yet set up the API key for the Google Map. You’ll do that next.</p>`,3),q={class:"hint-container note"},E=n("p",{class:"hint-container-title"},"Note",-1),T=n("code",null,"build.gradle",-1),R=n("hr",null,null,-1),O=n("h2",{id:"using-the-google-maps-apis",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#using-the-google-maps-apis"},[n("span",null,"Using the Google Maps APIs")])],-1),G={href:"https://developers.google.com/maps/android/",target:"_blank",rel:"noopener noreferrer"},N={href:"https://console.developers.google.com",target:"_blank",rel:"noopener noreferrer"},j={href:"https://accounts.google.com/SignUpWithoutGmail",target:"_blank",rel:"noopener noreferrer"},U=n("h3",{id:"creating-api-keys",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#creating-api-keys"},[n("span",null,"Creating API Keys")])],-1),F=n("code",null,"res/values/",-1),z=n("code",null,"google_maps_api.xml",-1),Y=n("figure",null,[n("img",{src:"https://koenig-media.raywenderlich.com/uploads/2018/01/api_key.png",alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1),K=n("p",null,"Now copy and paste the link shown above into your browser.",-1),B=n("img",{src:"https://koenig-media.raywenderlich.com/uploads/2016/09/mapping_start_project_8_create_api_2.png",alt:'On the Enable an API page, select Create a project and click <FontIcon icon="iconfont icon-select"/>.',tabindex:"0",loading:"lazy"},null,-1),D=n("strong",null,"Enable an API",-1),H=n("strong",null,"Create a project",-1),Q=n("code",null,"[Continue]",-1),W=n("img",{src:"https://koenig-media.raywenderlich.com/uploads/2016/09/mapping_start_project_9_create_api_3.png",alt:'On the next screen, click the <FontIcon icon="iconfont icon-select"/> button to continue.',tabindex:"0",loading:"lazy"},null,-1),V=n("code",null,"[Create API key]",-1),Z=n("img",{src:"https://koenig-media.raywenderlich.com/uploads/2018/01/api_key2.png",alt:'When that’s done, copy the API key shown in the API key created dialog and click <FontIcon icon="iconfont icon-select"/>.',tabindex:"0",loading:"lazy"},null,-1),J=n("strong",null,"API key created",-1),$=n("code",null,"[Close]",-1),X=n("code",null,"google_maps_api.xml",-1),nn=n("code",null,"google_maps_key",-1),sn=n("figure",null,[n("img",{src:"https://koenig-media.raywenderlich.com/uploads/2018/01/first_map.png",alt:"Build and run again. You should see a map with a red marker on the screen.",width:"240",tabindex:"0",loading:"lazy"}),n("figcaption",null,"Build and run again. You should see a map with a red marker on the screen.")],-1),an={href:"https://console.developers.google.com/apis/library",target:"_blank",rel:"noopener noreferrer"},en=n("strong",null,"Google Places API for Android",-1),tn=o('<figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/enable_google_places.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="setting-up-a-fused-location-client" tabindex="-1"><a class="header-anchor" href="#setting-up-a-fused-location-client"><span>Setting up a Fused Location Client</span></a></h3><p>Before adding any Kotlin code, you’ll need to configure Android Studio to automatically insert <code>import</code> statements to save you from having to add each one manually.</p><p>Go to your Android Studio Preferences (or Settings on PC) and go to <strong>Editor &gt; General &gt; Auto Import</strong>, select the <strong>Add unambiguous imports on the fly</strong> and the <strong>Show import popup</strong> checkboxes, and click <strong>OK</strong>.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/imports.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',5),on=n("code",null,"MapsActivity.kt",-1),pn=n("code",null,"GoogleMap",-1),ln=n("code",null,"map",-1),cn=n("kbd",null,"Shift",-1),rn=n("kbd",null,"F6",-1),dn=o(`<div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> map<span class="token operator">:</span> GoogleMap</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,1),un=n("code",null,"build.gradle",-1),kn=o(`<div class="language-groovy line-numbers-mode" data-highlighter="prismjs" data-ext="groovy" data-title="groovy"><pre><code><span class="line">implementation <span class="token string">&#39;com.google.android.gms:play-services-location:11.8.0&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Next, add a <code>FusedLocationProviderClient</code> to <code>MapActivity</code></p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> fusedLocationClient<span class="token operator">:</span> FusedLocationProviderClient</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Add the following line of code to the end of <code>onCreate()</code>,</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line">fusedLocationClient <span class="token operator">=</span> LocationServices<span class="token punctuation">.</span><span class="token function">getFusedLocationProviderClient</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Have <code>MapActivity</code> implement the <code>GoogleMap.OnMarkerClickListener</code> interface, which defines the <code>onMarkerClick()</code>, called when a marker is clicked or tapped:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">class</span> MapsActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> OnMapReadyCallback<span class="token punctuation">,</span></span>
<span class="line">    GoogleMap<span class="token punctuation">.</span><span class="token function">OnMarkerClickListener</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">/* ... 생략 ... */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now you need to implement all methods declared in each of the interfaces added above. To do this, follow the steps below:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/implement_members.png" alt="Place the cursor anywhere on the class declaration and click on the red light bulb icon that appears above the class declaration.&lt;br/&gt;Select Implement members from the options that appear." tabindex="0" loading="lazy"><figcaption>Place the cursor anywhere on the class declaration and click on the red light bulb icon that appears above the class declaration.<br>Select <strong>Implement members</strong> from the options that appear.</figcaption></figure>`,9),mn=n("img",{src:"https://koenig-media.raywenderlich.com/uploads/2018/01/implement_members.png",alt:'On the Implement members dialog, click <FontIcon icon="iconfont icon-select"/>.',tabindex:"0",loading:"lazy"},null,-1),hn=n("strong",null,"Implement members",-1),gn=n("code",null,"[OK]",-1),vn=o(`<p>Update <strong>onMarkerClick()</strong> to be</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onMarkerClick</span><span class="token punctuation">(</span>p0<span class="token operator">:</span> Marker<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Add the following code to <strong>onMapReady()</strong>:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">getUiSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setZoomControlsEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">setOnMarkerClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Here you enable the zoom controls on the map and declare <code>MapsActivity</code> as the callback triggered when the user clicks a marker on this map.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/sydney.png" alt="Now build and run the app and click the marker on the map near Sydney, and you’ll see the title text appear" width="240" tabindex="0" loading="lazy"><figcaption>Now build and run the app and click the marker on the map near Sydney, and you’ll see the title text appear</figcaption></figure><p>Enter a different set of latitude and longitude values and you’ll see the marker move to your chosen location.</p><p>Replace the Sydney code with the following code to set a marker at New York City with the title “My Favorite City”:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">val</span> myPlace <span class="token operator">=</span> <span class="token function">LatLng</span><span class="token punctuation">(</span><span class="token number">40.73</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">73.99</span><span class="token punctuation">)</span>  <span class="token comment">// this is New York </span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">addMarker</span><span class="token punctuation">(</span><span class="token function">MarkerOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span>myPlace<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;My Favorite City&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">map<span class="token punctuation">.</span><span class="token function">moveCamera</span><span class="token punctuation">(</span>CameraUpdateFactory<span class="token punctuation">.</span><span class="token function">newLatLng</span><span class="token punctuation">(</span>myPlace<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/nyc1.png" alt="Build and run." width="240" tabindex="0" loading="lazy"><figcaption>Build and run.</figcaption></figure><p>Notice the map automatically centered the marker on the screen; <code>moveCamera()</code> does this for you. However, the zoom level of the map isn’t right, as it’s fully zoomed out.</p><p>Modify <code>moveCamera()</code> as shown below:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line">map<span class="token punctuation">.</span><span class="token function">moveCamera</span><span class="token punctuation">(</span>CameraUpdateFactory<span class="token punctuation">.</span><span class="token function">newLatLngZoom</span><span class="token punctuation">(</span>myPlace<span class="token punctuation">,</span> <span class="token number">12.0f</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Zoom level 0 corresponds to the fully zoomed-out world view. Most areas support zoom levels up to 20, while more remote areas only support zoom levels up to 13. A zoom level of 12 is a nice in-between value that shows enough detail without getting crazy-close.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/nyc2.png" alt="Build and run to view your progress so far." width="240" tabindex="0" loading="lazy"><figcaption>Build and run to view your progress so far.</figcaption></figure><hr><h2 id="user-permissions" tabindex="-1"><a class="header-anchor" href="#user-permissions"><span>User Permissions</span></a></h2><p>Your app needs the <code>ACCESS_FINE_LOCATION</code> permission for getting the user’s location details; you’ve already included this in <strong>AndroidManifest.xml</strong>.</p><p>Starting with Android 6.0, user permissions are handled a little differently than before. You don’t request permission during the installation of your app; rather, you request them at run time when the permission is actually required.</p>`,19),bn={href:"https://developer.android.com/guide/topics/security/normal-permissions.html",target:"_blank",rel:"noopener noreferrer"},fn={href:"https://developer.android.com/guide/topics/security/permissions.html#perm-groups",target:"_blank",rel:"noopener noreferrer"},yn={href:"https://developer.android.com/reference/android/Manifest.permission_group.html#CONTACTS",target:"_blank",rel:"noopener noreferrer"},wn={href:"https://developer.android.com/reference/android/Manifest.permission_group.html#CALENDAR",target:"_blank",rel:"noopener noreferrer"},_n={href:"https://developer.android.com/reference/android/Manifest.permission_group.html#LOCATION",target:"_blank",rel:"noopener noreferrer"},An=n("code",null,"MapsActivity.kt",-1),Cn=n("code",null,"companion object",-1),Pn=o(`<div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token keyword">val</span> LOCATION_PERMISSION_REQUEST_CODE <span class="token operator">=</span> <span class="token number">1</span>  </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Create a new method called <code>setUpMap()</code> as follows.</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">setUpMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>ActivityCompat<span class="token punctuation">.</span><span class="token function">checkSelfPermission</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span></span>
<span class="line">      android<span class="token punctuation">.</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_FINE_LOCATION<span class="token punctuation">)</span> <span class="token operator">!=</span> PackageManager<span class="token punctuation">.</span>PERMISSION_GRANTED<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    ActivityCompat<span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">arrayOf</span><span class="token punctuation">(</span>android<span class="token punctuation">.</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_FINE_LOCATION<span class="token punctuation">)</span><span class="token punctuation">,</span> LOCATION_PERMISSION_REQUEST_CODE<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The code above checks if the app has been granted the <code>ACCESS_FINE_LOCATION</code> permission. If it hasn’t, then request it from the user.</p><p>Add a call to <code>setUpMap()</code> at the end of <code>onMapReady()</code>.</p>`,5),In=n("img",{src:"https://koenig-media.raywenderlich.com/uploads/2018/01/allow.png",alt:'Build and run; click <FontIcon icon="iconfont icon-select"/> to grant permission.',width:"240",tabindex:"0",loading:"lazy"},null,-1),Mn=n("code",null,"[Allow]",-1),Ln={class:"hint-container note"},Sn=n("p",{class:"hint-container-title"},"Note",-1),xn={href:"https://developer.android.com/training/permissions/requesting.html",target:"_blank",rel:"noopener noreferrer"},qn=n("hr",null,null,-1),En=n("h2",{id:"getting-current-location",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#getting-current-location"},[n("span",null,"Getting Current Location")])],-1),Tn=n("p",null,"One of the most common uses for location services is finding the user’s current location. You do this by requesting the last known location of the user’s device from the Google Play services location APIs.",-1),Rn=n("code",null,"MapsActivity.kt",-1),On=o(`<div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> lastLocation<span class="token operator">:</span> Location</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Next, remove the code in <code>onMapReady()</code> that put a marker in New York:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onMapReady</span><span class="token punctuation">(</span>googleMap<span class="token operator">:</span> GoogleMap<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  map <span class="token operator">=</span> googleMap</span>
<span class="line">  </span>
<span class="line">  map<span class="token punctuation">.</span>uiSettings<span class="token punctuation">.</span>isZoomControlsEnabled <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">  map<span class="token punctuation">.</span><span class="token function">setOnMarkerClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">setUpMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Add the code below to the bottom of <strong>setUpMap()</strong>:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token comment">// 1</span></span>
<span class="line">map<span class="token punctuation">.</span>isMyLocationEnabled <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2</span></span>
<span class="line">fusedLocationClient<span class="token punctuation">.</span>lastLocation<span class="token punctuation">.</span><span class="token function">addOnSuccessListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> location <span class="token operator">-&gt;</span></span>
<span class="line">  <span class="token comment">// Got last known location. In some rare situations this can be null.</span></span>
<span class="line">  <span class="token comment">// 3</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>location <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    lastLocation <span class="token operator">=</span> location</span>
<span class="line">    <span class="token keyword">val</span> currentLatLng <span class="token operator">=</span> <span class="token function">LatLng</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> location<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span></span>
<span class="line">    map<span class="token punctuation">.</span><span class="token function">animateCamera</span><span class="token punctuation">(</span>CameraUpdateFactory<span class="token punctuation">.</span><span class="token function">newLatLngZoom</span><span class="token punctuation">(</span>currentLatLng<span class="token punctuation">,</span> <span class="token number">12f</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Taking each commented section in turn:</p><ol><li><strong>isMyLocationEnabled = true</strong> enables the <code>my-location</code> layer which draws a light blue dot on the user’s location. It also adds a button to the map that, when tapped, centers the map on the user’s location.</li><li><strong>fusedLocationClient.getLastLocation()</strong> gives you the most recent location currently available.</li><li>If you were able to retrieve the the most recent location, then move the camera to the user’s current location.</li></ol><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/boston.png" alt="Build and run to view your progress so far. You’ll see a light blue dot on the user’s location:" width="240" tabindex="0" loading="lazy"><figcaption>Build and run to view your progress so far. You’ll see a light blue dot on the user’s location:</figcaption></figure><h3 id="emulator-testing" tabindex="-1"><a class="header-anchor" href="#emulator-testing"><span>Emulator Testing</span></a></h3><p>It’s best to use a real Android device to test a map application. If for some reason, you need to test from an emulator, you can do so by mocking location data in the emulator.</p><p>One way to do this is by using the emulator’s extended controls. Here’s how you’d do that:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/11/Screen-Shot-2016-11-24-at-9.09.43-AM.png" alt="1. Start the emulator. On the right hand panel, click the more icon (…) to access the Extended Controls" width="240" tabindex="0" loading="lazy"><figcaption>1. Start the emulator. On the right hand panel, click the more icon (<strong>…</strong>) to access the <strong>Extended Controls</strong></figcaption></figure><figure><img src="https://koenig-media.raywenderlich.com/uploads/2016/09/Screen-Shot-2016-09-20-at-10.40.22-AM.png" alt="2. Select the Location item on the left hand side of the Extended Controls dialog." tabindex="0" loading="lazy"><figcaption>2. Select the <strong>Location</strong> item on the left hand side of the <strong>Extended Controls</strong> dialog.</figcaption></figure>`,13),Gn=n("code",null,"[Send]",-1),Nn=n("hr",null,null,-1),jn=n("h2",{id:"markers",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#markers"},[n("span",null,"Markers")])],-1),Un=n("p",null,"As you may have noticed from the last run, the blue dot on the user’s location is not very prominent. The Android Maps API lets you use a marker object, which is an icon that can be placed at a particular point on the map’s surface.",-1),Fn=n("code",null,"MapsActivity.kt",-1),zn=o(`<div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">placeMarkerOnMap</span><span class="token punctuation">(</span>location<span class="token operator">:</span> LatLng<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  <span class="token keyword">val</span> markerOptions <span class="token operator">=</span> <span class="token function">MarkerOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span></span>
<span class="line">  <span class="token comment">// 2</span></span>
<span class="line">  map<span class="token punctuation">.</span><span class="token function">addMarker</span><span class="token punctuation">(</span>markerOptions<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>Create a <code>MarkerOptions</code> object and sets the user’s current location as the position for the marker</li><li>Add the marker to the map</li></ol><p>Now replace the <code>setUpMap()</code> with the following:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">setUpMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>ActivityCompat<span class="token punctuation">.</span><span class="token function">checkSelfPermission</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> android<span class="token punctuation">.</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_FINE_LOCATION<span class="token punctuation">)</span> <span class="token operator">!=</span> PackageManager<span class="token punctuation">.</span>PERMISSION_GRANTED<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    ActivityCompat<span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span>android<span class="token punctuation">.</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_FINE_LOCATION<span class="token punctuation">)</span><span class="token punctuation">,</span> LOCATION_PERMISSION_REQUEST_CODE<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  map<span class="token punctuation">.</span>isMyLocationEnabled <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">  fusedLocationClient<span class="token punctuation">.</span>lastLocation<span class="token punctuation">.</span><span class="token function">addOnSuccessListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> location <span class="token operator">-&gt;</span></span>
<span class="line">    <span class="token comment">// Got last known location. In some rare situations this can be null.</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>location <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      lastLocation <span class="token operator">=</span> location</span>
<span class="line">      <span class="token keyword">val</span> currentLatLng <span class="token operator">=</span> <span class="token function">LatLng</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> location<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">placeMarkerOnMap</span><span class="token punctuation">(</span>currentLatLng<span class="token punctuation">)</span></span>
<span class="line">      map<span class="token punctuation">.</span><span class="token function">animateCamera</span><span class="token punctuation">(</span>CameraUpdateFactory<span class="token punctuation">.</span><span class="token function">newLatLngZoom</span><span class="token punctuation">(</span>currentLatLng<span class="token punctuation">,</span> <span class="token number">12f</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The only change you made to <code>setUpMap()</code> here is adding a call to <code>placeMarkerOnMap()</code> to show the marker.</p><p>Build and run to view your progress so far.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/boston_marker.png" alt="You should see a pin on the user’s location" width="240" tabindex="0" loading="lazy"><figcaption>You should see a pin on the user’s location</figcaption></figure><p>Don’t like the default Android pins? You can also create a marker with a custom icon as the pin. Go back to <code>placeMarkerOnMap()</code> and add the following line of code after the <code>MarkerOptions</code> instantiation:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line">markerOptions<span class="token punctuation">.</span><span class="token function">icon</span><span class="token punctuation">(</span></span>
<span class="line">  BitmapDescriptorFactory<span class="token punctuation">.</span><span class="token function">fromBitmap</span><span class="token punctuation">(</span></span>
<span class="line">    BitmapFactory<span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span>resources<span class="token punctuation">,</span> R<span class="token punctuation">.</span>mipmap<span class="token punctuation">.</span>ic_user_location<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9),Yn=n("code",null,"ic_user_location",-1),Kn={href:"https://koenig-media.raywenderlich.com/uploads/2016/09/ic_user_location.zip",target:"_blank",rel:"noopener noreferrer"},Bn=n("img",{src:"https://koenig-media.raywenderlich.com/uploads/2018/01/mipmap.png",alt:'Switch to the Project view in the Project pane and copy all the files to the corresponding <FontIcon icon="fas fa-folder-open"/> folders of the project',tabindex:"0",loading:"lazy"},null,-1),Dn=n("strong",null,"Project",-1),Hn=n("code",null,"mipmap",-1),Qn=o(`<p>Build and run to view your progress so far.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/custom_marker.png" alt="The marker on your location should now be using the  icon in the project" tabindex="0" loading="lazy"><figcaption>The marker on your location should now be using the <code>ic_user_location</code> icon in the project</figcaption></figure><p>What if all you want is the default pin but in a different color? Try to figure this out by yourself, and then check the spoiler below if you need more help:</p><details class="hint-container details"><summary>Answer</summary><p>Add this line of code to <code>placeMarkerOnMap()</code> instead:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line">markerOptions<span class="token punctuation">.</span><span class="token function">icon</span><span class="token punctuation">(</span>BitmapDescriptorFactory<span class="token punctuation">.</span><span class="token function">defaultMarker</span><span class="token punctuation">(</span>BitmapDescriptorFactory<span class="token punctuation">.</span>HUE_GREEN<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/green_marker.png" alt="This uses the default marker but in a green color instead of the default red." tabindex="0" loading="lazy"><figcaption>This uses the default marker but in a green color instead of the default red.</figcaption></figure></details><hr><h2 id="changing-the-map-type" tabindex="-1"><a class="header-anchor" href="#changing-the-map-type"><span>Changing the Map Type</span></a></h2><p>Depending on the functionality of your app, the normal map view might not be detailed enough for you.</p><p>The Android Maps API provides different map types to help you out: <code>MAP_TYPE_NORMAL</code>, <code>MAP_TYPE_SATELLITE</code>, <code>MAP_TYPE_TERRAIN</code>, <code>MAP_TYPE_HYBRID</code></p><p>Add the following inside <code>setUpMap()</code> just below the <code>setMyLocationEnabled()</code> call:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line">map<span class="token punctuation">.</span>mapType <span class="token operator">=</span> GoogleMap<span class="token punctuation">.</span>MAP_TYPE_TERRAIN</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>GoogleMap.MAP_TYPE_TERRAIN</code> displays a more detailed view of the area, showing changes in elevation</p>`,11),Wn=n("figure",null,[n("img",{src:"https://koenig-media.raywenderlich.com/uploads/2018/01/terrain.png",alt:" displays a typical road map with labels. This is default type.",width:"240",tabindex:"0",loading:"lazy"}),n("figcaption",null,[n("code",null,"GoogleMap.MAP_TYPE_NORMAL"),s(" displays a typical road map with labels. This is default type.")])],-1),Vn=n("figure",null,[n("img",{src:"https://koenig-media.raywenderlich.com/uploads/2018/01/satellite.png",alt:" displays a satellite view of an area with no labels",width:"240",tabindex:"0",loading:"lazy"}),n("figcaption",null,[n("code",null,"GoogleMap.MAP_TYPE_SATELLITE"),s(" displays a satellite view of an area with no labels")])],-1),Zn=n("figure",null,[n("img",{src:"https://koenig-media.raywenderlich.com/uploads/2018/01/hybrid.png",alt:" displays a combination of the satellite and normal mode",width:"240",tabindex:"0",loading:"lazy"}),n("figcaption",null,[n("code",null,"GoogleMap.MAP_TYPE_HYBRID"),s(" displays a combination of the satellite and normal mode")])],-1),Jn=o(`<hr><h2 id="implementing-geocoding" tabindex="-1"><a class="header-anchor" href="#implementing-geocoding"><span>Implementing Geocoding</span></a></h2><p>Now that you have the user’s location, it would be nice if you could show the address of that location when the user clicks on the marker. Google has a class that does exactly that: <code>Geocoder</code>. This takes the coordinates of a location and returns a readable address and vice versa.</p><p>Open <code>MapsActivity</code>. Add the following method:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">getAddress</span><span class="token punctuation">(</span>latLng<span class="token operator">:</span> LatLng<span class="token punctuation">)</span><span class="token operator">:</span> String <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  <span class="token keyword">val</span> geocoder <span class="token operator">=</span> <span class="token function">Geocoder</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">val</span> addresses<span class="token operator">:</span> List<span class="token operator">&lt;</span>Address<span class="token operator">&gt;</span><span class="token operator">?</span></span>
<span class="line">  <span class="token keyword">val</span> address<span class="token operator">:</span> Address<span class="token operator">?</span></span>
<span class="line">  <span class="token keyword">var</span> addressText <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;&quot;</span></span></span>
<span class="line">    </span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 2</span></span>
<span class="line">    addresses <span class="token operator">=</span> geocoder<span class="token punctuation">.</span><span class="token function">getFromLocation</span><span class="token punctuation">(</span>latLng<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> latLng<span class="token punctuation">.</span>longitude<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// 3</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> addresses &amp;amp<span class="token punctuation">;</span>&amp;amp<span class="token punctuation">;</span> <span class="token operator">!</span>addresses<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      address <span class="token operator">=</span> addresses<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></span>
<span class="line">      <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">0</span> until address<span class="token punctuation">.</span>maxAddressLineIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        addressText <span class="token operator">+=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> address<span class="token punctuation">.</span><span class="token function">getAddressLine</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token string-literal singleline"><span class="token string">&quot;\\n&quot;</span></span> <span class="token operator">+</span> address<span class="token punctuation">.</span><span class="token function">getAddressLine</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> IOException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;MapsActivity&quot;</span></span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>localizedMessage<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> addressText</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The import for <code>Address</code> is ambiguous, so specify the following import to resolve the issue:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">import</span> android<span class="token punctuation">.</span>location<span class="token punctuation">.</span>Address</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Briefly, here’s what’s going on:</p><ol><li>Creates a Geocoder object to turn a latitude and longitude coordinate into an address and vice versa.</li><li>Asks the geocoder to get the address from the location passed to the method.</li><li>If the response contains any address, then append it to a string and return.</li></ol><p>Replace <code>placeMarkerOnMap()</code> with the following.</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">placeMarkerOnMap</span><span class="token punctuation">(</span>location<span class="token operator">:</span> LatLng<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> markerOptions <span class="token operator">=</span> <span class="token function">MarkerOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">position</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">val</span> titleStr <span class="token operator">=</span> <span class="token function">getAddress</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span>  <span class="token comment">// add these two lines</span></span>
<span class="line">  markerOptions<span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span>titleStr<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  map<span class="token punctuation">.</span><span class="token function">addMarker</span><span class="token punctuation">(</span>markerOptions<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here you added a call to <code>getAddress()</code> and added this address as the marker title.</p><p>Build and run to view your progress so far</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/address.png" alt="Click on the marker to see the address" width="240" tabindex="0" loading="lazy"><figcaption>Click on the marker to see the address</figcaption></figure><p>Click anywhere on the map to dismiss the address.</p><p>Notice that when you move locations, the blue dot moves with you, but the marker remains at it’s first location. If you’re using a physical device, try moving around to see this. If you are on emulator, change your coordinates to another location in your emulator control.</p><p>The marker doesn’t move because your code does not know that the location has changed. The blue dot is controlled by the Google API, not your code. If you want the marker to follow the blue dot always, you need to receive location updates as a call-back in your code.</p><hr><h2 id="receiving-location-updates" tabindex="-1"><a class="header-anchor" href="#receiving-location-updates"><span>Receiving Location Updates</span></a></h2><p>Knowing your user’s location at all times can help you provide a better experience. This section of the tutorial shows you how to continuously receive updates of your user’s location.</p><p>To do this, you first have to create a location request.</p><p>Open <code>MapsActivity</code>. Now add the following properties:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token comment">// 1</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> locationCallback<span class="token operator">:</span> LocationCallback</span>
<span class="line"><span class="token comment">// 2</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token keyword">lateinit</span> <span class="token keyword">var</span> locationRequest<span class="token operator">:</span> LocationRequest</span>
<span class="line"><span class="token keyword">private</span> <span class="token keyword">var</span> locationUpdateState <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token keyword">val</span> LOCATION_PERMISSION_REQUEST_CODE <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">  <span class="token comment">// 3</span></span>
<span class="line">  <span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token keyword">val</span> REQUEST_CHECK_SETTINGS <span class="token operator">=</span> <span class="token number">2</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,23),$n={href:"https://developers.google.com/android/reference/com/google/android/gms/location/LocationCallback",target:"_blank",rel:"noopener noreferrer"},Xn=n("code",null,"LocationCallback",-1),ns={href:"https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest",target:"_blank",rel:"noopener noreferrer"},ss=n("code",null,"LocationRequest",-1),as=n("li",null,[n("code",null,"REQUEST_CHECK_SETTINGS"),s(" is used as the request code passed to "),n("code",null,"onActivityResult"),s(".")],-1),es=o(`<p>Next add the following:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">startLocationUpdates</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">//1</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>ActivityCompat<span class="token punctuation">.</span><span class="token function">checkSelfPermission</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span></span>
<span class="line">      android<span class="token punctuation">.</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_FINE_LOCATION<span class="token punctuation">)</span> <span class="token operator">!=</span> PackageManager<span class="token punctuation">.</span>PERMISSION_GRANTED<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    ActivityCompat<span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">arrayOf</span><span class="token punctuation">(</span>android<span class="token punctuation">.</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>ACCESS_FINE_LOCATION<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        LOCATION_PERMISSION_REQUEST_CODE<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">//2</span></span>
<span class="line">  fusedLocationClient<span class="token punctuation">.</span><span class="token function">requestLocationUpdates</span><span class="token punctuation">(</span>locationRequest<span class="token punctuation">,</span> locationCallback<span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token comment">/* Looper */</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>In <code>startLocationUpdates()</code>, if the <code>ACCESS_FINE_LOCATION</code> permission has not been granted, request it now and return.</li><li>If there is permission, request for location updates.</li></ol><p>Now add the following method:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">createLocationRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 1</span></span>
<span class="line">  locationRequest <span class="token operator">=</span> <span class="token function">LocationRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token comment">// 2</span></span>
<span class="line">  locationRequest<span class="token punctuation">.</span>interval <span class="token operator">=</span> <span class="token number">10000</span></span>
<span class="line">  <span class="token comment">// 3</span></span>
<span class="line">  locationRequest<span class="token punctuation">.</span>fastestInterval <span class="token operator">=</span> <span class="token number">5000</span></span>
<span class="line">  locationRequest<span class="token punctuation">.</span>priority <span class="token operator">=</span> LocationRequest<span class="token punctuation">.</span>PRIORITY_HIGH_ACCURACY</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">val</span> builder <span class="token operator">=</span> LocationSettingsRequest<span class="token punctuation">.</span><span class="token function">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">addLocationRequest</span><span class="token punctuation">(</span>locationRequest<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 4</span></span>
<span class="line">  <span class="token keyword">val</span> client <span class="token operator">=</span> LocationServices<span class="token punctuation">.</span><span class="token function">getSettingsClient</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">val</span> task <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">checkLocationSettings</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 5</span></span>
<span class="line">  task<span class="token punctuation">.</span><span class="token function">addOnSuccessListener</span> <span class="token punctuation">{</span></span>
<span class="line">    locationUpdateState <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token function">startLocationUpdates</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  task<span class="token punctuation">.</span><span class="token function">addOnFailureListener</span> <span class="token punctuation">{</span> e <span class="token operator">-&gt;</span></span>
<span class="line">    <span class="token comment">// 6</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">is</span> ResolvableApiException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// Location settings are not satisfied, but this can be fixed</span></span>
<span class="line">      <span class="token comment">// by showing the user a dialog.</span></span>
<span class="line">      <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// Show the dialog by calling startResolutionForResult(),</span></span>
<span class="line">        <span class="token comment">// and check the result in onActivityResult().</span></span>
<span class="line">        e<span class="token punctuation">.</span><span class="token function">startResolutionForResult</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token label symbol">@MapsActivity</span><span class="token punctuation">,</span></span>
<span class="line">            REQUEST_CHECK_SETTINGS<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>sendEx<span class="token operator">:</span> IntentSender<span class="token punctuation">.</span>SendIntentException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// Ignore the error.</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here’s what’s going on in <code>createLocationRequest()</code>:</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/location.png" alt="Before you start requesting for location updates, you need to check the state of the user’s location settings." width="240" tabindex="0" loading="lazy"><figcaption>Before you start requesting for location updates, you need to check the state of the user’s location settings.</figcaption></figure><p>Now add the following three methods:</p><p>Here’s what’s going on:</p><p>Setup the <code>LocationCallback()</code> in <code>onCreate()</code> to be:</p><p>Here you update <code>lastLocation</code> with the new location and update the map with the new location coordinates.</p><p>Next, add a call to <code>createLocationRequest()</code> to the bottom of <code>onCreate()</code>:</p><p>Your app is now set to receive location updates. When you change your location, the map will update with a new marker showing your new location. Note that the markers are still clickable to get the address as before.</p><p>Build and run.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/moving.png" alt="Play around with the app to view the changes" width="240" tabindex="0" loading="lazy"><figcaption>Play around with the app to view the changes</figcaption></figure><p>Since this app is supposed to be a guide, a user should be able to search for places of interest to them, right?</p><p>That’s where the Google Places API comes in; it provides your app the functionality to search for millions of institutions and places of interest. It’s Android Library provides a number of cool functionalities, one of them being the <strong>Place Picker</strong>, which is a UI widget that lets you provide a place search functionality with very few lines of code. Too good to be true? Try it!</p>`,17),ts=n("code",null,"build.gradle",-1),os=o("<p>Once again, open <code>MapsActivity</code>.</p><p>Add this constant to the <code>companion object</code>:</p><p>Now add the following method:</p><p>This method creates a new builder for an intent to start the Place Picker UI and then starts the <code>PlacePicker</code> intent.</p><p>Now add the following lines of code to <code>onActivityResult()</code>:</p><p>Here you retrieve details about the selected place if it has a <code>RESULT_OK</code> result for a <code>PLACE_PICKER_REQUEST</code> request, and then place a marker on that position on the map.</p><p>You are almost ready to try out the place search — you just need to call <strong>loadPlacePicker()</strong> inside the code.</p><p>You’ll create a floating action button (FAB) at the bottom-right of the map to trigger this method. FAB requires <code>CoordinatorLayout</code> which is part of the design support library.</p>",8),ps=n("code",null,"build.gradle",-1),is=n("strong",null,"Android support design library",-1),ls=o('<p>Then replace the contents of <strong>res &gt; layout &gt; activity_maps.xml</strong> with the following lines of code:</p><p>You were using a fragment element for map earlier; you’ve kept that and added a floating action button.</p><p>In <code>MapsActivity</code>, add the following lines of code to <code>onCreate()</code>:</p><p>Build and run.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/harvard.gif" alt="Now when you click the search button at the bottom of the map the place picker will load" width="240" tabindex="0" loading="lazy"><figcaption>Now when you click the search button at the bottom of the map the place picker will load</figcaption></figure>',5),cs={href:"https://koenig-media.raywenderlich.com/uploads/2018/01/cityguide-final-1.zip",target:"_blank",rel:"noopener noreferrer"},rs=n("code",null,"google_maps_api.xml",-1),ds={href:"https://developers.google.com/maps/web-services/",target:"_blank",rel:"noopener noreferrer"},us={href:"https://developers.google.com/maps/documentation/android-api/",target:"_blank",rel:"noopener noreferrer"},ks={href:"https://developers.google.com/maps/documentation/android-api/marker#customize_a_marker",target:"_blank",rel:"noopener noreferrer"},ms={href:"https://developer.android.com/training/permissions/requesting.html",target:"_blank",rel:"noopener noreferrer"},hs={href:"https://developers.google.com/places/android-api/",target:"_blank",rel:"noopener noreferrer"},gs=n("a",{href:"https://developer.android.com/training/location/change-location-settings.html#location-request",target:"_blank",rel:"noopener noreferrer"},"receiving location updates",-1),vs={href:"https://developer.android.com/studio/run/emulator.html#extended",target:"_blank",rel:"noopener noreferrer"},bs=o(`<p>If you have any questions or comments, please feel free to join the forum discussion below!</p><ol><li>You create an instance of LocationRequest, add it to an instance of <code>LocationSettingsRequest.Builder</code> and retrieve and handle any changes to be made based on the current state of the user’s location settings.</li><li><code>interval</code> specifies the rate at which your app will like to receive updates.</li><li><code>fastestInterval</code> specifies the fastest rate at which the app can handle updates. Setting the <code>fastestInterval</code> rate places a limit on how fast updates will be sent to your app.</li><li>re you start requesting for location updates, you need to check the state of the user’s location settings.</li><li>You create a settings client and a task to check location settings.</li><li>A task <code>success</code> means all is well and you can go ahead and initiate a location request.</li><li>A task <code>failure</code> means the location settings have some issues which can be fixed. This could be as a result of the user’s location settings turned off</li></ol><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/location.png" alt="You fix this by showing the user a dialog" width="240" tabindex="0" loading="lazy"><figcaption>You fix this by showing the user a dialog</figcaption></figure><p>Now add the following three methods:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token comment">// 1</span></span>
<span class="line"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onActivityResult</span><span class="token punctuation">(</span>requestCode<span class="token operator">:</span> Int<span class="token punctuation">,</span> resultCode<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token operator">:</span> Intent<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onActivityResult</span><span class="token punctuation">(</span>requestCode<span class="token punctuation">,</span> resultCode<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>requestCode <span class="token operator">==</span> REQUEST_CHECK_SETTINGS<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>resultCode <span class="token operator">==</span> Activity<span class="token punctuation">.</span>RESULT_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      locationUpdateState <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">      <span class="token function">startLocationUpdates</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2</span></span>
<span class="line"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  fusedLocationClient<span class="token punctuation">.</span><span class="token function">removeLocationUpdates</span><span class="token punctuation">(</span>locationCallback<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>locationUpdateState<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">startLocationUpdates</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here’s what’s going on:</p><ol><li>Override <code>AppCompatActivity</code>’s <code>onActivityResult()</code> method and start the update request if it has a <code>RESULT_OK</code> result for a <code>REQUEST_CHECK_SETTINGS</code> request.</li><li>Override <code>onPause()</code> to stop location update request</li><li>Override <code>onResume()</code> to restart the location update request.</li></ol><p>Setup the <code>LocationCallback()</code> in <code>onCreate()</code> to be:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line">locationCallback <span class="token operator">=</span> <span class="token keyword">object</span> <span class="token operator">:</span> <span class="token function">LocationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onLocationResult</span><span class="token punctuation">(</span>p0<span class="token operator">:</span> LocationResult<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onLocationResult</span><span class="token punctuation">(</span>p0<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    lastLocation <span class="token operator">=</span> p0<span class="token punctuation">.</span>lastLocation</span>
<span class="line">    <span class="token function">placeMarkerOnMap</span><span class="token punctuation">(</span><span class="token function">LatLng</span><span class="token punctuation">(</span>lastLocation<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> lastLocation<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here you update <code>lastLocation</code> with the new location and update the map with the new location coordinates.</p><p>Next, add a call to <code>createLocationRequest()</code> to the bottom of <code>onCreate()</code>:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token function">createLocationRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Your app is now set to receive location updates. When you change your location, the map will update with a new marker showing your new location. Note that the markers are still clickable to get the address as before.</p><p>Build and run.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/moving.png" alt="Play around with the app to view the changes" width="240" tabindex="0" loading="lazy"><figcaption>Play around with the app to view the changes</figcaption></figure><hr><h2 id="place-search" tabindex="-1"><a class="header-anchor" href="#place-search"><span>Place Search</span></a></h2><p>Since this app is supposed to be a guide, a user should be able to search for places of interest to them, right?</p><p>That’s where the Google Places API comes in; it provides your app the functionality to search for millions of institutions and places of interest. It’s Android Library provides a number of cool functionalities, one of them being the <strong>Place Picker</strong>, which is a UI widget that lets you provide a place search functionality with very few lines of code. Too good to be true? Try it!</p>`,19),fs=n("code",null,"build.gradle",-1),ys=o(`<div class="language-groovy line-numbers-mode" data-highlighter="prismjs" data-ext="groovy" data-title="groovy"><pre><code><span class="line">implementation <span class="token string">&#39;com.google.android.gms:play-services-places:11.8.0&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Once again, open <code>MapsActivity</code>.</p><p>Add this constant to the <code>companion object</code>:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token keyword">val</span> PLACE_PICKER_REQUEST <span class="token operator">=</span> <span class="token number">3</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now add the following method:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">loadPlacePicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> builder <span class="token operator">=</span> PlacePicker<span class="token punctuation">.</span><span class="token function">IntentBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">startActivityForResult</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> PLACE_PICKER_REQUEST<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> GooglePlayServicesRepairableException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> GooglePlayServicesNotAvailableException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This method creates a new builder for an intent to start the Place Picker UI and then starts the <code>PlacePicker</code> intent.</p><p>Now add the following lines of code to <code>onActivityResult()</code>:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>requestCode <span class="token operator">==</span> PLACE_PICKER_REQUEST<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>resultCode <span class="token operator">==</span> RESULT_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> place <span class="token operator">=</span> PlacePicker<span class="token punctuation">.</span><span class="token function">getPlace</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">var</span> addressText <span class="token operator">=</span> place<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    addressText <span class="token operator">+=</span> <span class="token string-literal singleline"><span class="token string">&quot;\\n&quot;</span></span> <span class="token operator">+</span> place<span class="token punctuation">.</span>address<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">placeMarkerOnMap</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span>latLng<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here you retrieve details about the selected place if it has a <code>RESULT_OK</code> result for a <code>PLACE_PICKER_REQUEST</code> request, and then place a marker on that position on the map.</p><p>You are almost ready to try out the place search — you just need to call <code>loadPlacePicker()</code> inside the code.</p><p>You’ll create a floating action button (FAB) at the bottom-right of the map to trigger this method. FAB requires <code>CoordinatorLayout</code> which is part of the design support library.</p>`,12),ws=n("code",null,"build.gradle",-1),_s=n("strong",null,"Android support design library",-1),As=o(`<div class="language-groovy line-numbers-mode" data-highlighter="prismjs" data-ext="groovy" data-title="groovy"><pre><code><span class="line">implementation <span class="token string">&#39;com.android.support:design:26.1.0&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container note"><p class="hint-container-title">Note</p><p>As usual, if you are using a newer Android SDK version, you may need to update the version of this dependency as well so they match.</p></div><p>Then replace the contents of <strong>res &gt; layout &gt; activity_maps.xml</strong> with the following lines of code:</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>android.support.design.widget.CoordinatorLayout</span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">android:</span>fitsSystemWindows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fragment</span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/map<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.google.android.gms.maps.SupportMapFragment<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>android.support.design.widget.FloatingActionButton</span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/fab<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom|end<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_marginRight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>8dp<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_marginBottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>112dp<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@android:drawable/ic_menu_search<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>android.support.design.widget.CoordinatorLayout</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You were using a fragment element for map earlier; you’ve kept that and added a floating action button.</p><p>In <code>MapsActivity</code>, add the following lines of code to <code>onCreate()</code>:</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">val</span> fab <span class="token operator">=</span> findViewById<span class="token operator">&lt;</span>FloatingActionButton<span class="token operator">&gt;</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>fab<span class="token punctuation">)</span></span>
<span class="line">fab<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">loadPlacePicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Build and run.</p><figure><img src="https://koenig-media.raywenderlich.com/uploads/2018/01/harvard.gif" alt="Now when you click the search button at the bottom of the map the place picker will load" width="240" tabindex="0" loading="lazy"><figcaption>Now when you click the search button at the bottom of the map the place picker will load</figcaption></figure><hr><h2 id="where-to-go-from-here" tabindex="-1"><a class="header-anchor" href="#where-to-go-from-here"><span>Where to Go From Here?</span></a></h2>`,11),Cs={href:"https://koenig-media.raywenderlich.com/uploads/2018/01/cityguide-final-1.zip",target:"_blank",rel:"noopener noreferrer"},Ps=n("strong",null,"google_maps_api.xml",-1),Is={href:"https://developers.google.com/maps/web-services/",target:"_blank",rel:"noopener noreferrer"},Ms={href:"https://developers.google.com/maps/documentation/android-api/",target:"_blank",rel:"noopener noreferrer"},Ls={href:"https://developers.google.com/maps/documentation/android-api/marker#customize_a_marker",target:"_blank",rel:"noopener noreferrer"},Ss={href:"https://developer.android.com/training/permissions/requesting.html",target:"_blank",rel:"noopener noreferrer"},xs={href:"https://developers.google.com/places/android-api/",target:"_blank",rel:"noopener noreferrer"},qs=n("a",{href:"https://developer.android.com/training/location/change-location-settings.html#location-request",target:"_blank",rel:"noopener noreferrer"},"receiving location updates",-1),Es={href:"https://developer.android.com/studio/run/emulator.html#extended",target:"_blank",rel:"noopener noreferrer"},Ts=o(`<p>If you have any questions or comments, please feel free to join the forum discussion below!</p><ol><li>Override <code>AppCompatActivity</code>’s <code>onActivityResult()</code> method and start the update request if it has a <code>RESULT_OK</code> result for a <code>REQUEST_CHECK_SETTINGS</code> request.</li><li>Override <code>onPause()</code> to stop location update request</li><li>Override <code>onResume()</code> to restart the location update request.</li></ol><div class="hint-container note"><p class="hint-container-title">Note</p><p>As usual, if you are using a newer Android SDK version, you may need to update the version of this dependency as well so they match.</p></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token comment">// 1</span></span>
<span class="line"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onActivityResult</span><span class="token punctuation">(</span>requestCode<span class="token operator">:</span> Int<span class="token punctuation">,</span> resultCode<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token operator">:</span> Intent<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onActivityResult</span><span class="token punctuation">(</span>requestCode<span class="token punctuation">,</span> resultCode<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>requestCode <span class="token operator">==</span> REQUEST_CHECK_SETTINGS<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>resultCode <span class="token operator">==</span> Activity<span class="token punctuation">.</span>RESULT_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      locationUpdateState <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">      <span class="token function">startLocationUpdates</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2</span></span>
<span class="line"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  fusedLocationClient<span class="token punctuation">.</span><span class="token function">removeLocationUpdates</span><span class="token punctuation">(</span>locationCallback<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>locationUpdateState<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">startLocationUpdates</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line">locationCallback <span class="token operator">=</span> <span class="token keyword">object</span> <span class="token operator">:</span> <span class="token function">LocationCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onLocationResult</span><span class="token punctuation">(</span>p0<span class="token operator">:</span> LocationResult<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onLocationResult</span><span class="token punctuation">(</span>p0<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    lastLocation <span class="token operator">=</span> p0<span class="token punctuation">.</span>lastLocation</span>
<span class="line">    <span class="token function">placeMarkerOnMap</span><span class="token punctuation">(</span><span class="token function">LatLng</span><span class="token punctuation">(</span>lastLocation<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> lastLocation<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token function">createLocationRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-groovy line-numbers-mode" data-highlighter="prismjs" data-ext="groovy" data-title="groovy"><pre><code><span class="line">implementation <span class="token string">&#39;com.google.android.gms:play-services-places:11.8.0&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token keyword">val</span> PLACE_PICKER_REQUEST <span class="token operator">=</span> <span class="token number">3</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">loadPlacePicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> builder <span class="token operator">=</span> PlacePicker<span class="token punctuation">.</span><span class="token function">IntentBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">startActivityForResult</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> PLACE_PICKER_REQUEST<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> GooglePlayServicesRepairableException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> GooglePlayServicesNotAvailableException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>requestCode <span class="token operator">==</span> PLACE_PICKER_REQUEST<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>resultCode <span class="token operator">==</span> RESULT_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> place <span class="token operator">=</span> PlacePicker<span class="token punctuation">.</span><span class="token function">getPlace</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">var</span> addressText <span class="token operator">=</span> place<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    addressText <span class="token operator">+=</span> <span class="token string-literal singleline"><span class="token string">&quot;\\n&quot;</span></span> <span class="token operator">+</span> place<span class="token punctuation">.</span>address<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">placeMarkerOnMap</span><span class="token punctuation">(</span>place<span class="token punctuation">.</span>latLng<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-groovy line-numbers-mode" data-highlighter="prismjs" data-ext="groovy" data-title="groovy"><pre><code><span class="line">implementation <span class="token string">&#39;com.android.support:design:26.1.0&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>android.support.design.widget.CoordinatorLayout</span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://schemas.android.com/apk/res/android<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span></span>
<span class="line">  <span class="token attr-name"><span class="token namespace">android:</span>fitsSystemWindows</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fragment</span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/map<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.google.android.gms.maps.SupportMapFragment<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>match_parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>android.support.design.widget.FloatingActionButton</span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@+id/fab<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_content<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_gravity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom|end<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_marginRight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>8dp<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>layout_marginBottom</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>112dp<span class="token punctuation">&quot;</span></span></span>
<span class="line">    <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@android:drawable/ic_menu_search<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>android.support.design.widget.CoordinatorLayout</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">val</span> fab <span class="token operator">=</span> findViewById<span class="token operator">&lt;</span>FloatingActionButton<span class="token operator">&gt;</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>fab<span class="token punctuation">)</span></span>
<span class="line">fab<span class="token punctuation">.</span><span class="token function">setOnClickListener</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">loadPlacePicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,13);function Rs(r,Os){const d=c("VPCard"),p=c("router-link"),u=c("SiteInfo"),e=c("FontIcon"),k=c("Tabs");return f(),h("div",null,[n("h1",w,[n("a",_,[n("span",null,g(r.$frontmatter.title)+" 관련",1)])]),a(d,v(b({title:"Android > Article(s)",desc:"Article(s)",link:"/programming/java-android/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),n("nav",A,[n("ul",null,[n("li",null,[a(p,{to:"#getting-started"},{default:t(()=>[s("Getting Started")]),_:1})]),n("li",null,[a(p,{to:"#using-the-google-maps-apis"},{default:t(()=>[s("Using the Google Maps APIs")]),_:1}),n("ul",null,[n("li",null,[a(p,{to:"#creating-api-keys"},{default:t(()=>[s("Creating API Keys")]),_:1})]),n("li",null,[a(p,{to:"#setting-up-a-fused-location-client"},{default:t(()=>[s("Setting up a Fused Location Client")]),_:1})])])]),n("li",null,[a(p,{to:"#user-permissions"},{default:t(()=>[s("User Permissions")]),_:1})]),n("li",null,[a(p,{to:"#getting-current-location"},{default:t(()=>[s("Getting Current Location")]),_:1}),n("ul",null,[n("li",null,[a(p,{to:"#emulator-testing"},{default:t(()=>[s("Emulator Testing")]),_:1})])])]),n("li",null,[a(p,{to:"#markers"},{default:t(()=>[s("Markers")]),_:1})]),n("li",null,[a(p,{to:"#changing-the-map-type"},{default:t(()=>[s("Changing the Map Type")]),_:1})]),n("li",null,[a(p,{to:"#implementing-geocoding"},{default:t(()=>[s("Implementing Geocoding")]),_:1})]),n("li",null,[a(p,{to:"#receiving-location-updates"},{default:t(()=>[s("Receiving Location Updates")]),_:1})]),n("li",null,[a(p,{to:"#place-search"},{default:t(()=>[s("Place Search")]),_:1})]),n("li",null,[a(p,{to:"#where-to-go-from-here"},{default:t(()=>[s("Where to Go From Here?")]),_:1})])])]),C,a(u,{name:"Introduction to Google Maps API for Android with Kotlin",desc:"In this Google Maps API Tutorial for Android you will learn how to retrieve the user’s current location, get location updates and search for places.",url:"https://kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin",logo:"https://assets.carolus.kodeco.com/assets/murakami/category-icons/category-other-core-apis-android-e2f05defab3a37db4e2d49c3eaea0750a2c1f9419af4ef95d2fd58af01dcfce4.svg",preview:"https://koenig-media.raywenderlich.com/uploads/2018/01/Mapping-kotlin-twitter.png"}),P,n("p",null,[s("Open "),a(e,{icon:"iconfont icon-kotlin"}),I,s(". It should look like this:")]),M,n("p",null,[s("The template also adds a "),L,s(" dependency to "),a(e,{icon:"iconfont icon-gradle"}),S,s(". This dependency exposes the Google Maps and Location Services APIs to the application.")]),x,n("div",q,[E,n("p",null,[s("If you’re using an emulator, the emulator’s installed version will have to satisfy the version of Google Play Services required in your "),a(e,{icon:"iconfont icon-gradle"}),T,s(" file. If you see a message that you need to update the emulator’s Google Play Services version, you can either download the latest Google APIs using your Android Studio SDK Manager and install on your Virtual Device, or lower the version in your gradle dependency.")])]),R,O,n("p",null,[s("To use any of the "),n("a",G,[a(e,{icon:"fa-brands fa-android"}),s("Google Maps APIs")]),s(", you need to create an API key and enable any required APIs from the "),n("a",N,[a(e,{icon:"fa-brands fa-google"}),s("developer console")]),s(". If you don’t already have a Google account, "),n("a",j,[a(e,{icon:"fa-brands fa-google"}),s("create one")]),s(" now — it’s free!")]),U,n("p",null,[s("Open "),a(e,{icon:"fas fa-folder-open"}),F,a(e,{icon:"iconfont icon-code"}),z,s(". You will see the following:")]),Y,K,n("figure",null,[B,n("figcaption",null,[s("On the "),D,s(" page, select "),H,s(" and click "),a(e,{icon:"iconfont icon-select"}),Q,s(".")])]),n("figure",null,[W,n("figcaption",null,[s("On the next screen, click the "),a(e,{icon:"iconfont icon-select"}),V,s(" button to continue.")])]),n("figure",null,[Z,n("figcaption",null,[s("When that’s done, copy the API key shown in the "),J,s(" dialog and click "),a(e,{icon:"iconfont icon-select"}),$,s(".")])]),n("p",null,[s("Head back to "),a(e,{icon:"iconfont icon-code"}),X,s(", replace the value of "),nn,s(" key with the copied API key.")]),sn,n("p",null,[s("Go back to the "),n("a",an,[a(e,{icon:"fa-brands fa-google"}),s("developer console")]),s(" and enable the "),en,s(". You will be using this later on to search for a place:")]),tn,n("p",null,[s("Open "),a(e,{icon:"iconfont icon-kotlin"}),on,s(" and first rename the "),pn,s(" property to "),ln,s(" by setting the cursor on it and hitting "),cn,s("+"),rn,s(":")]),dn,n("p",null,[s("Open your app "),a(e,{icon:"iconfont icon-gradle"}),un,s(" file and add the Google Maps location dependency:")]),kn,n("figure",null,[mn,n("figcaption",null,[s("On the "),hn,s(" dialog, click "),a(e,{icon:"iconfont icon-select"}),gn,s(".")])]),vn,n("p",null,[s("Permissions are classified into two categories: "),n("strong",null,[n("a",bn,[a(e,{icon:"fa-brands fa-android"}),s("normal")])]),s(" and "),n("strong",null,[n("a",fn,[a(e,{icon:"fa-brands fa-android"}),s("dangerous")])]),s(" categories. Permissions that belong to the dangerous category require run time permission from the user. Permissions that request access to the user’s private information such as the user’s "),n("a",yn,[a(e,{icon:"fa-brands fa-android"}),s("CONTACTS")]),s(", "),n("a",wn,[a(e,{icon:"fa-brands fa-android"}),s("CALENDAR")]),s(", "),n("a",_n,[a(e,{icon:"fa-brands fa-android"}),s("LOCATION")]),s(" etc. are categorised as dangerous permissions.")]),n("p",null,[s("Open "),a(e,{icon:"iconfont icon-kotlin"}),An,s(" and add a "),Cn,s(" with the code to request location permission:")]),Pn,n("figure",null,[In,n("figcaption",null,[s("Build and run; click "),a(e,{icon:"iconfont icon-select"}),Mn,s(" to grant permission.")])]),n("div",Ln,[Sn,n("p",null,[s("A thorough discussion of user permissions is beyond the scope of this tutorial, but check out "),n("a",xn,[a(e,{icon:"fa-brands fa-android"}),s("this")]),s(" document on requesting permissions at run time.")])]),qn,En,Tn,n("p",null,[s("In "),a(e,{icon:"iconfont icon-kotlin"}),Rn,s(", add the following new property:")]),On,n("p",null,[s("Enter the latitude and longitude values in the specified fields and click "),a(e,{icon:"iconfont icon-select"}),Gn,s(".")]),Nn,jn,Un,n("p",null,[s("In "),a(e,{icon:"iconfont icon-kotlin"}),Fn,s(" add the following code.")]),zn,n("p",null,[s("Download custom pins named "),Yn,s(),n("a",Kn,[a(e,{icon:"fas fa-file-zipper"}),s("from this link")]),s(" and unzip it.")]),n("figure",null,[Bn,n("figcaption",null,[s("Switch to the "),Dn,s(" view in the Project pane and copy all the files to the corresponding "),a(e,{icon:"fas fa-folder-open"}),Hn,s(" folders of the project")])]),Qn,a(k,{id:"437",data:[{id:"MAP_TYPE_NORMAL"},{id:"MAP_TYPE_SATELLITE"},{id:"MAP_TYPE_HYBRID"}]},{title0:t(({value:i,isActive:l})=>[s("MAP_TYPE_NORMAL")]),title1:t(({value:i,isActive:l})=>[s("MAP_TYPE_SATELLITE")]),title2:t(({value:i,isActive:l})=>[s("MAP_TYPE_HYBRID")]),tab0:t(({value:i,isActive:l})=>[Wn]),tab1:t(({value:i,isActive:l})=>[Vn]),tab2:t(({value:i,isActive:l})=>[Zn]),_:1}),Jn,n("ol",null,[n("li",null,[s("Declare a "),n("a",$n,[a(e,{icon:"fa-brands fa-android"}),Xn]),s(" property.")]),n("li",null,[s("Declare a "),n("a",ns,[a(e,{icon:"fa-brands fa-android"}),ss]),s(" property and a location updated state property.")]),as]),es,n("p",null,[s("Add the places API to your app "),a(e,{icon:"iconfont icon-gradle"}),ts,s(":")]),os,n("p",null,[s("Go back to "),a(e,{icon:"iconfont icon-gradle"}),ps,s(" for the app and add the "),is,s(" as a dependency:")]),ls,n("p",null,[s("You can download the final project from this tutorial "),n("a",cs,[a(e,{icon:"fas fa-file-zipper"}),s("here")]),s(". Remember to put a valid Google Maps API key in "),a(e,{icon:"iconfont icon-code"}),rs,s(" when running the final project.")]),n("p",null,[s("This Google Maps API tutorial only brushed the surface of what you can do with the Google Maps APIs. The official Google documentation has much more about "),n("a",ds,[a(e,{icon:"fa-brands fa-google"}),s("web services")]),s(" and "),n("a",us,[a(e,{icon:"fa-brands fa-android"}),s("and the Android API here")]),s(".")]),n("p",null,[s("You can also check out the developer page on other ways to "),n("a",ks,[a(e,{icon:"fa-brands fa-android"}),s("customize the marker")]),s(". User permission checks for run-time permissions need a better implementation than what you’ve done in this Google Maps API tutorial; the docs also have some great information "),n("a",ms,[a(e,{icon:"fa-brands fa-android"}),s("about more advanced permission granting here")]),s(".")]),n("p",null,[s("Check out the developer pages for extensive reading on the "),n("a",hs,[a(e,{icon:"fa-brands fa-android"}),s("Google Places API for Android")]),s(", "),gs,s(" and mocking location data via the "),n("a",vs,[a(e,{icon:"fa-brands fa-android"}),s("emulator’s extended controls")]),s(".")]),bs,n("p",null,[s("Add the places API to your app "),a(e,{icon:"iconfont icon-gradle"}),fs,s(":")]),ys,n("p",null,[s("Go back to "),a(e,{icon:"iconfont icon-gradle"}),ws,s(" for the app and add the "),_s,s(" as a dependency:")]),As,n("p",null,[s("You can download the final project from this tutorial "),n("a",Cs,[a(e,{icon:"fas fa-file-zipper"}),s("here")]),s(". Remember to put a valid Google Maps API key in "),Ps,s(" when running the final project.")]),n("p",null,[s("This Google Maps API tutorial only brushed the surface of what you can do with the Google Maps APIs. The official Google documentation has much more about "),n("a",Is,[a(e,{icon:"fa-brands fa-google"}),s("web services")]),s(" and "),n("a",Ms,[a(e,{icon:"fa-brands fa-android"}),s("and the Android API here")]),s(".")]),n("p",null,[s("You can also check out the developer page on other ways to "),n("a",Ls,[a(e,{icon:"fa-brands fa-android"}),s("customize the marker")]),s(". User permission checks for run-time permissions need a better implementation than what you’ve done in this Google Maps API tutorial; the docs also have some great information "),n("a",Ss,[a(e,{icon:"fa-brands fa-android"}),s("about more advanced permission granting here")]),s(".")]),n("p",null,[s("Check out the developer pages for extensive reading on the "),n("a",xs,[a(e,{icon:"fa-brands fa-android"}),s("Google Places API for Android")]),s(", "),qs,s(" and mocking location data via the "),n("a",Es,[a(e,{icon:"fa-brands fa-android"}),s("emulator’s extended controls")]),s(".")]),Ts])}const js=m(y,[["render",Rs],["__file","230-introduction-to-google-maps-api-for-android-with-kotlin.html.vue"]]),Us=JSON.parse('{"path":"/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html","title":"Introduction to Google Maps API for Android with Kotlin","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Introduction to Google Maps API for Android with Kotlin","description":"Article(s) > Introduction to Google Maps API for Android with Kotlin","icon":"fa-brands fa-android","category":["Java","Kotlin","Android","Gradle","Article(s)"],"tag":["blog","kodeco.com","java","kotiln","android","gradle"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > Introduction to Google Maps API for Android with Kotlin"},{"property":"og:description","content":"Introduction to Google Maps API for Android with Kotlin"},{"property":"og:url","content":"https://chanhi2000.github.io/crashcourse/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"Introduction to Google Maps API for Android with Kotlin"}],["meta",{"property":"og:description","content":"Article(s) > Introduction to Google Maps API for Android with Kotlin"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://koenig-media.raywenderlich.com/uploads/2018/01/Mapping-kotlin-twitter.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://koenig-media.raywenderlich.com/uploads/2018/01/Mapping-kotlin-twitter.png"}],["meta",{"name":"twitter:image:alt","content":"Introduction to Google Maps API for Android with Kotlin"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"kodeco.com"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"kotiln"}],["meta",{"property":"article:tag","content":"android"}],["meta",{"property":"article:tag","content":"gradle"}],["meta",{"property":"article:published_time","content":"2018-01-17T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Introduction to Google Maps API for Android with Kotlin\\",\\"image\\":[\\"https://koenig-media.raywenderlich.com/uploads/2018/01/welcome.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/new_project.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/target.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/add_activity.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/configure_activity.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2016/09/mapping_start_project_6_run_1.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/api_key.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2016/09/mapping_start_project_8_create_api_2.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2016/09/mapping_start_project_9_create_api_3.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/api_key2.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/first_map.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/enable_google_places.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/imports.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/implement_members.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/implement_members.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/sydney.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/nyc1.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/nyc2.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/allow.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/boston.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2016/11/Screen-Shot-2016-11-24-at-9.09.43-AM.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2016/09/Screen-Shot-2016-09-20-at-10.40.22-AM.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/boston_marker.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/mipmap.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/custom_marker.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/green_marker.png\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/terrain.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/satellite.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/hybrid.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/address.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/location.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/moving.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/harvard.gif =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/location.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/moving.png =240x\\",\\"https://koenig-media.raywenderlich.com/uploads/2018/01/harvard.gif =240x\\"],\\"datePublished\\":\\"2018-01-17T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[]}"]],"prev":"/programming/java-android/articles/README.md","date":"2018-01-17T00:00:00.000Z","isOriginal":false,"cover":"https://koenig-media.raywenderlich.com/uploads/2018/01/Mapping-kotlin-twitter.png"},"headers":[{"level":2,"title":"Getting Started","slug":"getting-started","link":"#getting-started","children":[]},{"level":2,"title":"Using the Google Maps APIs","slug":"using-the-google-maps-apis","link":"#using-the-google-maps-apis","children":[{"level":3,"title":"Creating API Keys","slug":"creating-api-keys","link":"#creating-api-keys","children":[]},{"level":3,"title":"Setting up a Fused Location Client","slug":"setting-up-a-fused-location-client","link":"#setting-up-a-fused-location-client","children":[]}]},{"level":2,"title":"User Permissions","slug":"user-permissions","link":"#user-permissions","children":[]},{"level":2,"title":"Getting Current Location","slug":"getting-current-location","link":"#getting-current-location","children":[{"level":3,"title":"Emulator Testing","slug":"emulator-testing","link":"#emulator-testing","children":[]}]},{"level":2,"title":"Markers","slug":"markers","link":"#markers","children":[]},{"level":2,"title":"Changing the Map Type","slug":"changing-the-map-type","link":"#changing-the-map-type","children":[]},{"level":2,"title":"Implementing Geocoding","slug":"implementing-geocoding","link":"#implementing-geocoding","children":[]},{"level":2,"title":"Receiving Location Updates","slug":"receiving-location-updates","link":"#receiving-location-updates","children":[]},{"level":2,"title":"Place Search","slug":"place-search","link":"#place-search","children":[]},{"level":2,"title":"Where to Go From Here?","slug":"where-to-go-from-here","link":"#where-to-go-from-here","children":[]}],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":18.94,"words":5681},"filePathRelative":"kodeco.com/230-introduction-to-google-maps-api-for-android-with-kotlin.md","localizedDate":"2018년 1월 17일","excerpt":"\\n"}');export{js as comp,Us as data};
