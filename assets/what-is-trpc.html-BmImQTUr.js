import{_ as u}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as d,b as n,t as h,e,n as m,g as k,w as p,d as s,f as t,r as i,o as g}from"./app-BgNevrm5.js";const v={},f={id:"frontmatter-title-관련",tabindex:"-1"},y={class:"header-anchor",href:"#frontmatter-title-관련"},b={class:"table-of-contents"},w=n("hr",null,null,-1),_={href:"https://trpc.io/",target:"_blank",rel:"noopener noreferrer"},R={href:"https://create.t3.gg/",target:"_blank",rel:"noopener noreferrer"},C={href:"https://en.wikipedia.org/wiki/Remote_procedure_call",target:"_blank",rel:"noopener noreferrer"},P={href:"https://en.wikipedia.org/wiki/GRPC",target:"_blank",rel:"noopener noreferrer"},x=t('<p>I found out that tRPC is a type-safe architectural style for designing APIs. But that definition is only the tip of the iceberg.</p><p>In this article, I want to go deeper into the roots of this iceberg and understand what tRPC is all about. This article is an in-depth explanation of tRPC, why we need it, and how to use it.</p><p>Note that I&#39;m a fellow learner writing this article. I&#39;m exploring tRPC for the first time alongside you, based on articles I&#39;ve studied. It&#39;s aimed at beginners and new learners. Let&#39;s dive in together.</p><hr><h2 id="prerequisites" tabindex="-1"><a class="header-anchor" href="#prerequisites"><span>Prerequisites</span></a></h2><ol><li>Intermediate JavaScript Knowledge.</li><li>Basic TypeScript Knowledge.</li><li>Intermediate React Knowledge.</li><li>Experience with the Fetch and REST API.</li><li>Experience with using a terminal or console.</li><li>Experience with using NPM and its commands.</li><li>Experience with using CORS and connecting front-end/back-end.</li><li>Enjoying learning something new.</li></ol>',6),q={href:"https://github.com/whyafan/trpc-demo",target:"_blank",rel:"noopener noreferrer"},I=n("code",null,"whyafan/trpc-demo",-1),S=n("hr",null,null,-1),A=n("h2",{id:"what-is-trpc",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#what-is-trpc"},[n("span",null,"What is tRPC?")])],-1),j={href:"https://trpc.io/",target:"_blank",rel:"noopener noreferrer"},T={href:"https://en.wikipedia.org/wiki/Remote_procedure_call",target:"_blank",rel:"noopener noreferrer"},E={href:"https://ibm.com/topics/rest-apis",target:"_blank",rel:"noopener noreferrer"},L={href:"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API",target:"_blank",rel:"noopener noreferrer"},z={href:"https://ibm.com/topics/rest-apis",target:"_blank",rel:"noopener noreferrer"},U={href:"https://restfulapi.net/http-methods/",target:"_blank",rel:"noopener noreferrer"},W=n("p",null,"Every request to the tRPC back end passes through a query system and gets a response from the tRPC back end based on the input and query.",-1),Y=n("img",{src:"https://freecodecamp.org/news/content/images/2024/07/image-10.png",alt:'Source: <FontIcon icon="fas fa-globe"/>Adeesh Sharma',tabindex:"0",loading:"lazy"},null,-1),D={href:"https://adeesh.hashnode.dev/building-an-express-trpc-and-react-monorepo-setup-with-yarn-workspaces-tailwind-zod-and-react-query",target:"_blank",rel:"noopener noreferrer"},F=t('<p>And instead, built-in functions are available with tRPC and react-query that will process your requests. Every request gets treated the same. It depends on whether the API endpoint accepts an input, throws an output, mutates it, and so on.</p><p>When using REST, you create a main folder named <code>/api</code> and route files inside them. For tRPC, you don&#39;t need any folder with many files. You need a few built-in functions and a simplified react-query system.</p><p>You don&#39;t need to use <code>fetch()</code>, process the output, and so on. tRPC operates using URLs representing a specific query, as you&#39;ll see shortly.</p><h3 id="why-do-we-need-trpc" tabindex="-1"><a class="header-anchor" href="#why-do-we-need-trpc"><span>Why do we need tRPC?</span></a></h3><p>tRPC makes RPC type safe. It means your client cannot send data that the server cannot take. I cannot pass a string for a number-based property.</p><p>If the client tries to do this, you&#39;ll immediately receive an error — <strong>Invalid Type</strong>. The IDE and browsers throw errors if the datatypes mismatch.</p><figure><img src="https://freecodecamp.org/news/content/images/2024/07/type-error.png" alt="tRPC Type safe Error after submitting unexpected datatype value" tabindex="0" loading="lazy"><figcaption>tRPC Type safe Error after submitting unexpected datatype value</figcaption></figure>',7),B={href:"https://typescriptlang.org/",target:"_blank",rel:"noopener noreferrer"},O={href:"https://zod.dev/",target:"_blank",rel:"noopener noreferrer"},Q=t('<p>For example, if an API route requires the user&#39;s details, you would create an object on the back end and assign a datatype to each property using Zod.</p><p>On the front end, tRPC will verify whether the data provided by the user or API request matches the datatypes registered by the back end. tRPC leverages this type safe integration between the front end and back end.</p><p>Let&#39;s see how tRPC, Zod, and other libraries work together in a demonstration project.</p><hr><h2 id="how-to-use-trpc" tabindex="-1"><a class="header-anchor" href="#how-to-use-trpc"><span>How to Use tRPC</span></a></h2><p>You can spin up an Express server in a few seconds and start writing tRPC routes and queries — it&#39;s easy.</p><p>Traditionally, the client-side (front-end) and server-side (back-end) are separated. We will follow that separation for this example.</p><p>Let&#39;s start by creating the client side using React and the server side using Express + CORS to connect them.</p><h3 id="folder-structure" tabindex="-1"><a class="header-anchor" href="#folder-structure"><span>Folder Structure</span></a></h3>',9),N=n("code",null,"tRPC Demo",-1),M=n("code",null,"trpclibrary",-1),H=n("code",null,"trpclibrary",-1),J=n("code",null,"tRPC Demo",-1),Z=n("code",null,"package.json",-1),V=t(`<div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;trpclibrary&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MIT&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;private&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;concurrently \\&quot;wsrun --parallel start\\&quot;&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;workspaces&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">&quot;trpclibrary/*&quot;</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;concurrently&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.2.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;wsrun&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.2.0&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),K=n("code",null,"package.json",-1),G=n("code",null,"trpclibrary",-1),X=n("p",null,[s("Tip: Use the "),n("code",null,"cd <folder_name>"),s(" command to enter into a folder using the terminal and execute commands. In our case, you are in the root directory. So "),n("code",null,"cd .\\trpclibrary"),s(" will help you. You can use the VS Code terminal, too.")],-1),$=n("p",null,[s("You will use the "),n("code",null,"npx create-mf-app"),s(" starter command to initiate your server with a pre-defined template that saves you some time.")],-1),nn=n("figure",null,[n("img",{src:"https://freecodecamp.org/news/content/images/2024/07/sever-side-x2.png",alt:"Server-Side Setup",tabindex:"0",loading:"lazy"}),n("figcaption",null,"Server-Side Setup")],-1),sn=n("p",null,"You may get errors stating that you don't have Express or other libraries installed. Don't worry – you'll install every required library shortly.",-1),en=n("code",null,"trpclibrary",-1),an=n("figure",null,[n("img",{src:"https://freecodecamp.org/news/content/images/2024/07/image-11.png",alt:"Client-Side Setup",tabindex:"0",loading:"lazy"}),n("figcaption",null,"Client-Side Setup")],-1),tn=n("p",null,"That's your React client-side ready. But you might be overwhelmed with all the errors concerning modules and packages. So, let's download them first.",-1),on=n("code",null,"yarn",-1),pn=n("code",null,"trpcDemo",-1),cn=n("p",null,[s("Tip: You can use the "),n("code",null,"cd .."),s(" command to escape the current directory and enter the outer one.")],-1),ln=n("figure",null,[n("img",{src:"https://freecodecamp.org/news/content/images/2024/07/image-13.png",alt:"",tabindex:"0",loading:"lazy"}),n("figcaption")],-1),rn=n("p",null,[s("Your server-side, client-side, or both might not have the TS Configuration file. So I recommend installing it using the "),n("code",null,"npx tsc --init"),s(" command within both directories.")],-1),un=n("figure",null,[n("img",{src:"https://freecodecamp.org/news/content/images/2024/07/image-14.png",alt:"TS Configuration File Initialization",tabindex:"0",loading:"lazy"}),n("figcaption",null,"TS Configuration File Initialization")],-1),dn=n("p",null,"Now, you need to download tRPC, CORS, and Zod to your server side of the project.",-1),hn={href:"https://npmjs.com/package/@trpc/server",target:"_blank",rel:"noopener noreferrer"},mn=n("code",null,"@trpc/server",-1),kn={href:"https://npmjs.com/package/@trpc/client",target:"_blank",rel:"noopener noreferrer"},gn=n("code",null,"@trpc/client",-1),vn=n("img",{src:"https://freecodecamp.org/news/content/images/2024/07/image-16.png",alt:'Installing Zod, CORS, and <FontIcon icon="fa-brands fa-npm"/> to the Server-Side',tabindex:"0",loading:"lazy"},null,-1),fn=n("code",null,"@trpc/server",-1),yn={href:"https://npmjs.com/package/@trpc/client",target:"_blank",rel:"noopener noreferrer"},bn=n("code",null,"@trpc/client",-1),wn={href:"https://npmjs.com/package/@trpc/react-query",target:"_blank",rel:"noopener noreferrer"},_n=n("code",null,"@trpc/react-query",-1),Rn={href:"https://npmjs.com/package/@tanstack/react-query",target:"_blank",rel:"noopener noreferrer"},Cn=n("code",null,"@tanstack/react-query",-1),Pn={href:"https://npmjs.com/package/@trpc/server",target:"_blank",rel:"noopener noreferrer"},xn=n("code",null,"@trpc/server",-1),qn={href:"https://npmjs.com/package/zod",target:"_blank",rel:"noopener noreferrer"},In=n("code",null,"zod",-1),Sn=n("a",{href:"https://classic.yarnpkg.com/lang/en/docs/cli/add/",target:"_blank",rel:"noopener noreferrer"},"yarn add",-1),An=t(`<p>This time, I won&#39;t share the screenshot. Refer to the previous steps and try downloading them.</p><p>We&#39;ve completed most installations and setup. Here&#39;s what your folder structure should look like:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">tRPC Demo</span>
<span class="line">├── trpclibrary</span>
<span class="line">│   ├── client-side (React App Folder)</span>
<span class="line">│   ├── server-side (Express Server Folder)</span>
<span class="line">└── package.json</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="trpc-setup" tabindex="-1"><a class="header-anchor" href="#trpc-setup"><span>tRPC Setup</span></a></h3><p>Here&#39;s what we will do in this section:</p><ol><li>Create a tRPC instance with Context</li><li>Create tRPC routes and set up queries</li><li>Set up a base URL</li><li>Set up CORS</li></ol>`,6),jn=n("code",null,"index.ts",-1),Tn=t(`<p>Using the tRPC instance, create a router. A router helps you register routes where API requests arrive and are processed.</p><p>Routes are where you&#39;ll deal with the request and issue a response. A route is an API endpoint connected to a Base URL.</p><p>For example, <code>http://localhost:3005/api/hello</code> depicts an API endpoint named <code>hello</code> and the Base URL <code>api</code> to call the API endpoint.</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> initTRPC <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@trpc/server&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> trpcExpress <span class="token keyword">from</span> <span class="token string">&quot;@trpc/server/adapters/express&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">createContext</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">:</span> trpcExpress<span class="token punctuation">.</span>CreateExpressContextOptions<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">type</span> <span class="token class-name">Context</span> <span class="token operator">=</span> Awaited<span class="token operator">&lt;</span>ReturnType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> createContext<span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> trpc <span class="token operator">=</span> initTRPC<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">context</span><span class="token generic class-name"><span class="token operator">&lt;</span>Context<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),En=n("code",null,"index.ts",-1),Ln=n("code",null,"initTRPC",-1),zn=n("code",null,"@trpc/server",-1),Un={href:"https://trpc.io/docs/v10/server/context",target:"_blank",rel:"noopener noreferrer"},Wn=t(`<p>tRPC shares the Context between all tRPC procedures. It&#39;s an information and storage place to avoid code duplication and keep the code organized.</p><p>Up until now, you&#39;ve initialized the tRPC instance with Context. Now, you&#39;ll code the router — so place the following code below the previous:</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> zod <span class="token keyword">from</span> <span class="token string">&quot;zod&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> appRouter <span class="token operator">=</span> trpc<span class="token punctuation">.</span><span class="token function">router</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  hello<span class="token operator">:</span> trpc<span class="token punctuation">.</span>procedure</span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">input</span><span class="token punctuation">(</span></span>
<span class="line">      zod<span class="token punctuation">.</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        name<span class="token operator">:</span> zod<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> input <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token punctuation">{</span></span>
<span class="line">        name<span class="token operator">:</span> input<span class="token punctuation">.</span>name<span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">AppRouter</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> appRouter<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Finally, you imported Zod. You also created an API endpoint named <code>hello</code> that takes input using the <code>input()</code> method and matches the API request from the user with the Zod object specified in this endpoint.</p><p>With this code, Zod and tRPC expect the front end to provide an object with a single string-based property named <code>name</code>. tRPC will use this property and respond using the input.</p><p>You took the input, destructured it, and processed it inside the <code>query()</code> method. All these methods are tRPC procedures. tRPC shares the Context among these procedures.</p><p>As I mentioned earlier, you will require the tRPC instance everywhere. I used it to create a router to store routes (API endpoints), register, and process them.</p><p>You can create unlimited routes inside the <code>router()</code> procedure. It is like a route handler. This endpoint is an object with each route acting as a property.</p><p>You&#39;ll require the procedure builder to access procedures like <code>query()</code>, <code>input()</code>, and so on. So we&#39;ve bound it with the tRPC instance and accessed those methods.</p>`,9),Yn=n("code",null,"@trpc/server",-1),Dn=n("code",null,"app.get()",-1),Fn=n("code",null,"index.ts",-1),Bn=t(`<div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token string">&quot;/api&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  trpcExpress<span class="token punctuation">.</span><span class="token function">createExpressMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    router<span class="token operator">:</span> appRouter<span class="token punctuation">,</span></span>
<span class="line">    createContext<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>/api</code> represents your base URL. Every route will be on top of the <code>/api</code> URL. Now, your <code>hello</code> API endpoint has become <a href="http://localhost:3005/api/hello" target="_blank" rel="noopener noreferrer"><code>http://localhost:3005/api/hello</code></a>.</p>`,2),On=n("code",null,"package.json",-1),Qn=t('<p>It was to run both the server and client-side as a library. Set your terminal to the root directory. Then, execute <code>yarn start</code> to run the server and client-side together and head to the <code>http://localhost:3005/api/hello</code> URL.</p><figure><img src="https://freecodecamp.org/news/content/images/2024/07/image-23.png" alt="tRPC Invalid Type Error" tabindex="0" loading="lazy"><figcaption>tRPC Invalid Type Error</figcaption></figure><p>Uh-Oh! Did you receive an error? If the error says &quot;Invalid Type&quot;, you&#39;re on the right path. See, this is where tRPC helps us.</p><p>In the above code, when I sent an API request as a user to the <code>hello</code> API endpoint, I didn&#39;t pass any object or values that tRPC expected for that endpoint.</p><p>tRPC expected an object with a string-based property named <code>name</code> with a value. When I didn&#39;t provide that, tRPC restricted my access. That&#39;s where it shines.</p><p>&quot;That&#39;s all good, but what now?&quot; You must connect the front end with the server side to send the object with the expected data.</p>',6),Nn=n("code",null,"index.ts",-1),Mn=t(`<div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> cors <span class="token keyword">from</span> <span class="token string">&quot;cors&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),Hn=n("code",null,"index.ts",-1),Jn=n("code",null,"@types/cors",-1),Zn=n("img",{src:"https://freecodecamp.org/news/content/images/2024/07/image-24.png",alt:'<FontIcon icon="fa-brands fa-npm"/> download.',tabindex:"0",loading:"lazy"},null,-1),Vn=n("code",null,"@types/cors",-1),Kn=n("p",null,"CORS is ready and secure. Your server side is ready! Now, let's try to connect the server side with the client side using the respective libraries.",-1),Gn=n("p",null,"Before we shift to the client side, I want to make sure that we're on the same page. So far, you've coded an instance of tRPC, formed a Router, set a base URL, and tested the API endpoints with optional Context.",-1),Xn=n("code",null,"index.ts",-1),$n=n("h3",{id:"client-side",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#client-side"},[n("span",null,"Client-Side")])],-1),ns=n("code",null,"trpc.ts",-1),ss=n("code",null,"/src",-1),es=n("code",null,"@trpc/react-query",-1),as=n("p",null,"Also, since you want to link your client-side tRPC instance with the server-side one, you have to import the server-side tRPC instance and its type.",-1),ts=n("code",null,"main",-1),os=n("code",null,"package.json",-1),ps=n("code",null,"index.ts",-1),is=n("img",{src:"https://freecodecamp.org/news/content/images/2024/07/image-25.png",alt:'Server-Side <FontIcon icon="iconfont icon-json"/> file.',tabindex:"0",loading:"lazy"},null,-1),cs=n("code",null,"package.json",-1),ls=n("code",null,"server-side",-1),rs=n("code",null,"package.json",-1),us=n("code",null,"1.0.0",-1),ds=n("p",null,[s("So I'll execute "),n("code",null,"yarn add server-side@1.0.0"),s(" inside the client-side terminal. The installation might look familiar because this is how developers build libraries.")],-1),hs=n("code",null,"package.json",-1),ms=n("img",{src:"https://freecodecamp.org/news/content/images/2024/07/image-26.png",alt:'Client-Side <FontIcon icon="iconfont icon-json"/> file.',tabindex:"0",loading:"lazy"},null,-1),ks=n("code",null,"package.json",-1),gs=n("p",null,"It should contain your server-side package name as a dependency.",-1),vs=n("p",null,"In other words, you installed the server-side package in your client-side application. You can now import the server-side tRPC and use it like a library.",-1),fs=n("p",null,"If you remember earlier, we added an extra export AppRouter line while creating the router on the server side. We did that because we had to import the AppRouter type on the client side to use the server-side tRPC instance on the client side.",-1),ys=n("code",null,"trpc.ts",-1),bs=t(`<div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createTRPCReact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@trpc/react-query&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> AppRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;server-side&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">const</span> trpc <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createTRPCReact</span><span class="token generic class-name"><span class="token operator">&lt;</span>AppRouter<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>With this code, you&#39;ve created a client-side tRPC instance using the characteristics of the server-side tRPC instance.</p>`,2),ws=n("code",null,"AppComponent.tsx",-1),_s=n("code",null,"/src",-1),Rs=n("code",null,"trpc",-1),Cs=n("code",null,"trpc.ts",-1),Ps=n("code",null,"hello",-1),xs=t(`<div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> trpc <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./trpc&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Since you created a client-side tRPC instance, you can access all API endpoints on the client side and call the <code>useQuery()</code> method to send requests to those API endpoints.</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> trpc <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./trpc&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">AppComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> userQuery <span class="token operator">=</span> trpc<span class="token punctuation">.</span>hello<span class="token punctuation">.</span><span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Afan&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mt-10 text-3xl mx-auto max-w-6xl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>userQuery<span class="token punctuation">.</span>data<span class="token operator">?.</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> AppComponent<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you remember, the <code>hello</code> API endpoint requires an object with the string-based <code>name</code> property with a value. So you&#39;ll pass the object using the <code>useQuery()</code> method with the value to avoid tRPC mismatches.</p><p>Inside the JSX code, you&#39;ll destructure the API response sent by the API endpoint using the <code>JSON.stringify()</code> method and access the result by the API endpoint.</p>`,5),qs=n("code",null,"AppComponent.tsx",-1),Is=n("code",null,"App.tsx",-1),Ss=n("code",null,"App.tsx",-1),As=n("code",null,"index.ts",-1),js=n("code",null,"App.tsx",-1),Ts=n("code",null,"trpc.ts",-1),Es=n("code",null,"./trpc.ts",-1),Ls=n("code",null,"httpBatchLink",-1),zs=n("code",null,"@trpc/client",-1),Us=n("code",null,"useState",-1),Ws=n("code",null,"AppComponent",-1),Ys=n("code",null,"AppComponent.tsx",-1),Ds=t(`<div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token comment">// Default Import Statements</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;./index.scss&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Add the following Import Statements</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> trpc <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./trpc&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> httpBatchLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@trpc/client&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> AppComponent <span class="token keyword">from</span> <span class="token string">&quot;./AppComponent&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> QueryClient<span class="token punctuation">,</span> QueryClientProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-query&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You will use each import statement. Ignore any error about imported objects not being used. Then, create a React Query client instance as you did for tRPC.</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Once you&#39;ve done that, you need to set up the Base URL. You&#39;ll do that inside the primary App function.</p><p>Also, shift the following code statements from below the App function to the top of the App function beneath the React Query client declaration statement.</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">const</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rootElement<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Failed to find the root element&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>rootElement <span class="token keyword">as</span> HTMLElement<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then, remove the default JSX HTML code from the App function. You can safely delete all HTML code in the App function.</p><p>Next, you need to set up the Base URL for the client side. Whenever the front-end invokes the API endpoints, it will use this Base URL. It should match the Base URL you set on the server side.</p><p>Replace your App function code from HTML to the following Base URL code:</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>trpcClient<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line">    trpc<span class="token punctuation">.</span><span class="token function">createClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      links<span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token function">httpBatchLink</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">          <span class="token comment">// Base URL</span></span>
<span class="line">          url<span class="token operator">:</span> <span class="token string">&quot;http://localhost:3005/api&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10),Fs=n("code",null,"App.tsx",-1),Bs=t(`<div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;./index.scss&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> trpc <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./trpc&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> httpBatchLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@trpc/client&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> AppComponent <span class="token keyword">from</span> <span class="token string">&quot;./AppComponent&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> QueryClient<span class="token punctuation">,</span> QueryClientProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@tanstack/react-query&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rootElement<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Failed to find the root element&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>rootElement <span class="token keyword">as</span> HTMLElement<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>trpcClient<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line">    trpc<span class="token punctuation">.</span><span class="token function">createClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">      links<span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token function">httpBatchLink</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">          <span class="token comment">// Base URL</span></span>
<span class="line">          url<span class="token operator">:</span> <span class="token string">&quot;http://localhost:3005/api&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>I haven&#39;t talked much about the <code>return</code> statement yet. So, let&#39;s do that now. We won&#39;t keep the <code>return</code> statement empty.</p>`,2),Os=n("code",null,"useQuery()",-1),Qs=n("code",null,"AppComponent.tsx",-1),Ns=t(`<p>The <code>return</code> statement is for the wrappers and the AppComponent component. If you require your components and pages to use tRPC, React Query, and so on, you must wrap your components like <code>AppComponent</code> with <code>Providers</code> of these libraries.</p><div class="language-tsx line-numbers-mode" data-highlighter="prismjs" data-ext="tsx" data-title="tsx"><pre><code><span class="line"><span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token comment">// tRPC Provider</span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trpc.Provider</span> <span class="token attr-name">client</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>trpcClient<span class="token punctuation">}</span></span> <span class="token attr-name">queryClient</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>client<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token punctuation">{</span><span class="token comment">/* React Query Provider */</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">QueryClientProvider</span></span> <span class="token attr-name">client</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>client<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">      </span><span class="token punctuation">{</span><span class="token comment">/* HTML React Component */</span><span class="token punctuation">}</span><span class="token plain-text"></span>
<span class="line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AppComponent</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"></span>
<span class="line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">QueryClientProvider</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text"></span>
<span class="line">  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trpc.Provider</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now, you&#39;ll wrap the <code>AppComponent</code> component with React Query and pass the React Query client instance you created using <code>QueryClient()</code> in this file. Then, you&#39;ll wrap the React Query Provider with the tRPC Provider.</p><p>The tRPC provider requires the React Query Client and the tRPC Client with the Base URL. So we will provide that information, too.</p><p>Once you pass the required information and match your code with mine, you can visit <code>http://localhost:3000</code> and look at the output. It will display the data you passed using the <code>hello</code> API endpoint.</p><p>Note: You should run the <code>yarn start</code> command in your root <code>tRPC Demo</code> directory to turn on the localhost ports to view the output.</p><figure><img src="https://freecodecamp.org/news/content/images/2024/07/image-27.png" alt="Output Image" tabindex="0" loading="lazy"><figcaption>Output Image</figcaption></figure><p>Voilà! We have it all ready. tRPC invokes the <code>hello</code> API endpoint from the front end. It prioritizes Type Safety and uses TypeScript to avoid millions of other JavaScript problems.</p><p>You can add more routes and API endpoints like <code>hello</code> in your Route handler. It&#39;s as easy as adding a new property to an object. That&#39;s how tRPC makes your life easier.</p><hr><h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span>Conclusion</span></a></h2><p>tRPC is a type safe RPC-styled library. It integrates RPC with TypeScript to eliminate REST, <code>fetch()</code>, and other techniques to create and make API calls.</p><p>It acts as an alternative to REST and Fetch. I&#39;ll use it for the foreseeable future.</p><p>I&#39;ve enjoyed learning about this newer technology. There may be some flaws in this article, but I&#39;m a fellow learner, so report my mistakes whenever you can and help me improve.</p>`,14),Ms={href:"https://freecodecamp.org/news/p/96029b5d-38ad-4b3c-a021-661b70eb6dd3/",target:"_blank",rel:"noopener noreferrer"},Hs=n("p",null,[n("em",null,"Hope to see you in the next one ✌️")],-1);function Js(l,Zs){const r=i("VPCard"),o=i("router-link"),c=i("SiteInfo"),a=i("FontIcon");return g(),d("div",null,[n("h1",f,[n("a",y,[n("span",null,h(l.$frontmatter.title)+" 관련",1)])]),e(r,m(k({title:"React.js > Article(s)",desc:"Article(s)",link:"/programming/js-react/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),n("nav",b,[n("ul",null,[n("li",null,[e(o,{to:"#prerequisites"},{default:p(()=>[s("Prerequisites")]),_:1})]),n("li",null,[e(o,{to:"#what-is-trpc"},{default:p(()=>[s("What is tRPC?")]),_:1}),n("ul",null,[n("li",null,[e(o,{to:"#why-do-we-need-trpc"},{default:p(()=>[s("Why do we need tRPC?")]),_:1})])])]),n("li",null,[e(o,{to:"#how-to-use-trpc"},{default:p(()=>[s("How to Use tRPC")]),_:1}),n("ul",null,[n("li",null,[e(o,{to:"#folder-structure"},{default:p(()=>[s("Folder Structure")]),_:1})]),n("li",null,[e(o,{to:"#trpc-setup"},{default:p(()=>[s("tRPC Setup")]),_:1})]),n("li",null,[e(o,{to:"#client-side"},{default:p(()=>[s("Client-Side")]),_:1})])])]),n("li",null,[e(o,{to:"#conclusion"},{default:p(()=>[s("Conclusion")]),_:1})])])]),w,e(c,{name:"What is the tRPC Library? Explained with a Demo Project",desc:"By Afan Khan For a while now, I've been noticing a technology named tRPC that's cited in many modern tech stacks, including T3. But I didn't know what it was or why it had become so popular. So I began researching and learning about it. I didn't know...",url:"https://freecodecamp.org/news/what-is-trpc/",logo:"https://cdn.freecodecamp.org/universal/favicons/favicon.ico",preview:"https://freecodecamp.org/news/content/images/size/w1000/2024/07/trpc-image.png"}),n("p",null,[s("For a while now, I've been noticing a technology named "),n("a",_,[e(a,{icon:"fas fa-globe"}),s("tRPC")]),s(" that's cited in many modern tech stacks, including "),n("a",R,[e(a,{icon:"fas fa-globe"}),s("T3")]),s(". But I didn't know what it was or why it had become so popular.")]),n("p",null,[s("So I began researching and learning about it. I didn't know what it meant or what its purpose was. So, I dug deeper into "),n("a",C,[e(a,{icon:"fa-brands fa-wikipedia-w"}),s("RPC")]),s(", "),n("a",P,[e(a,{icon:"fa-brands fa-wikipedia-w"}),s("gRPC")]),s(", and other technologies to find out.")]),x,n("p",null,[s("You can find the GitHub repository and all other resources for this article "),n("a",q,[s("here ("),e(a,{icon:"iconfont icon-github"}),I,s(")")]),s(".")]),e(c,{name:"whyafan/trpc-demo",desc:"This repository represents the code written in my freeCodeCamp tutorial.",url:"https://github.com/whyafan/trpc-demo",logo:"https://avatars.githubusercontent.com/u/70063819?s=96&v=4",preview:"https://opengraph.githubassets.com/9afa63c454baf0d2b9eccdb754fe217510d53e87d2c3abe19e90f31435104d32/whyafan/trpc-demo"}),S,A,n("p",null,[n("a",j,[e(a,{icon:"fas fa-globe"}),s("tRPC")]),s(" is a type safe TypeScript-based library that leverages the RPC API design to process API requests and deliver a response.")]),n("p",null,[n("a",T,[e(a,{icon:"fa-brands fa-wikipedia-w"}),s("RPC")]),s(" stands for Remote Procedural Call. Our tRPC builds on RPC. RPC is an architectural style to design APIs like "),n("a",E,[e(a,{icon:"iconfont icon-ibm"}),s("REST")]),s(". Using RPC, you get rid of the "),n("a",L,[e(a,{icon:"fa-brands fa-firefox"}),s("Fetch")]),s(" and "),n("a",z,[e(a,{icon:"iconfont icon-ibm"}),s("REST API")]),s(".")]),n("p",null,[s("As the name suggests, tRPC puts a type safe layer on the RPC architectural design. Traditionally, we use the REST API. It has "),n("a",U,[e(a,{icon:"fas fa-globe"}),s("GET, POST, PULL, and other request types")]),s(". In tRPC, there are no request types.")]),W,n("figure",null,[Y,n("figcaption",null,[s("Source: "),n("a",D,[e(a,{icon:"fas fa-globe"}),s("Adeesh Sharma")])])]),F,n("p",null,[s("Type safety is crucial for applications using JavaScript. So tRPC leverages "),n("a",B,[e(a,{icon:"iconfont icon-typescript"}),s("TypeScript")]),s(". This makes it easier to create routes and perform operations on the back end.")]),n("p",null,[s("tRPC requires a library named "),n("a",O,[e(a,{icon:"fas fa-globe"}),s("Zod")]),s(". It helps tRPC to build the data schema of each route. A schema is an object with properties and an equivalent datatype linked to each property.")]),Q,n("p",null,[s("First, create a directory named "),N,s(". Inside this directory, create another directory named "),e(a,{icon:"fas fa-folder-open"}),M,s(" to separate the client and server sides and execute them together as a library later.")]),n("p",null,[s("Inside the "),e(a,{icon:"fas fa-folder-open"}),H,s(" directory, you'll place your server (Express) and client (React) soon.")]),n("p",null,[s("Inside the "),J,s(" root directory, insert a "),e(a,{icon:"iconfont icon-json"}),Z,s(" file with the following code to interconnect all the folders and run the client and server-side with a single command.")]),V,n("p",null,[s("After setting up the "),e(a,{icon:"iconfont icon-JSON"}),K,s(" in the root directory, you'll start by setting up your Express server inside the "),e(a,{icon:"fas fa-folder-open"}),G,s(" directory.")]),X,$,nn,sn,n("p",null,[s("After creating the server, let's make the client using React and the same command in the same "),e(a,{icon:"fas fa-folder-open"}),en,s(" directory.")]),an,tn,n("p",null,[s("I'm using yarn, and I recommend you do the same. Use the "),on,s(" command in the root "),e(a,{icon:"fas fa-folder-open"}),pn,s(" directory.")]),cn,ln,rn,un,dn,n("p",null,[s("As of 2nd July 2024, the "),n("a",hn,[e(a,{icon:"fa-brands fa-npm"}),mn]),s("_ package is at the latest version 10.45.2. Remember, even the "),n("a",kn,[s("client-side tRPC package ("),e(a,{icon:"fa-brands fa-npm"}),gn,s(")")]),s(" should be 10.45.2.")]),n("figure",null,[vn,n("figcaption",null,[s("Installing Zod, CORS, and "),e(a,{icon:"fa-brands fa-npm"}),fn,s(" to the Server-Side")])]),n("p",null,[s("Then, you need to install "),n("a",yn,[e(a,{icon:"fa-brands fa-npm"}),bn]),s(", "),n("a",wn,[e(a,{icon:"fa-brands fa-npm"}),_n]),s(", "),n("a",Rn,[e(a,{icon:"fa-brands fa-npm"}),Cn]),s(", "),n("a",Pn,[e(a,{icon:"fa-brands fa-npm"}),xn]),s(", and "),n("a",qn,[e(a,{icon:"fa-brands fa-npm"}),In]),s(` for the client side. You'll use the same "`),Sn,s(' " command.')]),An,n("p",null,[s("Let's begin by creating a tRPC instance in the "),e(a,{icon:"iconfont icon-typescript"}),jn,s(" file of the server-side directory. As per the documentation, you should only initiate one instance per application.")]),Tn,n("p",null,[s("You must place this code above the existing boilerplate code in the "),e(a,{icon:"iconfont icon-typescript"}),En,s(" file and below the import statements. It should be above the app and port variable declarations and below the express import statement.")]),n("p",null,[s("Voilà! I created a tRPC instance using the "),Ln,s(" Builder from the "),e(a,{icon:"fa-brands fa-npm"}),zn,s(" package. We'll use this instance for everything related to the back end.")]),n("p",null,[s("Additionally, I've added a "),n("a",Un,[e(a,{icon:"fas fa-globe"}),s("Context")]),s(" to the tRPC Router. It's a feature by tRPC. It allows you to put details like database connections and authentication information.")]),Wn,n("p",null,[s("Now, it's time to set the base URL. You will use the Express adapter from the "),e(a,{icon:"fa-brands fa-npm"}),Yn,s(" library to set the base URL.")]),n("p",null,[s("Place the following code above the "),Dn,s(" routes inside the "),e(a,{icon:"iconfont icon-typescript"}),Fn,s(" file:")]),Bn,n("p",null,[s("Let's try to test this using your browser. Do you remember that I asked you to create a "),e(a,{icon:"iconfont icon-json"}),On,s(" file with a pre-written code in the root tRPC Demo directory?")]),Qn,n("p",null,[s("There's one more thing left for the server side. CORS! It's simple to set it up. Find the Express Initialisation code in the "),e(a,{icon:"iconfont icon-typescript"}),Nn,s(" file. It came with the Express template. Then, insert the following line:")]),Mn,n("p",null,[s("Here's a hint: Search the port and app variable declaration in your "),e(a,{icon:"iconfont icon-typescript"}),Hn,s(" file.")]),n("p",null,[s("Once you insert the line, it might give you an error because you haven't installed the types of CORS yet. Go to your terminal and install "),e(a,{icon:"fa-brands fa-npm"}),Jn,s(" inside the server-side directory.")]),n("figure",null,[Zn,n("figcaption",null,[e(a,{icon:"fa-brands fa-npm"}),Vn,s(" download.")])]),Kn,Gn,n("p",null,[s("You coded all this inside the server-side "),e(a,{icon:"iconfont icon-typescript"}),Xn,s(" file. Let's move to the client side and conquer the last part of this tutorial.")]),$n,n("p",null,[s("We've already downloaded the required packages. We'll start by creating a "),e(a,{icon:"iconfont icon-typescript"}),ns,s(" file in the "),ss,s(" directory of the client-side directory. It will handle the queries and requests issued by the front end.")]),n("p",null,[s("You created a tRPC instance to build the router and other components on the server side, right? Well, now you have to do the same on the client side. You need to create a client-side tRPC instance using "),e(a,{icon:"fa-brands fa-npm"}),es,s(".")]),as,n("p",null,[s("To import the server-side tRPC instance, insert a "),ts,s(" property inside the "),e(a,{icon:"iconfont icon-json"}),os,s(" file on the server side. It sets the "),e(a,{icon:"iconfont icon-typescript"}),ps,s(" as the entry file when you import the server-side folder on your client side.")]),n("figure",null,[is,n("figcaption",null,[s("Server-Side "),e(a,{icon:"iconfont icon-json"}),cs,s(" file.")])]),n("p",null,[s("After setting that property, you can import the tRPC instance into the client side using the terminal. For me, the back end is called "),ls,s(" in my "),e(a,{icon:"iconfont icon-json"}),rs,s(" file inside the server-side directory with version "),us,s(".")]),ds,n("p",null,[s("This command should add your server-side folder as a package in the client-side node modules directory. You can verify that with the "),e(a,{icon:"iconfont icon-json"}),hs,s(" file on the client side.")]),n("figure",null,[ms,n("figcaption",null,[s("Client-Side "),e(a,{icon:"iconfont icon-json"}),ks,s(" file.")])]),gs,vs,fs,n("p",null,[s("Here's how the "),e(a,{icon:"iconfont icon-typescript"}),ys,s(" file should look like now:")]),bs,n("p",null,[s("Perfect. Now, let's create another file named "),e(a,{icon:"fa-brands fa-react"}),ws,s(" in the "),e(a,{icon:"fas fa-folder-open"}),_s,s(" directory.")]),n("p",null,[s("This file will hold your main App component. It will import the "),Rs,s(" client instance from the "),e(a,{icon:"iconfont icon-typescript"}),Cs,s(" file and use it to call your "),Ps,s(" API endpoint.")]),xs,n("p",null,[s("Your "),e(a,{icon:"fa-brands fa-reaft"}),qs,s(" file is a standard React component. So you need to import this component into the main "),e(a,{icon:"fa-brands fa-react"}),Is,s(" file. "),e(a,{icon:"fa-brands fa-react"}),Ss,s(" on the client side is equivalent to "),e(a,{icon:"iconfont icon-typescript"}),As,s(" on the server side.")]),n("p",null,[s("For the "),js,s(" file, you will follow a similar setup. Import the client tRPC instance from the "),e(a,{icon:"iconfont icon-typescript"}),Ts,s(" file. Then, set the base URL and set up React Query.")]),n("p",null,[s("You'll import React Query from TanStack, trpc from the "),e(a,{icon:"iconfont icon-typescript"}),Es,s(" file, "),Ls,s(" from "),e(a,{icon:"fa-brands fa-npm"}),zs,s(", "),Us,s(" from React, and your "),Ws,s(" from the "),e(a,{icon:"fa-brands fa-react"}),Ys,s(" file.")]),Ds,n("p",null,[s("Your "),e(a,{icon:"fa-brands fa-react"}),Fs,s(" file should look like this:")]),Bs,n("p",null,[s("It will display the data returned by the API endpoint, which should be the string you submitted using the "),Os,s(" method in the "),e(a,{icon:"fa-brands fa-react"}),Qs,s(" component file.")]),Ns,n("p",null,[s("Subscribe to "),n("a",Ms,[e(a,{icon:"fa-brands fa-free-code-camp"}),s("my newsletter")]),s(" for the weekly emails about Software Engineering, Tech Jobs and Careers, and resources, including paid articles for free, to help you excel in your career.")]),Hs])}const Gs=u(v,[["render",Js],["__file","what-is-trpc.html.vue"]]),Xs=JSON.parse('{"path":"/freecodecamp.org/what-is-trpc.html","title":"What is the tRPC Library? Explained with a Demo Project","lang":"en-US","frontmatter":{"lang":"en-US","title":"What is the tRPC Library? Explained with a Demo Project","description":"Article(s) > What is the tRPC Library? Explained with a Demo Project","icon":"fa-brands fa-react","category":["Node.js","React.js","Article(s)"],"tag":["blog","freecodecamp.org","node","nodejs","node-js","react","reactjs","react-js"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > What is the tRPC Library? Explained with a Demo Project"},{"property":"og:description","content":"What is the tRPC Library? Explained with a Demo Project"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/freecodecamp.org/what-is-trpc.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/freecodecamp.org/what-is-trpc.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"What is the tRPC Library? Explained with a Demo Project"}],["meta",{"property":"og:description","content":"Article(s) > What is the tRPC Library? Explained with a Demo Project"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://freecodecamp.org/news/content/images/size/w1000/2024/07/trpc-image.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://freecodecamp.org/news/content/images/size/w1000/2024/07/trpc-image.png"}],["meta",{"name":"twitter:image:alt","content":"What is the tRPC Library? Explained with a Demo Project"}],["meta",{"property":"article:author","content":"Afan Khan"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"freecodecamp.org"}],["meta",{"property":"article:tag","content":"node"}],["meta",{"property":"article:tag","content":"nodejs"}],["meta",{"property":"article:tag","content":"node-js"}],["meta",{"property":"article:tag","content":"react"}],["meta",{"property":"article:tag","content":"reactjs"}],["meta",{"property":"article:tag","content":"react-js"}],["meta",{"property":"article:published_time","content":"2024-07-12T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"What is the tRPC Library? Explained with a Demo Project\\",\\"image\\":[\\"https://adeesh.hashnode.dev/building-an-express-trpc-and-react-monorepo-setup-with-yarn-workspaces-tailwind-zod-and-react-query\\",\\"https://freecodecamp.org/news/content/images/2024/07/type-error.png\\",\\"https://freecodecamp.org/news/content/images/2024/07/sever-side-x2.png\\",\\"https://freecodecamp.org/news/content/images/2024/07/image-11.png\\",\\"https://freecodecamp.org/news/content/images/2024/07/image-13.png\\",\\"https://freecodecamp.org/news/content/images/2024/07/image-14.png\\",\\"https://freecodecamp.org/news/content/images/2024/07/image-16.png\\",\\"https://freecodecamp.org/news/content/images/2024/07/image-23.png\\",\\"https://freecodecamp.org/news/content/images/2024/07/image-24.png\\",\\"https://freecodecamp.org/news/content/images/2024/07/image-25.png\\",\\"https://freecodecamp.org/news/content/images/2024/07/image-26.png\\",\\"https://freecodecamp.org/news/content/images/2024/07/image-27.png\\"],\\"datePublished\\":\\"2024-07-12T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Afan Khan\\"}]}"]],"prev":"/programming/js-react/articles/README.md","date":"2024-07-12T00:00:00.000Z","isOriginal":false,"author":"Afan Khan","cover":"https://freecodecamp.org/news/content/images/size/w1000/2024/07/trpc-image.png"},"headers":[{"level":2,"title":"Prerequisites","slug":"prerequisites","link":"#prerequisites","children":[]},{"level":2,"title":"What is tRPC?","slug":"what-is-trpc","link":"#what-is-trpc","children":[{"level":3,"title":"Why do we need tRPC?","slug":"why-do-we-need-trpc","link":"#why-do-we-need-trpc","children":[]}]},{"level":2,"title":"How to Use tRPC","slug":"how-to-use-trpc","link":"#how-to-use-trpc","children":[{"level":3,"title":"Folder Structure","slug":"folder-structure","link":"#folder-structure","children":[]},{"level":3,"title":"tRPC Setup","slug":"trpc-setup","link":"#trpc-setup","children":[]},{"level":3,"title":"Client-Side","slug":"client-side","link":"#client-side","children":[]}]},{"level":2,"title":"Conclusion","slug":"conclusion","link":"#conclusion","children":[]}],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":3}]},"readingTime":{"minutes":14.33,"words":4300},"filePathRelative":"freecodecamp.org/what-is-trpc.md","localizedDate":"July 12, 2024","excerpt":"\\n","copyright":{"author":"Afan Khan"}}');export{Gs as comp,Xs as data};
