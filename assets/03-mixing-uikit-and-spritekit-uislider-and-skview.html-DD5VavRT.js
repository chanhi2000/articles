import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as u,b as e,t as h,e as a,n as l,g as c,d as n,f as s,r as i,o as m}from"./app-BgNevrm5.js";const g={},k={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},w={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},v=e("nav",{class:"table-of-contents"},[e("ul")],-1),b=e("hr",null,null,-1),f=e("code",null,"GameViewController.swift",-1),y=e("code",null,"UIViewController",-1),S=e("code",null,"GameScene",-1),_=e("code",null,"Main.storyboard",-1),x=e("kbd",null,"Alt",-1),I=e("kbd",null,"Cmd",-1),K=e("kbd",null,"3",-1),U=e("code",null,"SKView",-1),A=s(`<p>This UIKit setup existed all along, but so far we&#39;ve been ignoring it. No more: we&#39;re going to add some controls to that view so that players can fire bananas. The way the game works, each player gets to enter an angle and a velocity for their throw. We&#39;ll be recreating this with a <code>UISlider</code> for both of these numbers, along with a <code>UILabel</code> so players can see exactly what numbers they chose. We&#39;ll also add a &quot;Launch&quot; button that makes the magic happen.</p><p>Now, think about this for a moment: our game view controller needs to house and manage the user interface, and the game scene needs to manage everything inside the game. But they also need to talk to each other: the view controller needs to tell the game scene to fire a banana when the launch button is clicked, and the game scene needs to tell the view controller when a player&#39;s turn has finished so that another banana can be launched again.</p><p>This two-way communication could be done using <code>NotificationCenter</code>, but it&#39;s not very pleasant: we know the sender and receiver, and we know exactly what kind of data they will send and receive, so the easiest solution here is to give the view controller a property that holds the game scene, and give the game scene a property that holds the view controller.</p><p>Hopefully that should be setting off some alarm bells in your head, because if two objects own each other then we have a strong reference cycle â€“ neither object can be destroyed. The solution is to make one of them have a weak reference to the other: either the game controller owns the game scene strongly, or the game scene owns the game controller strongly, but not both. As it so happens, the game controller already strongly owns the game scene, albeit indirectly: it owns the <code>SKView</code> inside itself, and the view owns the game scene. So, it&#39;s owned, we just don&#39;t have a reference to it.</p><p>So, our solution is straightforward: add a strong reference to the game scene inside the view controller, and add a weak reference to the view controller from the game scene. Add this property to the game scene:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">weak</span> <span class="token keyword">var</span> viewController<span class="token punctuation">:</span> <span class="token class-name">GameViewController</span><span class="token operator">!</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now add this property to the game view controller:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> currentGame<span class="token punctuation">:</span> <span class="token class-name">GameScene</span><span class="token operator">!</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Like I said, the game controller already owns the game scene, but it&#39;s a pain to get to. Adding that property means we have direct access to the game scene whenever we need it. To set the property, put this into the <code>viewDidLoad()</code> method of the game view controller, just after the call to <code>presentScene()</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line">currentGame <span class="token operator">=</span> scene <span class="token keyword">as</span><span class="token operator">?</span> <span class="token class-name">GameScene</span></span>
<span class="line">currentGame<span class="token punctuation">.</span>viewController <span class="token operator">=</span> <span class="token keyword">self</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>The first line sets the property to the initial game scene so that we can start using it. The second line makes sure that the reverse is true so that the scene knows about the view controller too.</p>`,11),V=e("code",null,"Main.storyboard",-1),L=s("<p>Drop two sliders into your layout, both 300 points wide. The first should be at X:20, the second should be at X:480, and both should be at Y:20. Now place two labels in there, both 120 points wide. The first should be at X:325, the second should be at X:785, and both should be at Y:24 â€“ this is slightly lower than the sliders so that everything is centered neatly.</p><p>For the launch button, place a button at X:910 Y:13, with width 100 and height 44; for the &quot;which player is it?&quot; label, place a label at X:370 Y:64 with width 285 and height 35.</p><p>That&#39;s the basic layout, but to make it all perfect we need a few tweaks. Using the attributes inspector, change the left-hand slider so that it has a maximum value of 90 and a current value of 45, then change the right-hand slider so that it has a maximum value of 250 and a current value of 125.</p><p>Make sure all three of your labels have their text color set to white, then give the bottom one the text â€œ&lt;&lt;&lt; PLAYER ONE&quot; and center alignment. Select the button then give it a system bold font of size 22, a title of &quot;LAUNCH&quot; and a red text color.</p><p>That&#39;s the layout all done, but we also need lots of outlets: using the assistant editor, create these outlets:</p><ul><li>For the left slider: <code>angleSlider</code></li><li>For the left label: <code>angleLabel</code></li><li>For the right slider: <code>velocitySlider</code></li><li>For the right label: <code>velocityLabel</code></li><li>For the launch button: <code>launchButton</code></li><li>For the player number: <code>playerNumber</code></li></ul><p>You&#39;ll also need to create actions from the left slider, the right slider and the button: <code>angleChanged()</code>, <code>velocityChanged()</code> and <code>launch()</code> respectively.</p>",7),T=e("code",null,"GameViewController.swift",-1),C=s(`<p>We need to fill in three methods (<code>angleChanged()</code>, <code>velocityChanged()</code> and <code>launch()</code>), write one new method, then make two small changes to <code>viewDidLoad()</code>.</p><p>The action methods for our two sliders are both simple: they update the correct label with the slider&#39;s current value. A <code>UISlider</code> always stores its values as a <code>Float</code>, but we only care about the integer value of that float so we&#39;re going to convert the values to <code>Int</code>s then use string interpolation to update the labels. Here&#39;s the code for both these methods:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@IBAction</span> <span class="token keyword">func</span> <span class="token function-definition function">angleChanged</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> sender<span class="token punctuation">:</span> <span class="token keyword">Any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    angleLabel<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;Angle: </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation"><span class="token class-name">Int</span><span class="token punctuation">(</span>angleSlider<span class="token punctuation">.</span>value<span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">Â°&quot;</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token attribute atrule">@IBAction</span> <span class="token keyword">func</span> <span class="token function-definition function">velocityChanged</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> sender<span class="token punctuation">:</span> <span class="token keyword">Any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    velocityLabel<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;Velocity: </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation"><span class="token class-name">Int</span><span class="token punctuation">(</span>velocitySlider<span class="token punctuation">.</span>value<span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The only hard thing there is typing the Â° symbol that represents degrees â€“ to do that, press Shift+Option+8. With those methods written, we need to call both of them inside <code>viewDidLoad()</code> in order to have them load up with their default values. Add this to <code>viewDidLoad()</code> just after the call to <code>super</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token function">angleChanged</span><span class="token punctuation">(</span>angleSlider<span class="token punctuation">)</span></span>
<span class="line"><span class="token function">velocityChanged</span><span class="token punctuation">(</span>velocitySlider<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>You could easily have typed default values into Interface Builder, and sometimes it&#39;s helpful to do so in order to measure your layout correctly, but setting it in code means you have only one place that can set those values so it&#39;s easier to change later if needed.</p><p>When a player taps the launch button, we need to hide the user interface so they can&#39;t try to fire again until we&#39;re ready, then tell the game scene to launch a banana using the current angle and velocity. Our game will then proceed with physics calculations until the banana is destroyed or lost (i.e., off screen), at which point the game will tell the game controller to change players and continue.</p><p>The code for the <code>launch()</code> method is trivial, largely because the work of actually launching the banana is hidden behind a call to a <code>launch()</code> method that we&#39;ll add to the game scene shortly:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@IBAction</span> <span class="token keyword">func</span> <span class="token function-definition function">launch</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> sender<span class="token punctuation">:</span> <span class="token keyword">Any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    angleSlider<span class="token punctuation">.</span>isHidden <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">    angleLabel<span class="token punctuation">.</span>isHidden <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">    velocitySlider<span class="token punctuation">.</span>isHidden <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">    velocityLabel<span class="token punctuation">.</span>isHidden <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">    launchButton<span class="token punctuation">.</span>isHidden <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span>
<span class="line">    currentGame<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span>angle<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">(</span>angleSlider<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">,</span> velocity<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">(</span>velocitySlider<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Finally, we&#39;re going to create a <code>activatePlayer()</code> method that will be called from the game scene when control should pass to the other player. This will just update the player label to say who is in control, then show all our controls again:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">activatePlayer</span><span class="token punctuation">(</span>number<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> number <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">{</span></span>
<span class="line">        playerNumber<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;&lt;&lt;&lt; PLAYER ONE&quot;</span></span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        playerNumber<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;PLAYER TWO &gt;&gt;&gt;&quot;</span></span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    angleSlider<span class="token punctuation">.</span>isHidden <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">    angleLabel<span class="token punctuation">.</span>isHidden <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line">    velocitySlider<span class="token punctuation">.</span>isHidden <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">    velocityLabel<span class="token punctuation">.</span>isHidden <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line">    launchButton<span class="token punctuation">.</span>isHidden <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11),j=e("code",null,"launch()",-1),B=e("code",null,"GameScene.swift",-1),N=s(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">launch</span><span class="token punctuation">(</span>angle<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> velocity<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://hackingwithswift.com/img/books/hws/29-2@2x.png" alt="Being able to mix UIKit and SpriteKit means game menus and other controls are a cinch." tabindex="0" loading="lazy"><figcaption>Being able to mix UIKit and SpriteKit means game menus and other controls are a cinch.</figcaption></figure>`,2);function M(p,q){const o=i("VPCard"),r=i("VidStack"),t=i("FontIcon");return m(),u("div",null,[e("h1",k,[e("a",w,[e("span",null,h(p.$frontmatter.title)+" ê´€ë ¨",1)])]),a(o,l(c({title:"Hacking with iOS â€“ learn to code iPhone and iPad apps with free Swift tutorials",desc:"Learn Swift coding for iOS with these free tutorials â€“ learn Swift, iOS, and Xcode",link:"/hackingwithswift.com/read/README.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),v,b,a(o,l(c({title:"Mixing UIKit and SpriteKit: UISlider and SKView | Hacking with iOS",desc:"Mixing UIKit and SpriteKit: UISlider and SKView",link:"https://hackingwithswift.com/read/29/3/mixing-uikit-and-spritekit-uislider-and-skview",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),a(r,{src:"youtube/J7d0XPBYwKw"}),e("p",null,[n("We've been mixing UIKit and SpriteKit ever since our first SpriteKit project, way back in project 11. Don't believe me? Look inside "),f,n(" and you'll see a plain old "),y,n(" do all the work of loading and showing our "),S,n(" code. There's a "),a(t,{icon:"iconfont icon-xcode"}),_,n(" file containing that view controller, and if you go to the identity inspector ("),x,n("+"),I,n("+"),K,n(") you'll see it has "),U,n(" set for its custom class â€“ that's the view holding our scene.")]),A,e("p",null,[n("Now to design the user interface: this needs two sliders, each with two labels, plus a launch button and one more label that will show whose turn it is. When you open "),a(t,{icon:"iconfont icon-xcode"}),V,n(" you'll probably see that it's shaped like an iPhone, which isnâ€™t helpful when designing this user interface. Instead, Iâ€™d like you to click the View As button at the bottom of Interface Builder, and select a 9.7-inch iPad in landscape orientation so that we have more space for drawing.")]),L,e("p",null,[n("That's all the layout done, so we're finished with Interface Builder and you can open up "),a(t,{icon:"fa-brands fa-swift"}),T,n(".")]),C,e("p",null,[n("To make your code compile, you need to add a "),j,n(" method to "),a(t,{icon:"fa-brands fa-swift"}),B,n(". It doesn't need to be the real thing, but it does need to accept parameters for angle and velocity. Give it this code for now:")]),N])}const G=d(g,[["render",M],["__file","03-mixing-uikit-and-spritekit-uislider-and-skview.html.vue"]]),O=JSON.parse('{"path":"/hackingwithswift.com/read/29/03-mixing-uikit-and-spritekit-uislider-and-skview.html","title":"Mixing UIKit and SpriteKit: UISlider and SKView","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Mixing UIKit and SpriteKit: UISlider and SKView","description":"Article(s) > Mixing UIKit and SpriteKit: UISlider and SKView","category":["Swift","iOS","Article(s)"],"tag":["blog","hackingwithswift.com","crashcourse","swift","xcode","appstore","ios"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > Mixing UIKit and SpriteKit: UISlider and SKView"},{"property":"og:description","content":"Mixing UIKit and SpriteKit: UISlider and SKView"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/29/03-mixing-uikit-and-spritekit-uislider-and-skview.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/29/03-mixing-uikit-and-spritekit-uislider-and-skview.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Mixing UIKit and SpriteKit: UISlider and SKView"}],["meta",{"property":"og:description","content":"Article(s) > Mixing UIKit and SpriteKit: UISlider and SKView"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://hackingwithswift.com/img/books/hws/29-2@2x.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"hackingwithswift.com"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:tag","content":"ios"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Mixing UIKit and SpriteKit: UISlider and SKView\\",\\"image\\":[\\"https://hackingwithswift.com/img/books/hws/29-2@2x.png\\"],\\"dateModified\\":null,\\"author\\":[]}"]],"isOriginal":false},"headers":[],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":5.56,"words":1667},"filePathRelative":"hackingwithswift.com/read/29/03-mixing-uikit-and-spritekit-uislider-and-skview.md","excerpt":"\\n"}');export{G as comp,O as data};
