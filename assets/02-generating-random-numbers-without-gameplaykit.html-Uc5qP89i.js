import{_ as m}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as h,b as n,t as k,e,n as i,g as r,w as p,d as a,f as c,r as s,o as g}from"./app-BgNevrm5.js";const f={},w={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},b={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},y={class:"table-of-contents"},v=n("hr",null,null,-1),_=c(`<p>Swift comes with built-in support for random number generation across a variety of types: <code>Int.random(in:)</code>, <code>Float.random(in:)</code>, <code>Double.random(in:)</code>, <code>CGFloat.random(in:)</code>, and even <code>Bool.random()</code> for flipping randomly between true or false.</p><p>These are all designed to be highly random â€“ i.e., itâ€™s hard to predict what future values will be generated â€“ but they arenâ€™t cryptographically secure. That means they are fine for everything except working with secure data such as password hashing.</p><p>All the random methods that take an <code>in</code> parameter accept a range to work with. For example:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> int1 <span class="token operator">=</span> <span class="token class-name">Int</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">...</span><span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">let</span> int2 <span class="token operator">=</span> <span class="token class-name">Int</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">..&lt;</span><span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">let</span> double1 <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token operator">...</span><span class="token number">10000</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">let</span> float1 <span class="token operator">=</span> <span class="token class-name">Float</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">100</span><span class="token operator">...</span><span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Swiftâ€™s random number generators are automatically seeded, which means they are given an initial value to make them unique each time they are run.</p><p>As for <code>Bool.random()</code>, it literally just returns true or false randomly â€“ itâ€™s effectively simulating a coin flip, but it does come in useful from time to time.</p><p>There are other ways to generate random numbers with Swift, and itâ€™s quite common to see them around because the methods discussed above were introduced only in Swift 4.2 â€“ four years after Swift was launched. So, many codebases use older methods that arenâ€™t as good or as nice as the newer alternatives, but if youâ€™re curious Iâ€™ll cover them below.</p><div class="hint-container note"><p class="hint-container-title">Note</p><p>The below really is just here for historical purposes â€“ youâ€™re likely to find them in the wild a <em>lot</em> because thereâ€™s so much Swift out there, but if youâ€™re just interested in learning modern Swift you can skip this part.</p></div><hr><h2 id="old-fashioned-randomness" tabindex="-1"><a class="header-anchor" href="#old-fashioned-randomness"><span>Old-fashioned randomness</span></a></h2><p>The classic way to generate random numbers is called <code>arc4random()</code>, which is able to generate large, seemingly random numbers with a single function call:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>arc4random()</code> function generates numbers between 0 and 4,294,967,295, giving a range of 2 to the power of 32 - 1, i.e., a lot. But if you wanted to generate a random number within a specific range thereâ€™s a better alternative. Let&#39;s look at them both, because you&#39;ll encounter them both in real code.</p><p>First, the widely used but problematic way of generating random numbers in a range:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">arc4random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">6</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,15),G=n("code",null,"arc4random()",-1),x={href:"https://zuttobenkyou.wordpress.com/2012/10/18/generating-random-numbers-without-modulo-bias/",target:"_blank",rel:"noopener noreferrer"},S={href:"https://en.wikipedia.org/wiki/Pigeonhole_principle",target:"_blank",rel:"noopener noreferrer"},I=c(`<p>So, hereâ€™s a smarter way of generating random numbers in a range:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token function">arc4random_uniform</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Yes, the ARC4 family of functions comes with a built-in way of generating random numbers in a range. No, it&#39;s not new. No, I don&#39;t know why it&#39;s not used by everyone â€“ the world&#39;s a funny place, huh?</p><p>Anyway, using <code>arc4random_uniform()</code> we can generate a range of numbers that don&#39;t have a modulo bias, don&#39;t require seeding, and are suitably random for all but cryptographic purposes.</p><p>But it&#39;s not perfect, because its range is 0 up to the maximum you specify â€“ what if you want a number between 10 and 20, or 100 and 500? Then you need to write something thoroughly ugly indeed:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">RandomInt</span><span class="token punctuation">(</span>min<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> max<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> max <span class="token operator">&lt;</span> min <span class="token punctuation">{</span> <span class="token keyword">return</span> min <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token class-name">Int</span><span class="token punctuation">(</span><span class="token function">arc4random_uniform</span><span class="token punctuation">(</span><span class="token class-name">UInt32</span><span class="token punctuation">(</span><span class="token punctuation">(</span>max <span class="token operator">-</span> min<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> min</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That figures out the difference between the high and low ends of your range, uses that to calculate a random number, then re-adds the low end to get the full range. Because <code>arc4random_uniform()</code> works only with non-negative integers (<code>UInt32</code>) it has to do some typecasting to make the process seamless, and all those extra parentheses probably give you a headache.</p><p>Does it work? Yes, absolutely. Could you remember it if you closed this window now? No chance â€“ Swiftâ€™s newer <code>Int.random(in:)</code> is significantly better.</p><p>Anyway, now youâ€™ve seen the modern way of generating numbers and the older way, so letâ€™s move on to looking at GameplayKit. Before I continue, it&#39;s worth making it doubly clear that GameplayKit is available only on Appleâ€™s platforms, so if youâ€™re using open source Swift on Linux then youâ€™ll need to stick with the other options shown above.</p>`,9);function K(l,A){const t=s("VPCard"),u=s("router-link"),d=s("RouteLink"),o=s("FontIcon");return g(),h("div",null,[n("h1",w,[n("a",b,[n("span",null,k(l.$frontmatter.title)+" ê´€ë ¨",1)])]),e(t,i(r({title:"Hacking with iOS â€“ learn to code iPhone and iPad apps with free Swift tutorials",desc:"Learn Swift coding for iOS with these free tutorials â€“ learn Swift, iOS, and Xcode",link:"/hackingwithswift.com/read/README.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),n("nav",y,[n("ul",null,[n("li",null,[e(u,{to:"#old-fashioned-randomness"},{default:p(()=>[a("Old-fashioned randomness")]),_:1})])])]),v,e(t,i(r({title:"Generating random numbers without GameplayKit | Hacking with iOS",desc:"Generating random numbers without GameplayKit",link:"https://hackingwithswift.com/read/35/2/generating-random-numbers-without-gameplaykit",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),_,n("p",null,[a("That uses modulus to ensure that the result from "),G,a(" falls within a specific range. "),e(d,{to:"/hackingwithswift.com/read/08/overview.html"},{default:p(()=>[a("We already covered modulus in project 8")]),_:1}),a(" so skip back there if you need a refresher. Note that we need to specify 6 because the values range from 0 to 5 inclusive.")]),n("p",null,[a("This method is very common, but also problematic because it produces something called "),n("a",x,[e(o,{icon:"fas fa-globe"}),a("modulo bias")]),a(", which is a small but not insignificant problem that causes some numbers to be generated more frequently than others. You might know it as "),n("a",S,[e(o,{icon:"fa-brands fa-wikipedia-w"}),a("the Pigeonhole Principle")]),a(" if you prefer slightly catchier names!")]),I])}const R=m(f,[["render",K],["__file","02-generating-random-numbers-without-gameplaykit.html.vue"]]),j=JSON.parse('{"path":"/hackingwithswift.com/read/35/02-generating-random-numbers-without-gameplaykit.html","title":"Generating random numbers without GameplayKit","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Generating random numbers without GameplayKit","description":"Article(s) > Generating random numbers without GameplayKit","category":["Swift","iOS","Article(s)"],"tag":["blog","hackingwithswift.com","crashcourse","swift","xcode","appstore","ios"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > Generating random numbers without GameplayKit"},{"property":"og:description","content":"Generating random numbers without GameplayKit"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/35/02-generating-random-numbers-without-gameplaykit.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/35/02-generating-random-numbers-without-gameplaykit.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Generating random numbers without GameplayKit"}],["meta",{"property":"og:description","content":"Article(s) > Generating random numbers without GameplayKit"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"hackingwithswift.com"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:tag","content":"ios"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Generating random numbers without GameplayKit\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]],"isOriginal":false},"headers":[{"level":2,"title":"Old-fashioned randomness","slug":"old-fashioned-randomness","link":"#old-fashioned-randomness","children":[]}],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":3.17,"words":952},"filePathRelative":"hackingwithswift.com/read/35/02-generating-random-numbers-without-gameplaykit.md","excerpt":"\\n"}');export{R as comp,j as data};
