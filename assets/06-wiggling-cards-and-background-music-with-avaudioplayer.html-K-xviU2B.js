import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as u,b as n,t as d,e as a,n as i,g as c,d as s,f as t,r as p,o as h}from"./app-BgNevrm5.js";const m={},k={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},g={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},f=n("nav",{class:"table-of-contents"},[n("ul")],-1),w=n("hr",null,null,-1),v=n("p",null,"The last part of our misdirection is going to be truly evil. That being said, it is entirely optional because I won't be teaching any vital new techniques here â€“ I just enjoy screwing with my friends' heads!",-1),y=n("p",null,"We're going to add two more simple distractions to our app. First, we're going to make random cards move ever so slightly on the screen. The movement has to be small so that people catch it in the corner of their eye, but then aren't 100% sure anything actually happened. Second, we're going to add some background music to make people wonder whether there's something in the sound effects that tells you where the star is.",-1),b=n("p",null,[s("Making the cards move just a bit is easy thanks to the method "),n("code",null,"perform(_:with:afterDelay:)"),s(" that I introduced earlier. We're going to write a new method that scales a card so that it's a mere 1% larger than normal, before dropping it down again. To make things more interesting, we want this animation to happen only occasionally, so the users aren't sure when it will happen again.")],-1),_=n("p",null,"This misdirection is clever because human eyes are extremely sensitive to motion at the edges of vision, so your eye notices a card moves and jumps to it, but of course by then our animation has stopped so your user isn't sure whether anything happened. If you want to create a more pronounced effect, just increase the transform scale that gets applied.",-1),A=n("code",null,"CardViewController.swift",-1),P=t(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@objc</span> <span class="token keyword">func</span> <span class="token function-definition function">wiggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token class-name">Int</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">...</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">UIView</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>withDuration<span class="token punctuation">:</span> <span class="token number">0.2</span><span class="token punctuation">,</span> delay<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">.</span>allowUserInteraction<span class="token punctuation">,</span> animations<span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">self</span><span class="token punctuation">.</span>back<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token class-name">CGAffineTransform</span><span class="token punctuation">(</span>scaleX<span class="token punctuation">:</span> <span class="token number">1.01</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">1.01</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span></span>
<span class="line">            <span class="token keyword">self</span><span class="token punctuation">.</span>back<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token class-name">CGAffineTransform</span><span class="token punctuation">.</span>identity</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token function">perform</span><span class="token punctuation">(</span><span class="token other-directive property">#selector</span><span class="token punctuation">(</span>wiggle<span class="token punctuation">)</span><span class="token punctuation">,</span> with<span class="token punctuation">:</span> <span class="token nil constant">nil</span><span class="token punctuation">,</span> afterDelay<span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">perform</span><span class="token punctuation">(</span><span class="token other-directive property">#selector</span><span class="token punctuation">(</span>wiggle<span class="token punctuation">)</span><span class="token punctuation">,</span> with<span class="token punctuation">:</span> <span class="token nil constant">nil</span><span class="token punctuation">,</span> afterDelay<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There are two things of interest in that new method. First, I&#39;ve used the <code>.allowUserInteraction</code> animation option so that users can tap a card even when it&#39;s animating. Second, the method calls itself so that the wiggle animation happens repeatedly, but, in a particularly evil twist, the delay is much longer after a card already moved. This means if someone&#39;s eye jumps to a card when they think it moved, they&#39;ll have to stare at it for a full eight seconds before it moves again.</p><p>Once the <code>wiggle()</code> method has been called once it will carry on calling itself, so we just need to make that initial call to get things moving. To do that, add this code to the end of <code>viewDidLoad()</code> for the card view controller:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token function">perform</span><span class="token punctuation">(</span><span class="token other-directive property">#selector</span><span class="token punctuation">(</span>wiggle<span class="token punctuation">)</span><span class="token punctuation">,</span> with<span class="token punctuation">:</span> <span class="token nil constant">nil</span><span class="token punctuation">,</span> afterDelay<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,4),V={href:"http://incompetech.com/music/royalty-free/index.html?isrc=USUAN1500038",target:"_blank",rel:"noopener noreferrer"},x=n("code",null,"ViewController.swift",-1),S=t(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token class-name">AVFoundation</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now create a property to hold our music audio:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> music<span class="token punctuation">:</span> <span class="token class-name">AVAudioPlayer</span><span class="token operator">!</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,3),j=n("code",null,"playMusic()",-1),T=n("code",null,"numberOfLoops",-1),W=n("code",null,"ViewController.swift",-1),C=t(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">playMusic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token keyword">let</span> musicURL <span class="token operator">=</span> <span class="token class-name">Bundle</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span>forResource<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;PhantomFromSpace&quot;</span></span><span class="token punctuation">,</span> withExtension<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;mp3&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token keyword">let</span> audioPlayer <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> <span class="token class-name">AVAudioPlayer</span><span class="token punctuation">(</span>contentsOf<span class="token punctuation">:</span> musicURL<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            music <span class="token operator">=</span> audioPlayer</span>
<span class="line">            music<span class="token punctuation">.</span>numberOfLoops <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span></span>
<span class="line">            music<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The fourth and final change is just to call that new <code>playMusic()</code> method from within the view controller&#39;s <code>viewDidLoad()</code> method. So, add this to the end:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token function">playMusic</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>That completes our misdirections: we&#39;ve added a shifting color gradient, we&#39;ve added falling stars, we&#39;ve made the cards move, and now we&#39;ve added music too. With so many distractions in place hopefully your friends won&#39;t be able to guess the trick.</p><p>Speaking of tricks, that&#39;s our very next job: how to fix the app so you always guess correctly!</p>`,5);function I(l,O){const o=p("VPCard"),e=p("FontIcon");return h(),u("div",null,[n("h1",k,[n("a",g,[n("span",null,d(l.$frontmatter.title)+" ê´€ë ¨",1)])]),a(o,i(c({title:"Hacking with iOS â€“ learn to code iPhone and iPad apps with free Swift tutorials",desc:"Learn Swift coding for iOS with these free tutorials â€“ learn Swift, iOS, and Xcode",link:"/hackingwithswift.com/read/README.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),f,w,a(o,i(c({title:"Wiggling cards and background music with AVAudioPlayer | Hacking with iOS",desc:"Wiggling cards and background music with AVAudioPlayer",link:"https://hackingwithswift.com/read/37/6/wiggling-cards-and-background-music-with-avaudioplayer",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),v,y,b,_,n("p",null,[s("Open "),a(e,{icon:"fa-brands fa-swift"}),A,s(" for editing, then add this new method somewhere in the class:")]),P,n("p",null,[s(`The very last piece of misdirection is an easy one: making some music play. Some mystic-sounding music was in the Content folder you should have downloaded from GitHub in the first chapter, and is a piece of music called "Phantom from Space" by Kevin MacLeod. It's licensed under Creative Commons Attribution 3.0 â€“ see `),n("a",V,[a(e,{icon:"fas fa-globe"}),s("this link")]),s(" for more information.")]),n("p",null,[s("You should already have added the Content folder to your project, so all that's left is to use it. This is done with four small changes in "),a(e,{icon:"fa-brands fa-swift"}),x,s(", starting with this import to the top:")]),S,n("p",null,[s("Next we need to create a "),j,s(" method that loads in the music and plays it. This is almost identical to code we've covered before, but there is a small change because we need the music to loop. This is done by setting the audio player's "),T,s(" property to any negative number, such as -1. Here's the new method, again for "),a(e,{icon:"fa-brands fa-swift"}),W,s(":")]),C])}const R=r(m,[["render",I],["__file","06-wiggling-cards-and-background-music-with-avaudioplayer.html.vue"]]),L=JSON.parse('{"path":"/hackingwithswift.com/read/37/06-wiggling-cards-and-background-music-with-avaudioplayer.html","title":"Wiggling cards and background music with AVAudioPlayer","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Wiggling cards and background music with AVAudioPlayer","description":"Article(s) > Wiggling cards and background music with AVAudioPlayer","category":["Swift","iOS","Article(s)"],"tag":["blog","hackingwithswift.com","crashcourse","swift","xcode","appstore","ios"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > Wiggling cards and background music with AVAudioPlayer"},{"property":"og:description","content":"Wiggling cards and background music with AVAudioPlayer"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/37/06-wiggling-cards-and-background-music-with-avaudioplayer.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/37/06-wiggling-cards-and-background-music-with-avaudioplayer.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Wiggling cards and background music with AVAudioPlayer"}],["meta",{"property":"og:description","content":"Article(s) > Wiggling cards and background music with AVAudioPlayer"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"hackingwithswift.com"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:tag","content":"ios"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Wiggling cards and background music with AVAudioPlayer\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]],"isOriginal":false},"headers":[],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":3.11,"words":934},"filePathRelative":"hackingwithswift.com/read/37/06-wiggling-cards-and-background-music-with-avaudioplayer.md","excerpt":"\\n"}');export{R as comp,L as data};
