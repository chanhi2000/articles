import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as u,b as n,t as m,e,n as a,g as t,d as i,f as c,r as o,o as h}from"./app-BgNevrm5.js";const w={},k={id:"frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´",tabindex:"-1"},v={class:"header-anchor",href:"#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"},b=n("nav",{class:"table-of-contents"},[n("ul")],-1),g=n("hr",null,null,-1),f=n("blockquote",null,[n("p",null,"Updated for Xcode 16")],-1),y=c("<p>So, what did we <em>actually</em> just do?</p><p>Well, we want a way for users to look at items in the menu and add them to an order. But we <em>also</em> want their ordered items to appear somewhere else in the app.</p><p>Environment objects are SwiftUI&#39;s way of sharing data across many places, but by themselves they aren&#39;t a complete solution because it would be easy for different parts of our UI to show different things based on when they loaded. With the <code>ObservableObject</code> protocol we&#39;ve given our <code>Order</code> class the ability to announce that it has changed, and we can now make SwiftUI watch for those announcements and reload the UI.</p><p>We just created an instance of <code>Order</code> and placed it into the environment. As a result, any view that comes from <code>ContentView</code> can read that order back out and manipulate it somehow.</p>",4),j=n("code",null,"ItemDetail.swift",-1),O=c(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@EnvironmentObject</span> <span class="token keyword">var</span> order<span class="token punctuation">:</span> <span class="token class-name">Order</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>We haven&#39;t given that a default value, so you <em>might</em> think it will cause problems thanks to Swift&#39;s strict initialization rules. However, the <code>@EnvironmentObject</code> property wrapper does some magic: it allows this variable <em>not</em> to have a value in code, because we&#39;re saying it will already be set in the environment.</p><p>When this view is shown, SwiftUI will automatically look in its list of environment objects for something that is of type <code>Order</code>, and attach it to that property. If no <code>Order</code> object can be found then we have a problem: something we said would be there isn&#39;t, and our code will crash. This is just like an implicitly unwrapped optional, so be careful with it.</p><p><code>@EnvironmentObject</code> is another <em>property wrapper</em> in Swift, just like <code>@Published</code> and <code>@StateObject</code>. This one means we get that automatic attachment ability I just mentioned, but also tells SwiftUI to watch the object for any changes and refresh its UI when a change announcement comes through.</p>`,4),_=n("code",null,"ItemDetail",-1),S=n("code",null,"Order",-1),E=n("code",null,"ItemDetail",-1),x=n("code",null,"iDineApp.swift",-1),I=n("code",null,"PreviewProvider",-1),A=c(`<p>This preview code will only get built when we&#39;re in debug mode ‚Äì when we&#39;re building from Xcode, as opposed to for the App Store. This means it&#39;s safe to put code in there that only relates to our previews, which in this case will be a temporary <code>Order</code> instance so that it receives the same data as when it&#39;s running for real:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">ItemDetail_Previews</span><span class="token punctuation">:</span> <span class="token class-name">PreviewProvider</span> <span class="token punctuation">{</span>  </span>
<span class="line">    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">NavigationStack</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">ItemDetail</span><span class="token punctuation">(</span>item<span class="token punctuation">:</span> <span class="token class-name">MenuItem</span><span class="token punctuation">.</span>example<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">environmentObject</span><span class="token punctuation">(</span><span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That replicates the same setup we have with the app launch, which means our preview should work again.</p><p>Now <em>that</em> works we can get on with the real deal: adding a button that adds our current menu item to the order. Buttons in SwiftUI have two parts: a title string, and an action closure that contains code to run when the button is tapped.</p><p>The <code>Order</code> class already has an <code>add()</code> method that takes a menu item, so we&#39;ll use that for the action. As for the title, we&#39;ll just add some text saying ‚ÄúOrder This‚Äù ‚Äì you&#39;re welcome to add more styling if you want!</p><p>Put this into the body of <code>ItemDetail</code>, just before the spacer:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token class-name">Button</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Order This&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    order<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">:</span> item<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token function">buttonStyle</span><span class="token punctuation">(</span><span class="token punctuation">.</span>borderedProminent<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That&#39;s all it takes to add things to the shared order, but we can&#39;t actually <em>see</em> anything yet.</p><p>To make <em>that</em> happen we need to create a new screen that shows the user&#39;s order so far, then put that into a tab bar with our existing content view.</p><p>So, press <kbd>Cmd</kbd>+<kbd>N</kbd> to make a new SwiftUI View, calling this one ‚ÄúOrderView‚Äù. Because this needs to have the same <code>Order</code> instance as the rest of our app, you&#39;ll need to give it the same property we gave <code>ItemDetail</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@EnvironmentObject</span> <span class="token keyword">var</span> order<span class="token punctuation">:</span> <span class="token class-name">Order</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>As well as similar code in its preview to make sure that works too:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">OrderView_Previews</span><span class="token punctuation">:</span> <span class="token class-name">PreviewProvider</span> <span class="token punctuation">{</span>  </span>
<span class="line">    <span class="token keyword">static</span> <span class="token keyword">var</span> previews<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">OrderView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">environmentObject</span><span class="token punctuation">(</span><span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As for the body of our <code>OrderView</code>, this is all stuff you know already:</p><ul><li>A <code>List</code> view that gives us a scrolling table.</li><li>Some <code>Section</code> blocks to let us split up our information.</li><li>A <code>ForEach</code> and a <code>HStack</code> to show our array of order items, displaying both the name and price of each item.</li><li>A second <code>Section</code> at the end showing a navigation link to place the order.</li><li>A navigation bar title saying ‚ÄúOrder‚Äù.</li></ul><p>Putting all that together gives us this <code>OrderView</code> struct:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">OrderView</span> <span class="token punctuation">:</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token attribute atrule">@EnvironmentObject</span> <span class="token keyword">var</span> order<span class="token punctuation">:</span> <span class="token class-name">Order</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">var</span> body<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">View</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">NavigationStack</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">List</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token class-name">Section</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token class-name">ForEach</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span>items<span class="token punctuation">)</span> <span class="token punctuation">{</span> item <span class="token keyword">in</span></span>
<span class="line">                        <span class="token class-name">HStack</span> <span class="token punctuation">{</span></span>
<span class="line">                            <span class="token class-name">Text</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token punctuation">)</span></span>
<span class="line">                            <span class="token class-name">Spacer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                            <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;$</span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">item<span class="token punctuation">.</span>price</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                        <span class="token punctuation">}</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">                <span class="token class-name">Section</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token class-name">NavigationLink</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Place Order&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Check out&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                    <span class="token punctuation">}</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">.</span><span class="token function">navigationTitle</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Order&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>When you just want some text for your <code>NavigationLink</code>, you can use the simpler initializer shown above rather than providing a <code>label</code> closure.</p></div><p>We&#39;ll come back to that shortly, but first we need to make sure it&#39;s working by making it accessible through our user interface.</p>`,19),T={class:"hint-container details"},V=n("summary",null,"Further Reading‚Ä¶",-1),U={class:"hint-container details"},P=n("summary",null,"Similar solutions‚Ä¶",-1);function W(p,q){const s=o("VPCard"),r=o("VidStack"),l=o("FontIcon");return h(),u("div",null,[n("h1",k,[n("a",v,[n("span",null,m(p.$frontmatter.title)+" Í¥ÄÎ†®",1)])]),e(s,a(t({title:"SwiftUI by Example",desc:"Back to Home",link:"/hackingwithswift.com/swiftui/README.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),b,g,e(s,a(t({title:"Adding items to an order with @EnvironmentObject | SwiftUI by Example",desc:"Adding items to an order with @EnvironmentObject",link:"https://hackingwithswift.com/quick-start/swiftui/adding-items-to-an-order-with-environmentobject",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),f,e(r,{src:"youtube/bFwyDUhWXQ8"}),y,n("p",null,[i("We want to add items to our order from the detail screen, so head back to "),e(l,{icon:"fa-brands fa-swift"}),j,i(" and give it this property:")]),O,n("p",null,[i("Before we add some code to manipulate that order in "),_,i(", we need to fix another previewing problem. You see, we're now promising the an object of type "),S,i(" will be in the environment by the time our "),E,i(" is shown, and we create and pass that in from "),e(l,{icon:"fa-brands fa-swift"}),x,i(". That works great when our app is running for real, but in the Xcode preview we aren't launched from the app ‚Äì we're created by that "),I,i(" code at the end of our view files.")]),A,n("details",T,[V,e(s,a(t({title:"How to create a tappable button | SwiftUI by Example",desc:"How to create a tappable button",link:"/hackingwithswift.com/swiftui/how-to-create-a-tappable-button.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16)]),n("details",U,[P,e(s,a(t({title:"What is the @EnvironmentObject property wrapper? | SwiftUI by Example",desc:"What is the @EnvironmentObject property wrapper?",link:"/hackingwithswift.com/swiftui/what-is-the-environmentobject-property-wrapper.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),e(s,a(t({title:"How to use @EnvironmentObject to share data between views | SwiftUI by Example",desc:"How to use @EnvironmentObject to share data between views",link:"/hackingwithswift.com/swiftui/how-to-use-environmentobject-to-share-data-between-views.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),e(s,a(t({title:"What's the difference between @ObservedObject, @State, and @EnvironmentObject? | SwiftUI by Example",desc:"What's the difference between @ObservedObject, @State, and @EnvironmentObject?",link:"/hackingwithswift.com/swiftui/whats-the-difference-between-observedobject-state-and-environmentobject.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),e(s,a(t({title:"How to change the order of view layering using Z index | SwiftUI by Example",desc:"How to change the order of view layering using Z index",link:"/hackingwithswift.com/swiftui/how-to-change-the-order-of-view-layering-using-z-index.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),e(s,a(t({title:"Adding TabView and tabItem() | SwiftUI by Example",desc:"Adding TabView and tabItem()",link:"/hackingwithswift.com/swiftui/adding-tabview-and-tabitem.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16)])])}const B=d(w,[["render",W],["__file","adding-items-to-an-order-with-environmentobject.html.vue"]]),H=JSON.parse('{"path":"/hackingwithswift.com/swiftui/adding-items-to-an-order-with-environmentobject.html","title":"Adding items to an order with @EnvironmentObject","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Adding items to an order with @EnvironmentObject","description":"Article(s) > Adding items to an order with @EnvironmentObject","category":["Swift","SwiftUI","Article(s)"],"tag":["blog","hackingwithswift.com","crashcourse","swift","swiftui","xcode","appstore"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > Adding items to an order with @EnvironmentObject"},{"property":"og:description","content":"Adding items to an order with @EnvironmentObject"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/swiftui/adding-items-to-an-order-with-environmentobject.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/swiftui/adding-items-to-an-order-with-environmentobject.html"}],["meta",{"property":"og:site_name","content":"üìöBookshelf"}],["meta",{"property":"og:title","content":"Adding items to an order with @EnvironmentObject"}],["meta",{"property":"og:description","content":"Article(s) > Adding items to an order with @EnvironmentObject"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"hackingwithswift.com"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"swiftui"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:published_time","content":"2024-04-30T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Adding items to an order with @EnvironmentObject\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-04-30T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[]}"]],"date":"2024-04-30T00:00:00.000Z","isOriginal":false},"headers":[],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":4.45,"words":1336},"filePathRelative":"hackingwithswift.com/swiftui/adding-items-to-an-order-with-environmentobject.md","localizedDate":"2024ÎÖÑ 4Ïõî 30Ïùº","excerpt":"\\n"}');export{B as comp,H as data};
