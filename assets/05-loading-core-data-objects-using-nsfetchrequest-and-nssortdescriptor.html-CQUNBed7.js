import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c,b as n,t as p,e as a,n as e,g as t,f as l,r,o as d}from"./app-BgNevrm5.js";const u={},h={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},m={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},k=n("nav",{class:"table-of-contents"},[n("ul")],-1),g=n("hr",null,null,-1),w=l(`<p>This is where Core Data starts to become interesting and perhaps â€“ gasp! â€“ even fun. Yes, I know it&#39;s taken quite a lot of work to get this far, but I <em>did</em> warn you, remember?</p><p>Step four is where we finally get to put to use all three previous steps by showing data to users. After the huge amount of work you&#39;ve put in, particularly in the previous step, I&#39;m sure you&#39;ll be grateful to see everything pay off at last!</p><p>In our project, we know we&#39;re using <code>Commit</code> objects to represent individual GitHub commits, so we need to store those objects in an array property. Add this to the <code>ViewController</code> class now:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> commits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Commit</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>We now need to write the usual table view methods, <code>numberOfRowsInSection</code> and <code>cellForRowAt</code>. The former will just return the size of the <code>commits</code> array, and the latter will place each commitâ€™s message and date into the cellâ€™s <code>textLabel</code> and <code>detailTextLabel</code>. There are lots of ways to convert dates to and from strings â€“ you already saw <code>ISO8601DateFormatter</code>, for example â€“ but here weâ€™re just going to use the simplest: every <code>Date</code> object has a <code>description</code> property that converts it to a human-readable string.</p><p>For a change, weâ€™re also going to write a third method that reports how many sections are in the table view. This returns 1 by default, and our new method will also return 1, but this will become useful later on.</p><p>Add these three methods now:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">numberOfSections</span><span class="token punctuation">(</span><span class="token keyword">in</span> tableView<span class="token punctuation">:</span> <span class="token class-name">UITableView</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">1</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">tableView</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> tableView<span class="token punctuation">:</span> <span class="token class-name">UITableView</span><span class="token punctuation">,</span> numberOfRowsInSection section<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> commits<span class="token punctuation">.</span>count</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">tableView</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> tableView<span class="token punctuation">:</span> <span class="token class-name">UITableView</span><span class="token punctuation">,</span> cellForRowAt indexPath<span class="token punctuation">:</span> <span class="token class-name">IndexPath</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">UITableViewCell</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> cell <span class="token operator">=</span> tableView<span class="token punctuation">.</span><span class="token function">dequeueReusableCell</span><span class="token punctuation">(</span>withIdentifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Commit&quot;</span></span><span class="token punctuation">,</span> <span class="token keyword">for</span><span class="token punctuation">:</span> indexPath<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">let</span> commit <span class="token operator">=</span> commits<span class="token punctuation">[</span>indexPath<span class="token punctuation">.</span>row<span class="token punctuation">]</span></span>
<span class="line">    cell<span class="token punctuation">.</span>textLabel<span class="token operator">!</span><span class="token punctuation">.</span>text <span class="token operator">=</span> commit<span class="token punctuation">.</span>message</span>
<span class="line">    cell<span class="token punctuation">.</span>detailTextLabel<span class="token operator">!</span><span class="token punctuation">.</span>text <span class="token operator">=</span> commit<span class="token punctuation">.</span>date<span class="token punctuation">.</span>description</span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> cell</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>With that change made, we need to write one new method in order to make our entire app spring into life. But before we jump into the code, you need to learn about one of the most important classes in Core Data: <code>NSFetchRequest</code>. This is the class that performs a query on your data, and returns a list of objects that match.</p><p>We&#39;re going to use <code>NSFetchRequest</code> in a really basic form for now, then add more functionality later. In this first version, we&#39;re going to ask it to give us an array of all <code>Commit</code> objects that we have created, sorted by date descending so that the newest commits come first.</p><p>The way fetch requests work is very simple: you create one from the <code>NSManagedObject</code> subclass youâ€™re using for your entity, then pass it to managed object contextâ€™s <code>fetch()</code> method. If the fetch request worked then you&#39;ll get back an array of objects matching the query; if not, an exception will be thrown that you need to catch.</p><p>The sorting is done through a special data type called <code>NSSortDescriptor</code>, which is a trivial wrapper around the name of what you want to sort (in our case &quot;date&quot;), then a boolean setting whether the sort should be ascending (oldest first for dates) or descending (newest first). You pass an array of these, so you can say &quot;sort by date descending, then by message ascending,&quot; for example.</p><p>OK, time for some code, and I hope you&#39;ll be pleasantly surprised by how easy it is:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">loadSavedData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token class-name">Commit</span><span class="token punctuation">.</span><span class="token function">createFetchRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">let</span> sort <span class="token operator">=</span> <span class="token class-name">NSSortDescriptor</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;date&quot;</span></span><span class="token punctuation">,</span> ascending<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">)</span></span>
<span class="line">    request<span class="token punctuation">.</span>sortDescriptors <span class="token operator">=</span> <span class="token punctuation">[</span>sort<span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">do</span> <span class="token punctuation">{</span></span>
<span class="line">        commits <span class="token operator">=</span> <span class="token keyword">try</span> container<span class="token punctuation">.</span>viewContext<span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Got </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">commits<span class="token punctuation">.</span>count</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> commits&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        tableView<span class="token punctuation">.</span><span class="token function">reloadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Fetch failed&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>So, that creates the <code>NSFetchRequest</code>, gives it a sort descriptor to arrange the newest commits first, then uses the <code>fetch()</code> method to fetch the actual objects. That method returns an array of all <code>Commit</code> objects that exist in the data store. Once that&#39;s done, it&#39;s just a matter of calling <code>reloadData()</code> on the table to have the data appear.</p><p>To make the app work, we need to call this new <code>loadSavedData()</code> method in two places. First, add a call at the end of the <code>viewDidLoad()</code> method. Second, add a call in the <code>fetchCommits()</code> method, just after where we have <code>self.saveContext()</code>. You will, of course, need to use <code>self.loadSavedData()</code> in that instance.</p><p>Again, I&#39;ve written a simple <code>print()</code> statement when errors occur, but in your own production apps you will need to show something useful to your user.</p><p>Good news: that completes all four basic bootstrapping steps for Core Data. We have defined our model, loaded the data store and managed object context, fetched some example data and saved it, and loaded the resulting objects. You should now be able to run your project and see it all working!</p><figure><img src="https://hackingwithswift.com/img/books/hws/38-7@2x.png" alt="Finally our app is working: we have a scrolling table view listing commits to the Swift repository on GitHub." tabindex="0" loading="lazy"><figcaption>Finally our app is working: we have a scrolling table view listing commits to the Swift repository on GitHub.</figcaption></figure>`,19);function f(o,b){const s=r("VPCard");return d(),c("div",null,[n("h1",h,[n("a",m,[n("span",null,p(o.$frontmatter.title)+" ê´€ë ¨",1)])]),a(s,e(t({title:"Hacking with iOS â€“ learn to code iPhone and iPad apps with free Swift tutorials",desc:"Learn Swift coding for iOS with these free tutorials â€“ learn Swift, iOS, and Xcode",link:"/hackingwithswift.com/read/README.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),k,g,a(s,e(t({title:"Loading Core Data objects using NSFetchRequest and NSSortDescriptor | Hacking with iOS",desc:"Loading Core Data objects using NSFetchRequest and NSSortDescriptor",link:"https://hackingwithswift.com/read/38/5/loading-core-data-objects-using-nsfetchrequest-and-nssortdescriptor",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),w])}const S=i(u,[["render",f],["__file","05-loading-core-data-objects-using-nsfetchrequest-and-nssortdescriptor.html.vue"]]),q=JSON.parse('{"path":"/hackingwithswift.com/read/38/05-loading-core-data-objects-using-nsfetchrequest-and-nssortdescriptor.html","title":"Loading Core Data objects using NSFetchRequest and NSSortDescriptor","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Loading Core Data objects using NSFetchRequest and NSSortDescriptor","description":"Article(s) > Loading Core Data objects using NSFetchRequest and NSSortDescriptor","category":["Swift","iOS","Article(s)"],"tag":["blog","hackingwithswift.com","crashcourse","swift","xcode","appstore","ios"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > Loading Core Data objects using NSFetchRequest and NSSortDescriptor"},{"property":"og:description","content":"Loading Core Data objects using NSFetchRequest and NSSortDescriptor"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/38/05-loading-core-data-objects-using-nsfetchrequest-and-nssortdescriptor.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/38/05-loading-core-data-objects-using-nsfetchrequest-and-nssortdescriptor.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Loading Core Data objects using NSFetchRequest and NSSortDescriptor"}],["meta",{"property":"og:description","content":"Article(s) > Loading Core Data objects using NSFetchRequest and NSSortDescriptor"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://hackingwithswift.com/img/books/hws/38-7@2x.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"hackingwithswift.com"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:tag","content":"ios"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Loading Core Data objects using NSFetchRequest and NSSortDescriptor\\",\\"image\\":[\\"https://hackingwithswift.com/img/books/hws/38-7@2x.png\\"],\\"dateModified\\":null,\\"author\\":[]}"]],"isOriginal":false},"headers":[],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":3.26,"words":977},"filePathRelative":"hackingwithswift.com/read/38/05-loading-core-data-objects-using-nsfetchrequest-and-nssortdescriptor.md","excerpt":"\\n"}');export{S as comp,q as data};
