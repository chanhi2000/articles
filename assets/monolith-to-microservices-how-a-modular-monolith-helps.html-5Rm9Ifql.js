import{_ as m}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as u,b as e,t as p,e as t,n as g,g as f,w as n,d as o,f as r,r as l,o as v}from"./app-BgNevrm5.js";const b={},_={id:"frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´",tabindex:"-1"},y={class:"header-anchor",href:"#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"},w={class:"table-of-contents"},M=e("hr",null,null,-1),k=r('<p>You start building a beautiful monolith system. Maybe a modular monolith.</p><p>The system grows over time, and requirements are ever-changing. Slowly, cracks begin to appear in the system.</p><p>This could be for organizational reasons and distributing the work across a team. Or it could be because of scaling issues and performance bottlenecks.</p><p>You begin evaluating the possible solutions, and the benefits and tradeoffs of each one. At last, you come to a decision.</p><p>It&#39;s time to migrate parts of the system to individual (micro)services.</p><p>So, how do we approach this migration from monolith to microservices?</p><p>That is the topic of this week&#39;s newsletter.</p><p>Let&#39;s dive in!</p><hr><h2 id="decoupling-using-bounded-contexts" tabindex="-1"><a class="header-anchor" href="#decoupling-using-bounded-contexts"><span>Decoupling Using Bounded Contexts</span></a></h2><p>The first step in moving from a monolith to microservices is identifying the bounded contexts. Because they represent cohesive parts of the domain that are candidates for extraction.</p>',11),x={href:"https://martinfowler.com/bliki/BoundedContext.html",target:"_blank",rel:"noopener noreferrer"},T={href:"https://learn.microsoft.com/en-us/azure/architecture/microservices/model/domain-analysis",target:"_blank",rel:"noopener noreferrer"},j={href:"https://cloud.google.com/architecture/microservices-architecture-refactoring-monoliths",target:"_blank",rel:"noopener noreferrer"},H=e("figure",null,[e("img",{src:"https://milanjovanovic.tech/blogs/mnw_056/bounded_contexts.png?imwidth=2048",alt:"Bounded contexts.",tabindex:"0",loading:"lazy"}),e("figcaption",null,"Bounded contexts.")],-1),A={href:"https://go.particular.net/right-sized-services",target:"_blank",rel:"noopener noreferrer"},B=e("p",null,"The next problem you need to solve is coupling. Coupling is manifested in two ways:",-1),C=e("ul",null,[e("li",null,"Database dependencies"),e("li",null,"Communication between modules")],-1),S=e("p",null,"You can solve these problems from the start by building a modular monolith. But I'll also explain the guiding principles you can use to solve coupling.",-1),I=e("hr",null,null,-1),Y=e("h2",{id:"how-a-modular-monolith-solves-coupling",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#how-a-modular-monolith-solves-coupling"},[e("span",null,"How a Modular Monolith Solves Coupling")])],-1),z=e("figure",null,[e("img",{src:"https://milanjovanovic.tech/blogs/mnw_056/modular_monolith.png?imwidth=2048",alt:"Modular monolith.",tabindex:"0",loading:"lazy"}),e("figcaption",null,"Modular monolith.")],-1),D=e("p",null,"You can think of a module as a distinct application within the system. A module has its own domain, entities, use cases, database tables. The modules are deployed together as a single executable application. But they are otherwise independent.",-1),E=e("p",null,"So I mentioned that you need to reduce the coupling between modules.",-1),P=e("p",null,"Here are two principles to solve database coupling:",-1),R=e("ul",null,[e("li",null,"Modules can't share tables in the database"),e("li",null,"Modules can't directly query the database tables of other modules")],-1),q=e("p",null,"Sharing database tables leads to a high degree of coupling, and this is exactly what you are trying to avoid. You can isolate the data for each module on a logical level using schemas or physically with different databases.",-1),N=e("p",null,"A module should expose a public API that other modules can call. This public API is the entry point into the module. And this is the only way for modules to communicate.",-1),O=e("p",null,"My preferred approach is asynchronous communication using messaging. It's loosely coupled and makes the transition to microservices easier.",-1),V=e("hr",null,null,-1),J=e("h2",{id:"adding-a-message-broker-to-the-system",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#adding-a-message-broker-to-the-system"},[e("span",null,"Adding a Message Broker To The System")])],-1),U=e("p",null,"To implement asynchronous communication between modules, you can introduce a message broker. But you don't need to introduce a full-blown message broker from the start.",-1),K={href:"https://masstransit.io",target:"_blank",rel:"noopener noreferrer"},L=e("p",null,"MassTransit has an in-memory transport that works well inside a single process. It's very fast. But it isn't durable, and you can lose messages if the bus is stopped.",-1),W=e("p",null,"You only need to configure a different transport mechanism when introducing a real message broker. But you don't need to change your messaging code.",-1),Z=e("figure",null,[e("img",{src:"https://milanjovanovic.tech/blogs/mnw_056/modular_monolith_queue.png?imwidth=2048",alt:"Modular monolith with a queue.",tabindex:"0",loading:"lazy"}),e("figcaption",null,"Modular monolith with a queue.")],-1),F=e("p",null,"What is the purpose of messaging inside a modular monolith?",-1),$=e("p",null,"Designing your system like this makes the modules loosely coupled and independent. The price you pay in increased complexity at the start is justified as the project matures.",-1),G=e("hr",null,null,-1),Q=e("h2",{id:"extracting-modules-to-microservices",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#extracting-modules-to-microservices"},[e("span",null,"Extracting Modules to Microservices")])],-1),X=e("p",null,"We decided to move from a monolith system to microservices. Since we built our system in a modular way, the migration comes down to extracting a module into a new process.",-1),ee={href:"https://go.particular.net/break-that-big-ball-of-mud",target:"_blank",rel:"noopener noreferrer"},oe=e("p",null,"If you implement inter-module communication using method calls, you must replace that implementation with HTTP calls over the network. Because you're now building a distributed system, and the previous implementation using method calls will not work. You also need to consider authentication, fault tolerance...",-1),te=e("figure",null,[e("img",{src:"https://milanjovanovic.tech/blogs/mnw_056/extracting_modules.png?imwidth=2048",alt:"Microservices with extracting modules.",tabindex:"0",loading:"lazy"}),e("figcaption",null,"Microservices with extracting modules.")],-1),ne={href:"https://learn.microsoft.com/en-us/azure/architecture/patterns/strangler-fig",target:"_blank",rel:"noopener noreferrer"},ie=r('<hr><h2 id="closing-thoughts" tabindex="-1"><a class="header-anchor" href="#closing-thoughts"><span>Closing Thoughts</span></a></h2><p>The biggest blocker for moving from a monolith to microservices is coupling. Coupling is a change preventer. So, this is the first thing you need to tackle.</p><p>You need to solve coupling at the database level and between components in the code. Building the system in a modular way can prevent these problems from the start.</p><p>Which is why a Modular monolith is an excellent approach.</p><p>You can identify bounded contexts in the system and use them as the boundaries in the monolith. And getting the boundaries right is easier in a monolith.</p><p>Migrating to microservices comes down to extracting the modules into individual services.</p><p>Of course, you still need to think about security and fault tolerance because you now have a distributed system.</p><p>Talking about architecture in abstract terms can be difficult to grasp, but it&#39;s important when discussing conceptual solutions.</p><p>I&#39;ll show you a practical Modular monolith implementation soon to complete the circle.</p><p>Until then, I hope this was valuable.</p><p>See you next week!</p>',12);function se(c,ae){const h=l("VPCard"),s=l("router-link"),d=l("SiteInfo"),i=l("FontIcon"),a=l("RouteLink");return v(),u("div",null,[e("h1",_,[e("a",y,[e("span",null,p(c.$frontmatter.title)+" Í¥ÄÎ†®",1)])]),t(h,g(f({title:"C# > Article(s)",desc:"Article(s)",link:"/programming/cs/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),e("nav",w,[e("ul",null,[e("li",null,[t(s,{to:"#decoupling-using-bounded-contexts"},{default:n(()=>[o("Decoupling Using Bounded Contexts")]),_:1})]),e("li",null,[t(s,{to:"#how-a-modular-monolith-solves-coupling"},{default:n(()=>[o("How a Modular Monolith Solves Coupling")]),_:1})]),e("li",null,[t(s,{to:"#adding-a-message-broker-to-the-system"},{default:n(()=>[o("Adding a Message Broker To The System")]),_:1})]),e("li",null,[t(s,{to:"#extracting-modules-to-microservices"},{default:n(()=>[o("Extracting Modules to Microservices")]),_:1})]),e("li",null,[t(s,{to:"#closing-thoughts"},{default:n(()=>[o("Closing Thoughts")]),_:1})])])]),M,t(d,{name:"Monolith to Microservices: How a Modular Monolith Helps",desc:"You start building a beautiful monolith system. Maybe a modular monolith. The system grows, and requirements are ever-changing. Slowly, cracks begin to appear in the system. This could be for organizational reasons and distributing the work across a team. Or it could be because of scaling issues and performance bottlenecks. You begin the process of evaluating the benefits and tradeoffs of possible solutions. At last, you come to a decision. It's time to migrate parts of the system to individual services. So, how do we approach this migration from monolith to microservices?",url:"https://milanjovanovic.tech/blog/monolith-to-microservices-how-a-modular-monolith-helps/",logo:"https://milanjovanovic.tech/profile_favicon.png",preview:"https://milanjovanovic.tech/blog-covers/mnw_056.png"}),k,e("p",null,[o("One solution is to identify "),e("a",x,[t(i,{icon:"fas fa-globe"}),o("bounded contexts")]),o(" using the domain-driven design strategic modeling.")]),e("p",null,[o("Bounded contexts define the explicit boundaries between modules and separate the responsibilities. This is one of the biggest challenges when migrating to microservices. "),e("a",T,[t(i,{icon:"fa-brands fa-microsoft"}),o("Identifying good boundaries")]),o(" between modules ensures microservices are narrowly focused on one problem domain.")]),e("p",null,[o("Defining boundaries is also easier in a monolith because you aren't working with a distributed system. "),e("a",j,[t(i,{icon:"iconfont icon-gcp"}),o("Refactoring bad boundaries")]),o(' is less risky, and you have more freedom to "get it right".')]),H,e("p",null,[o("And the size of the bounded context shouldn't worry you. Instead, focus on "),e("a",A,[t(i,{icon:"fas fa-globe"}),o("service boundaries")]),o(".")]),B,C,S,I,Y,e("p",null,[o("A "),t(a,{to:"/milanjovanovic.tech/modular-monolith-communication-patterns.html#what-is-a-modular-monolith"},{default:n(()=>[o("modular monolith")]),_:1}),o(" is a catchy name for a monolith system built from a few bounded contexts (modules) and following a set of principles to control coupling. Each module contains a cohesive set of functionalities and is isolated from other modules in the system. The isolation refers to database dependencies and inter-module communication.")]),z,D,e("p",null,[o("You can apply different architectural approaches to each module, like "),t(a,{to:"/milanjovanovic.tech/pragmatic-clean-architecture/"},{default:n(()=>[o("Clean Architecture")]),_:1}),o(".")]),E,P,R,q,N,e("p",null,[o("Communication between modules can be "),t(a,{to:"/milanjovanovic.tech/modular-monolith-communication-patterns.html#synchronous-communication-with-method-calls"},{default:n(()=>[o("synchronous")]),_:1}),o(" using method calls, or "),t(a,{to:"/milanjovanovic.tech/modular-monolith-communication-patterns.html#asynchronous-communication-with-messaging"},{default:n(()=>[o("asynchronous")]),_:1}),o(" using a message bus.")]),O,V,J,U,e("p",null,[o("You can implement messaging between modules using an abstraction like "),e("a",K,[t(i,{icon:"fas fa-globe"}),o("MassTransit")]),o(" while abstracting away the transport mechanism.")]),L,W,Z,F,$,G,Q,X,e("p",null,[o("You should introduce a "),t(a,{to:"/milanjovanovic.tech/implementing-an-api-gateway-for-microservices-with-yarp.html"},{default:n(()=>[o("reverse proxy")]),_:1}),o(" in front of your services to route incoming traffic. This will hide the implementation details of the microservices system from client applications.")]),e("p",null,[o("The new microservice needs to connect to the message bus, but we don't need to change anything in our code. Using messaging for communication between modules simplifies the migration process. This might remind you of "),e("a",ee,[t(i,{icon:"fas fa-globe"}),o("event-driven architecture")]),o(".")]),oe,te,e("p",null,[o("Extracting modules from the monolith system leads to replacing all the functionalities of the old system with new microservices. This process of migrating to microservices follows the "),e("a",ne,[t(i,{icon:"fa-brands fa-microsoft"}),o("strangler fig pattern")]),o(".")]),ie])}const ce=m(b,[["render",se],["__file","monolith-to-microservices-how-a-modular-monolith-helps.html.vue"]]),he=JSON.parse('{"path":"/milanjovanovic.tech/monolith-to-microservices-how-a-modular-monolith-helps.html","title":"Monolith to Microservices: How a Modular Monolith Helps","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Monolith to Microservices: How a Modular Monolith Helps","description":"Article(s) > Monolith to Microservices: How a Modular Monolith Helps","icon":"iconfont icon-csharp","category":["C#","DotNet","Article(s)"],"tag":["blog","milanjovanovic.tech","cs","c#","csharp","dotnet"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > Monolith to Microservices: How a Modular Monolith Helps"},{"property":"og:description","content":"Monolith to Microservices: How a Modular Monolith Helps"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/milanjovanovic.tech/monolith-to-microservices-how-a-modular-monolith-helps.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/milanjovanovic.tech/monolith-to-microservices-how-a-modular-monolith-helps.html"}],["meta",{"property":"og:site_name","content":"üìöBookshelf"}],["meta",{"property":"og:title","content":"Monolith to Microservices: How a Modular Monolith Helps"}],["meta",{"property":"og:description","content":"Article(s) > Monolith to Microservices: How a Modular Monolith Helps"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://milanjovanovic.tech/blog-covers/mnw_056.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://milanjovanovic.tech/blog-covers/mnw_056.png"}],["meta",{"name":"twitter:image:alt","content":"Monolith to Microservices: How a Modular Monolith Helps"}],["meta",{"property":"article:author","content":"Milan Jovanoviƒá"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"milanjovanovic.tech"}],["meta",{"property":"article:tag","content":"cs"}],["meta",{"property":"article:tag","content":"c#"}],["meta",{"property":"article:tag","content":"csharp"}],["meta",{"property":"article:tag","content":"dotnet"}],["meta",{"property":"article:published_time","content":"2023-09-23T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Monolith to Microservices: How a Modular Monolith Helps\\",\\"image\\":[\\"https://milanjovanovic.tech/blogs/mnw_056/bounded_contexts.png?imwidth=2048\\",\\"https://milanjovanovic.tech/blogs/mnw_056/modular_monolith.png?imwidth=2048\\",\\"https://milanjovanovic.tech/blogs/mnw_056/modular_monolith_queue.png?imwidth=2048\\",\\"https://milanjovanovic.tech/blogs/mnw_056/extracting_modules.png?imwidth=2048\\"],\\"datePublished\\":\\"2023-09-23T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Milan Jovanoviƒá\\"}]}"]],"prev":"/programming/cs/articles/README.md","date":"2023-09-23T00:00:00.000Z","isOriginal":false,"author":"Milan Jovanoviƒá","cover":"https://milanjovanovic.tech/blog-covers/mnw_056.png"},"headers":[{"level":2,"title":"Decoupling Using Bounded Contexts","slug":"decoupling-using-bounded-contexts","link":"#decoupling-using-bounded-contexts","children":[]},{"level":2,"title":"How a Modular Monolith Solves Coupling","slug":"how-a-modular-monolith-solves-coupling","link":"#how-a-modular-monolith-solves-coupling","children":[]},{"level":2,"title":"Adding a Message Broker To The System","slug":"adding-a-message-broker-to-the-system","link":"#adding-a-message-broker-to-the-system","children":[]},{"level":2,"title":"Extracting Modules to Microservices","slug":"extracting-modules-to-microservices","link":"#extracting-modules-to-microservices","children":[]},{"level":2,"title":"Closing Thoughts","slug":"closing-thoughts","link":"#closing-thoughts","children":[]}],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":4.74,"words":1421},"filePathRelative":"milanjovanovic.tech/monolith-to-microservices-how-a-modular-monolith-helps.md","localizedDate":"2023ÎÖÑ 9Ïõî 23Ïùº","excerpt":"\\n","copyright":{"author":"Milan Jovanoviƒá"}}');export{ce as comp,he as data};
