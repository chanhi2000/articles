import{_ as m}from"./banner-FxEid5Xn.js";import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as u,b as e,t as h,e as n,n as g,g as b,w as t,d as s,f as i,r as l,o as v}from"./app-BgNevrm5.js";const k={},_={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},f={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},y={class:"table-of-contents"},x=e("hr",null,null,-1),w=i('<figure><img src="'+m+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><hr><h2 id="_4-á„‚á…¦á„á…³á„‹á…¯á„á…³-capacity-á„€á…ªá†«á„…á…§á†«-á„‘á…¡á„…á…¡á„†á…µá„á…¥" tabindex="-1"><a class="header-anchor" href="#_4-á„‚á…¦á„á…³á„‹á…¯á„á…³-capacity-á„€á…ªá†«á„…á…§á†«-á„‘á…¡á„…á…¡á„†á…µá„á…¥"><span>4. ë„¤íŠ¸ì›Œí¬ capacity ê´€ë ¨ íŒŒë¼ë¯¸í„°</span></a></h2><h3 id="_4-1-maximum-file-count" tabindex="-1"><a class="header-anchor" href="#_4-1-maximum-file-count"><span>4.1 maximum file count</span></a></h3><p>ë¦¬ëˆ…ìŠ¤ë¥¼ ë¹„ë¡¯í•œ ì¼ë°˜ì ì¸ ìœ ë‹‰ìŠ¤ì—ì„œ ì†Œì¼“ì€ ë§ˆì¹˜ íŒŒì¼ê³¼ ê°™ì€ ì·¨ê¸‰ì„ ë°›ìŠµë‹ˆë‹¤. ì „ì²´ ì‹œìŠ¤í…œì—ì„œ ê°€ì§ˆ ìˆ˜ ìˆëŠ” íŒŒì¼ ê°œìˆ˜ê°€ ì œí•œì´ ìˆë‹¤ë©´, ë‹¹ì—°íˆ ì†Œì¼“ì˜ ì „ì²´ ê°œìˆ˜ì— ì˜í–¥ ë¯¸ì¹  ê²ƒ ì…ë‹ˆë‹¤.</p><p>ë¦¬ëˆ…ìŠ¤ì—ì„œ ì „ì²´ ì‹œìŠ¤í…œì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ìµœëŒ€ íŒŒì¼ ê°œìˆ˜ ì œí•œì€ &#39;<code>fs.file-max</code>&#39; ì»¤ë„ íŒŒë¼ë¯¸í„°ì—ì„œ ì„¤ì • ë©ë‹ˆë‹¤.</p><p>í˜„ì¬ ì„¤ì •ê°’ì„ í™•ì¸í•˜ë ¤ë©´, ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sysctl</span> fs.file-max</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># fs.file-max = 775052</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì´ ê°’ì€ ì¼ë°˜ì ìœ¼ë¡œ ì ë‹¹íˆ í° ê°’ì´ ì„¤ì •ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ì›¬ë§Œí•˜ë©´ ì† ë³¼ ì¼ì´ ì—†ì„ ê²ƒì…ë‹ˆë‹¤. ë‹¤ë§Œ, ì‹œìŠ¤í…œì´ êµ‰ì¥íˆ ë§ì€ íŒŒì¼ê³¼ ì†Œì¼“ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, ì´ ê°’ì— ì˜í•´ ì‹œìŠ¤í…œì´ ì˜¤ë™ì‘ í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì°¸ê³ ë°”ëë‹ˆë‹¤. (ì´ ê°’ì„ ë„˜ì–´ê°€ë©´ <code>open()</code> ì‹œìŠ¤í…œ ì½œì—ì„œ &#39;<code>Too many open files</code>&#39;ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒ ë  ê²ƒ ì…ë‹ˆë‹¤.)</p><p>ë‹¤ì‹œ ë§í•˜ìë©´, ì‹œìŠ¤í…œ ì „ì²´ì— ëŒ€í•œ í—ˆìš© ì†Œì¼“ ê°œìˆ˜ëŠ” &#39;<code>fs-file-max</code>&#39; ì»¤ë„ íŒŒë¼ë¯¸í„° ì„¤ì •ê°’ì´ ì ë‹¹íˆ ë†’ê²Œ ì„¤ì •ë˜ì–´ ìˆìœ¼ë¯€ë¡œ í° ë¬¸ì œê°€ ì•ˆë©ë‹ˆë‹¤. ì‚¬ì‹¤, ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ê°€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ì†Œì¼“ ê°œìˆ˜ ì œì•½ì€ ê·¸ë³´ë‹¤ëŠ” í”„ë¡œì„¸ìŠ¤ë³„ ì œí•œ ì„¤ì •ì¸ user limit ê°’ì„ ì‚´í´ë´ì•¼ í•  ê²ƒ ì…ë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ë¡œ ì´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token builtin class-name">ulimit</span> <span class="token parameter variable">-a</span></span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># core file size          (blocks, -c) 0</span></span>
<span class="line"><span class="token comment"># data seg size           (kbytes, -d) unlimited</span></span>
<span class="line"><span class="token comment"># scheduling priority             (-e) 0</span></span>
<span class="line"><span class="token comment"># file size               (blocks, -f) unlimited</span></span>
<span class="line"><span class="token comment"># pending signals                 (-i) 30473</span></span>
<span class="line"><span class="token comment"># max locked memory       (kbytes, -l) 64</span></span>
<span class="line"><span class="token comment"># max memory size         (kbytes, -m) unlimited</span></span>
<span class="line"><span class="token comment"># open files                      (-n) 1024</span></span>
<span class="line"><span class="token comment"># pipe size            (512 bytes, -p) 8</span></span>
<span class="line"><span class="token comment"># POSIX message queues     (bytes, -q) 819200</span></span>
<span class="line"><span class="token comment"># real-time priority              (-r) 0</span></span>
<span class="line"><span class="token comment"># stack size              (kbytes, -s) 8192</span></span>
<span class="line"><span class="token comment"># cpu time               (seconds, -t) unlimited</span></span>
<span class="line"><span class="token comment"># max user processes              (-u) 30473</span></span>
<span class="line"><span class="token comment"># virtual memory          (kbytes, -v) unlimited</span></span>
<span class="line"><span class="token comment"># file locks                      (-x) unlimited</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì—¬ê¸°ì„œ open filesê°€ í”„ë¡œì„¸ìŠ¤ê°€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ì†Œì¼“ í¬í•¨ íŒŒì¼ ê°œìˆ˜ì…ë‹ˆë‹¤. ì ë‹¹ëŸ‰ ì¦ê°€ì‹œí‚¤ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token builtin class-name">ulimit</span> <span class="token parameter variable">-SHn</span> <span class="token number">65535</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,13),T=e("code",null,"ulimit",-1),P=e("code",null,"setrlimit()",-1),C=i(`<p>&#39;<code>fs.file-max</code>&#39;ì™€ ìœ ì‚¬í•œ ì´ë¦„ì˜ &#39;<code>fs.file-nr</code>&#39;ì´ë¼ëŠ” ì»¤ë„ íŒŒë¼ë¯¸í„°ê°€ ìˆëŠ”ë°, ì‚¬ì‹¤ ì´ íŒŒë¼ë¯¸í„°ëŠ” ì¼ë°˜ì ì¸ íŒŒë¼ë¯¸í„°ê°€ ì•„ë‹ˆë¼ í˜„ì¬ ì—´ë ¤ ìˆëŠ” íŒŒì¼ í˜„í™©ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¡œ í˜„ì¬ í˜„í™©ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sysctl</span> fs.file-nr</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># fs.file-nr = 5024    0    775052</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ì„¸ ê°’ì€ ê°ê° í˜„ì¬ ì—´ë ¤ ìˆëŠ” íŒŒì¼ì˜ ìˆ˜, í˜„ì¬ ì—´ë ¤ ìˆìœ¼ë‚˜ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” íŒŒì¼ì˜ ìˆ˜, ì—´ ìˆ˜ ìˆëŠ” íŒŒì¼ì˜ ìµœëŒ€ ê°œìˆ˜ë¥¼ ëœ»í•©ë‹ˆë‹¤. ë¬¼ë¡  ì‹œìŠ¤í…œ ì „ì²´ì— ëŒ€í•œ ìˆ˜ì¹˜ì…ë‹ˆë‹¤.</p><hr><h2 id="_4-2-backlogs" tabindex="-1"><a class="header-anchor" href="#_4-2-backlogs"><span>4.2 backlogs</span></a></h2><p>ë„¤íŠ¸ì›Œí¬ íŒ¨í‚·ì€ ê·¸ ìƒì„±ê°€ ì „ë‹¬, ê·¸ë¦¬ê³  ì†Œëª¨ì— ì´ë¥´ê¸°ê¹Œì§€ ë§ì€ ì²˜ë¦¬ ê³¼ì •ì„ ê±°ì¹˜ê²Œ ë©ë‹ˆë‹¤. ê°ê°ì˜ ì²˜ë¦¬ ê³¼ì •ì„ íŒŒì´í”„ë¼ê³  ë³¸ë‹¤ë©´, ëª¨ë“  ì²˜ë¦¬ ê³¼ì • ì•ì—ëŠ” ê°ê° queueê°€ ì¡´ì¬í•œë‹¤ê³  í•  ìˆ˜ ìˆì„ ê²ƒ ì…ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ íŒ¨í‚· ì²˜ë¦¬ëŸ‰ì´ ê°‘ìê¸° ê¸‰ì¦í–ˆì„ ë•Œ, ì´ queueì˜ í¬ê¸°ê°€ ì´ë³´ë‹¤ ì‘ë‹¤ë©´ ë„˜ì¹˜ëŠ” íŒ¨í‚·ì— ëŒ€í•´ì„œëŠ” ì²˜ë¦¬ë˜ì§€ ì•Šê³  ë²„ë ¤ì§ˆ ê²ƒ ì…ë‹ˆë‹¤.</p><p><strong>ì„œë²„ ì»¤ë„ ì„¤ì •ê°’ì— ìˆì–´ out-bound queue ë³´ë‹¤ëŠ” in-bound queueê°€ ë” ë¯¼ê°í•œë°, ì™œëƒí•˜ë©´ out-boundë¡œ ë³´ë‚´ì§€ëŠ” íŒ¨í‚·ëŸ‰ì€ ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¡°ì ˆí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. (ê°ê°ì˜ ìš”ì²­ì€ ê·¸ ì²˜ë¦¬ ì‹œê°„ì´ ë‹¤ë¥´ê¸°ì— out-boundì‹œ ì ë‹¹íˆ ëœë¤í•˜ê²Œ ë¶„ë°°ë˜ëŠ” íš¨ê³¼ë„ ìˆìŠµë‹ˆë‹¤.) ë˜, in-bound queueê°€ ë„˜ì²˜ì„œ ë²„ë ¤ì§€ëŠ” íŒ¨í‚·ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì „í˜€ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ëŒ€ê·œëª¨ íŒ¨í‚· ì²˜ë¦¬ê°€ í•„ìš”í•œ ì„œë²„ì—ì„œëŠ” ì ë‹¹íˆ in-bound queue ê¸¸ì´ë¥¼ ì¦ê°€ì‹œì¼œì•¼ í•©ë‹ˆë‹¤.</strong></p><p>ë¨¼ì € &#39;<code>net.core.netdev_max_backlog</code>&#39; ì»¤ë„ íŒŒë¼ë¯¸í„°ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤. ì´ íŒŒë¼ë¯¸í„°ëŠ” ê° ë„¤íŠ¸ì›Œí¬ ì¥ì¹˜ ë³„ë¡œ ì»¤ë„ì´ ì²˜ë¦¬í•˜ë„ë¡ ìŒ“ì•„ë‘ëŠ” queueì˜ í¬ê¸°ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ì»¤ë„ì˜ íŒ¨í‚· ì²˜ë¦¬ ì†ë„ê°€ ì´ queueì— ì¶”ê°€ë˜ëŠ” íŒ¨í‚·ì˜ ì¸ì… ì†ë„ë³´ë‹¤ ë–¨ì–´ì§„ë‹¤ë©´ ë¯¸ì²˜ queueì— ì¶”ê°€ë˜ì§€ ëª»í•œ íŒ¨í‚·ë“¤ì€ ë²„ë ¤ì§ˆ ê²ƒì…ë‹ˆë‹¤.</p><p>ì´ ì»¤ë„ íŒŒë¼ë¯¸í„°ë„ trade-off ê´€ê³„ê°€ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë°–ì— ì—†ìœ¼ë¯€ë¡œ, ì ë‹¹íˆ ì¦ê°€ì‹œì¼œë‘ëŠ” ê²ƒë„ ê´œì°®ìŠµë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ë¡œ ì„¤ì •ê°’ì„ ì ë‹¹íˆ ì¦ê°€ ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sysctl</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">net.core.netdev_max_backlog</span><span class="token operator">=</span><span class="token string">&quot;30000&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>êµ¬ê¸€ì—ì„œ ì°¾ì„ ìˆ˜ ìˆëŠ” ëª‡ ì»¤ë„ íŒŒë¦¬ë¯¸í„° íŠœë‹ ê´€ë ¨ ê¸€ì—ëŠ”, ì´ ì»¤ë„ íŒŒë¼ë¯¸í„°ê°€ listen backlogë¼ê³  ì˜ëª» ì†Œê°œë˜ê¸°ë„ í•˜ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. listen backlog, ì¦‰ listen()ìœ¼ë¡œ ë°”ì¸ë”© ëœ ì„œë²„ ì†Œì¼“ì—ì„œ accept()ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì†Œì¼“ ê°œìˆ˜ì— ê´€ë ¨ëœ ì»¤ë„ íŒŒë¼ë¯¸í„°ëŠ” &#39;<code>net.core.somaxconn</code>&#39;ì…ë‹ˆë‹¤. ì´ ê°’ì€ listen() ì‹œìŠ¤í…œ ì½œì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ì„¤ì •í•˜ëŠ” backlog ê°’ì˜ hard limitì…ë‹ˆë‹¤. ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ listen()ì‹œ ì ë‹¹íˆ ì„¤ì •í•´ì•¼ê² ì§€ë§Œ, ë¨¼ì € ì´ hard limitì„ ì¦ê°€ì‹œì¼œì•¼ í•  ê²ƒì…ë‹ˆë‹¤.</p><p>ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ë¡œ ì´ ì„¤ì •ê°’ì„ ì¦ê°€ ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sysctl</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">net.core.somaxconn</span><span class="token operator">=</span><span class="token string">&quot;1024&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ì°¸ê³ ë¡œ, ì¼ë°˜ì ì¸ ë¦¬ëˆ…ìŠ¤ ë°°í¬íŒì˜ ê¸°ë³¸ ì„¤ì •ê°’ì€ 128ì…ë‹ˆë‹¤. ê·¸ëŸ°ë°, ì•„íŒŒì¹˜ ì›¹ ì„œë²„ì˜ ê²½ìš° <code>listen()</code>ì‹œ ì§€ì •ë˜ëŠ” backlogì˜ ê¸°ë³¸ê°’ì´ 511ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ ì»¤ë„ íŒŒë¼ë¯¸í„°ê°€ hard limitì´ê¸°ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ 511ìœ¼ë¡œ ì§€ì •ë˜ì—ˆë”ë¼ë„ ì‹¤ì œë¡œ í• ë‹¹ë˜ëŠ” listen backlogì˜ ìˆ˜ëŠ” 128ê°œê°€ ë  ê²ƒ ì…ë‹ˆë‹¤.</p><p>ë˜, <code>&#39;net.ipv4.tcp_max_syn_backlog</code>&#39;ë¼ëŠ” listen backlogì™€ ì—°ê´€ëœ ì»¤ë„ íŒŒë¼ë¯¸í„°ê°€ ìˆìŠµë‹ˆë‹¤. &#39;<code>net.core.somaxconn</code>&#39;ì´ accept()ì„ ê¸°ë‹¤ë¦¬ëŠ” ESTABLISHED ìƒíƒœì˜ ì†Œì¼“(ì¦‰, connection completed)ì„ ìœ„í•œ queueë¼ë©´, &#39;<code>net.ipv4.tcp_max_syn_backlog</code>&#39;ëŠ” SYN_RECEIVED ìƒíƒœì˜ ì†Œì¼“(ì¦‰, connection incompleted)ì„ ìœ„í•œ queueì…ë‹ˆë‹¤.</p><p>ì´ ì„¤ì •ê°’ë„ ì•„ë˜ì™€ ê°™ì´ ì ë‹¹íˆ ì¦ê°€ ì‹œí‚µë‹ˆë‹¤.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sysctl</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">net.ipv4.tcp_max_syn_backlog</span><span class="token operator">=</span><span class="token string">&quot;1024&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>í•œê°€ì§€ ìœ ì˜í•  ì ì€ ì»¤ë„ íŒŒë¦¬ë¯¸í„° ì„¤ì •ê°’ì„ ìƒí–¥í•˜ë”ë¼ë„, ì‹¤ì œ ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ listen backlogë¥¼ ì¦ê°€ì‹œí‚¤ë ¤ë©´ <code>listen()</code> ì‹œìŠ¤í…œ ì½œ í˜¸ì¶œì‹œ ë§¤ê°œë³€ìˆ˜ backlogì— í•„ìš”í•œ ê°’ì„ ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤.</p><h3 id="_4-3-port-range" tabindex="-1"><a class="header-anchor" href="#_4-3-port-range"><span>4.3 port range</span></a></h3><p>TCP ì—°ê²°ì„ ë§ºì„ë•Œ, í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì€ í•˜ë‚˜ì˜ í¬íŠ¸ë¥¼ ì„ ì í•´ì•¼ í•©ë‹ˆë‹¤. TCP ì—°ê²°ì€ ì¶œë°œì§€(source) ì£¼ì†Œ, ì¶œë°œì§€ í¬íŠ¸, ëª©ì ì§€(destination) ì£¼ì†Œ, ëª©ì ì§€ í¬íŠ¸ë¥¼ ê·¸ êµ¬ë¶„ìë¡œ í•˜ê¸° ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ì—°ê²°ì„ ë§ºì„ë•Œ, íŠ¹ë³„íˆ <code>bind()</code> ì‹œìŠ¤í…œ ì½œë¡œ ì¶œë°œì§€ í¬íŠ¸ë¥¼ ì§€ì •(bind)í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ì»¤ë„ì€ ì„ì˜ì˜ í¬íŠ¸ë¥¼ í• ë‹¹í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ëŸ¬í•œ í¬íŠ¸ë¥¼ ephemeral portë¼ê³  í†µì¹­í•©ë‹ˆë‹¤.</p><p>ì¦‰, í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì€ ì„œë²„ì— ì—°ê²°ì„ ë§ºì„ë•Œ í¬íŠ¸ë¼ëŠ” ìì›ì„ í•˜ë‚˜ ì†Œëª¨í•˜ë©°, í¬íŠ¸ëŠ” ìœ í•œí•œ ìì›ì´ê¸°ì— í•œ ì‹œìŠ¤í…œì—ì„œ ë™ì‹œì— ê°€ì§ˆ ìˆ˜ ìˆëŠ” í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì˜ ìˆ˜ëŠ” í•œì •ì ì…ë‹ˆë‹¤.</p><p>ë°˜ëŒ€ë¡œ, <code>listen()</code>ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ê³  ìˆëŠ” ì„œë²„ í¬íŠ¸ëŠ” TCP ì—°ê²°ì„ ë§ºì„ ë•Œ ì¶”ê°€ì ì¸ í¬íŠ¸ë¥¼ ì†Œëª¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë•Œë¬¸ì— ì¼ë°˜ì ì¸ ì„œë²„ì—ì„œëŠ” ê°€ì§ˆ ìˆ˜ ìˆëŠ” í¬íŠ¸ ìˆ˜ì™€ ì„œë²„ì˜ í´ë¼ì´ì–¸íŠ¸ ë™ì‹œ ì—°ê²° ìˆ˜ëŠ” í¬ê²Œ ê´€ê³„ê°€ ì—†ìŠµë‹ˆë‹¤.</p>`,22),q=e("p",null,[s("ë‹¤ë§Œ, ì„œë²„ì˜ ìœ í˜• ì¤‘ proxy ì„œë²„ì— ëŒ€í•´ì„œ ìƒê°í•´ ë³¼ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì(í´ë¼ì´ì–¸íŠ¸)ë¡œ ë¶€í„° ìš”ì²­ì„ ë°›ì•„, ì´ë¥¼ ë‹¤ë¥¸ ë°±ì—”ë“œ ì„œë²„ì— ì „ë‹¬í•˜ëŠ” ìœ í˜•ì˜ ì„œë²„ë¥¼ ë§í•˜ëŠ”ë°ìš”. ì´ ê²½ìš° í•´ë‹¹ ì„œë²„ëŠ” ë‹¤ë¥¸ ë°±ì—”ë“œ ì„œë²„ì— ì—°ê²°í•˜ê¸° ìœ„í•œ í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì´ í•„ìš”í•©ë‹ˆë‹¤. ë§Œì•½, ì‚¬ìš©ì ìš”ì²­ì´ ë™ì‹œì— "),e("span",{class:"katex"},[e("span",{class:"katex-mathml"},[e("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[e("semantics",null,[e("mrow",null,[e("mn",null,"10"),e("mo",{separator:"true"},","),e("mn",null,"000")]),e("annotation",{encoding:"application/x-tex"},"10,000")])])]),e("span",{class:"katex-html","aria-hidden":"true"},[e("span",{class:"base"},[e("span",{class:"strut",style:{height:"0.8389em","vertical-align":"-0.1944em"}}),e("span",{class:"mord"},"10"),e("span",{class:"mpunct"},","),e("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),e("span",{class:"mord"},"000")])])]),s("ê°œ ë“¤ì–´ì˜¤ëŠ”ë° í•´ë‹¹ ì„œë²„ê°€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ ìˆ˜ê°€ ë™ì‹œì— "),e("span",{class:"katex"},[e("span",{class:"katex-mathml"},[e("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[e("semantics",null,[e("mrow",null,[e("mn",null,"100")]),e("annotation",{encoding:"application/x-tex"},"100")])])]),e("span",{class:"katex-html","aria-hidden":"true"},[e("span",{class:"base"},[e("span",{class:"strut",style:{height:"0.6444em"}}),e("span",{class:"mord"},"100")])])]),s("ê°œë¼ë©´ "),e("span",{class:"katex"},[e("span",{class:"katex-mathml"},[e("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[e("semantics",null,[e("mrow",null,[e("mn",null,"9"),e("mo",{separator:"true"},","),e("mn",null,"900")]),e("annotation",{encoding:"application/x-tex"},"9,900")])])]),e("span",{class:"katex-html","aria-hidden":"true"},[e("span",{class:"base"},[e("span",{class:"strut",style:{height:"0.8389em","vertical-align":"-0.1944em"}}),e("span",{class:"mord"},"9"),e("span",{class:"mpunct"},","),e("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),e("span",{class:"mord"},"900")])])]),s("ê°œì˜ ìš”ì²­ì€ ì²˜ë¦¬ë˜ì§€ ëª»í•˜ê³  ëŒ€ê¸°í•´ì•¼ í•  ê²ƒ ì…ë‹ˆë‹¤.")],-1),M=i(`<p>ì–´ë–¤ ì‹œìŠ¤í…œì— ë™ì‹œì— ê°€ì§ˆ ìˆ˜ ìˆëŠ” í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ ìˆ˜ë¥¼ ê²°ì •í•˜ëŠ” ì»¤ë„ íŒŒë¼ë¯¸í„°ëŠ” &#39;<code>net.ipv4.ip_local_port_range</code>&#39; ì…ë‹ˆë‹¤. ì»¤ë„ì€ ephemeral portë¥¼ ìƒì„±í•  ë•Œ ì´ ë²”ìœ„ë‚´ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í¬íŠ¸ë¥¼ ê³¨ë¼ í• ë‹¹í•˜ê²Œ ë©ë‹ˆë‹¤.</p><p>ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ë¥¼ í†µí•´ í˜„ì¬ ì„¤ì •ê°’ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sysctl</span> net.ipv4.ip_local_port_range</span>
<span class="line"><span class="token comment"># </span></span>
<span class="line"><span class="token comment"># net.ipv4.ip_local_port_range = 32768    61000</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),S=e("p",null,[s("ìœ„ì—ì„œ ë‘ ê°’ì€ ê°ê° ì‚¬ìš©í•  í¬íŠ¸ ë²”ìœ„ì˜ ì‹œì‘ê³¼ ëì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì´ ì‹œìŠ¤í…œì—ì„œëŠ” ìµœëŒ€ "),e("span",{class:"katex"},[e("span",{class:"katex-mathml"},[e("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[e("semantics",null,[e("mrow",null,[e("mn",null,"28"),e("mo",{separator:"true"},","),e("mn",null,"232")]),e("annotation",{encoding:"application/x-tex"},"28,232")])])]),e("span",{class:"katex-html","aria-hidden":"true"},[e("span",{class:"base"},[e("span",{class:"strut",style:{height:"0.8389em","vertical-align":"-0.1944em"}}),e("span",{class:"mord"},"28"),e("span",{class:"mpunct"},","),e("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),e("span",{class:"mord"},"232")])])]),s("ê°œì˜ ephemeral portë¥¼ í• ë‹¹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìµœëŒ€í•œ ë„“ì€ ephemeral port ë²”ìœ„ë¥¼ ê°€ì§€ë ¤ë©´ ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (well-known portëŠ” ì œì™¸)")],-1),A=i(`<div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">sysctl</span> <span class="token parameter variable">-w</span> <span class="token assign-left variable">net.ipv4.ip_local_port_range</span><span class="token operator">=</span><span class="token string">&quot;1024 65535&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ê·¸ëŸ°ë°, ì´ë ‡ê²Œ ì„¤ì •í•˜ë”ë¼ë„ ì‹¤ì œ ì‹œìŠ¤í…œì—ì„œ ë™ì‹œì— ê°€ì§ˆ ìˆ˜ ìˆëŠ” í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ ìˆ˜ëŠ” ì´ì— ë¯¸ì¹˜ì§€ ëª»í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>TCP ì—°ê²°ì€ êµ‰ì¥íˆ ê²°í•©ë„ê°€ ë‚®ì€ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì„ ê°€ì •í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë•Œë¬¸ì— ë„¤íŠ¸ì›Œí¬ ìƒí™©ì— ì˜í•´ íŒ¨í‚· ìˆœì„œê°€ ë’¤ë°”ë€Œê±°ë‚˜ ìœ ì‹¤ ë˜ëŠ” ë“±ì˜ ì²˜ë¦¬ë¥¼ ìœ„í•´, ì†Œì¼“ ì¢…ë£Œì‹œì—ë„ ë˜ë„ë¡ ìš°ì•„í•˜ê²Œ ì¢…ë£Œ(gracefully shutdown)í•˜ë„ë¡ ë˜ì–´ ìˆëŠ”ë°ìš”. ì´ ì–˜ê¸°ì¸ ì¦‰ìŠ¨, ì†Œì¼“ì´ ì‚¬ìš©í•˜ëŠ” ìì›ì„ ë˜ë„ë¡ ëŠ¦ê²Œ ë°˜í™˜í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ephemeral portë¥¼ í¬í•¨í•´ì„œìš”.</p><p>íŠ¹íˆ, í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ì—ì„œ <code>close()</code> ì‹œìŠ¤í…œ ì½œë¡œ ë¨¼ì € ì†Œì¼“ì„ ë‹«ëŠ” ê²½ìš° ì†Œì¼“ì€ <code>TIME_WAIT</code> ìƒíƒœì— ë¨¸ë¬´ë¥´ê²Œ ë©ë‹ˆë‹¤. ì´ ë™ì•ˆ ì´ ì†Œì¼“ì— í• ë‹¹ë˜ì–´ ìˆëŠ” ephemeral portëŠ” ì‚¬ìš©ë  ìˆ˜ ì—†ê³  ê·¸ë§Œí¼ ë™ì‹œì— ê°€ì§ˆ ìˆ˜ ìˆëŠ” í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“ ìˆ˜ëŠ” ì œí•œë˜ê² ì£ .</p>`,4);function E(c,j){const o=l("VPCard"),a=l("router-link"),p=l("SiteInfo"),r=l("FontIcon");return v(),u("div",null,[e("h1",_,[e("a",f,[e("span",null,h(c.$frontmatter.title)+" ê´€ë ¨",1)])]),n(o,g(b({title:"Shell > Article(s)",desc:"Article(s)",link:"/programming/sh/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),e("nav",y,[e("ul",null,[e("li",null,[n(a,{to:"#_4-á„‚á…¦á„á…³á„‹á…¯á„á…³-capacity-á„€á…ªá†«á„…á…§á†«-á„‘á…¡á„…á…¡á„†á…µá„á…¥"},{default:t(()=>[s("4. ë„¤íŠ¸ì›Œí¬ capacity ê´€ë ¨ íŒŒë¼ë¯¸í„°")]),_:1}),e("ul",null,[e("li",null,[n(a,{to:"#_4-1-maximum-file-count"},{default:t(()=>[s("4.1 maximum file count")]),_:1})])])]),e("li",null,[n(a,{to:"#_4-2-backlogs"},{default:t(()=>[s("4.2 backlogs")]),_:1}),e("ul",null,[e("li",null,[n(a,{to:"#_4-3-port-range"},{default:t(()=>[s("4.3 port range")]),_:1})])])])])]),x,n(p,{name:"ë¦¬ëˆ…ìŠ¤ ì„œë²„ì˜ TCP ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì„ ê²°ì •ì§“ëŠ” ì»¤ë„ íŒŒë¼ë¯¸í„° ì´ì•¼ê¸° - 2í¸ | NHN Cloud Meetup",desc:"ë¦¬ëˆ…ìŠ¤ ì„œë²„ì˜ TCP ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì„ ê²°ì •ì§“ëŠ” ì»¤ë„ íŒŒë¼ë¯¸í„° ì´ì•¼ê¸° - 2í¸",url:"https://meetup.nhncloud.com/posts/54",logo:"https://meetup.nhncloud.com/resources/img/favicon.ico",preview:"/assets/image/meetup.nhncloud.com/53/banner.png"}),w,e("p",null,[s("ë§ì€ ê°œìˆ˜ì˜ ì†Œì¼“ì„ ì‚¬ìš©í•˜ëŠ” ì„œë²„ í”„ë¡œê·¸ë¨ì€ êµ¬ë™í•˜ê¸° ì „, "),n(r,{icon:"fas fa-terminal"}),T,s(" ëª…ë ¹ì–´ë¡œ í”„ë¡œì„¸ìŠ¤ ë‹¹ ìµœëŒ€ íŒŒì¼ ê°œìˆ˜ë¥¼ ì¦ê°€ì‹œì¼œì£¼ì–´ì•¼ í•  ê²ƒ ì…ë‹ˆë‹¤. (í˜¹ì€, í•´ë‹¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ë‚´ì—ì„œ "),P,s(" ì‹œìŠ¤í…œ ì½œë¡œ ì´ë¥¼ ì¦ê°€ì‹œí‚¤ëŠ” ë°©ë²•ë„ ìˆìŠµë‹ˆë‹¤.)")]),C,q,M,S,A])}const R=d(k,[["render",E],["__file","54.html.vue"]]),V=JSON.parse('{"path":"/meetup.nhncloud.com/54.html","title":"ë¦¬ëˆ…ìŠ¤ ì„œë²„ì˜ TCP ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì„ ê²°ì •ì§“ëŠ” ì»¤ë„ íŒŒë¼ë¯¸í„° ì´ì•¼ê¸° - 2í¸","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"ë¦¬ëˆ…ìŠ¤ ì„œë²„ì˜ TCP ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì„ ê²°ì •ì§“ëŠ” ì»¤ë„ íŒŒë¼ë¯¸í„° ì´ì•¼ê¸° - 2í¸","description":"Article(s) > ë¦¬ëˆ…ìŠ¤ ì„œë²„ì˜ TCP ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì„ ê²°ì •ì§“ëŠ” ì»¤ë„ íŒŒë¼ë¯¸í„° ì´ì•¼ê¸° - 2í¸","icon":"iconfont icon-shell","category":["Shell","TCP","Article(s)"],"tag":["blog","meetup.nhncloud.com","sh","bash","ulimit","sysctl"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > ë¦¬ëˆ…ìŠ¤ ì„œë²„ì˜ TCP ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì„ ê²°ì •ì§“ëŠ” ì»¤ë„ íŒŒë¼ë¯¸í„° ì´ì•¼ê¸° - 2í¸"},{"property":"og:description","content":"ë¦¬ëˆ…ìŠ¤ ì„œë²„ì˜ TCP ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì„ ê²°ì •ì§“ëŠ” ì»¤ë„ íŒŒë¼ë¯¸í„° ì´ì•¼ê¸° - 2í¸"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/meetup.nhncloud.com/54.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/meetup.nhncloud.com/54.html"}],["meta",{"property":"og:site_name","content":"ğŸ“šBookshelf"}],["meta",{"property":"og:title","content":"ë¦¬ëˆ…ìŠ¤ ì„œë²„ì˜ TCP ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì„ ê²°ì •ì§“ëŠ” ì»¤ë„ íŒŒë¼ë¯¸í„° ì´ì•¼ê¸° - 2í¸"}],["meta",{"property":"og:description","content":"Article(s) > ë¦¬ëˆ…ìŠ¤ ì„œë²„ì˜ TCP ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì„ ê²°ì •ì§“ëŠ” ì»¤ë„ íŒŒë¼ë¯¸í„° ì´ì•¼ê¸° - 2í¸"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://chanhi2000.github.io/bookshelf/assets/image/meetup.nhncloud.com/53/banner.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://chanhi2000.github.io/bookshelf/assets/image/meetup.nhncloud.com/53/banner.png"}],["meta",{"name":"twitter:image:alt","content":"ë¦¬ëˆ…ìŠ¤ ì„œë²„ì˜ TCP ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì„ ê²°ì •ì§“ëŠ” ì»¤ë„ íŒŒë¼ë¯¸í„° ì´ì•¼ê¸° - 2í¸"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"meetup.nhncloud.com"}],["meta",{"property":"article:tag","content":"sh"}],["meta",{"property":"article:tag","content":"bash"}],["meta",{"property":"article:tag","content":"ulimit"}],["meta",{"property":"article:tag","content":"sysctl"}],["meta",{"property":"article:published_time","content":"2015-12-28T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ë¦¬ëˆ…ìŠ¤ ì„œë²„ì˜ TCP ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ì„ ê²°ì •ì§“ëŠ” ì»¤ë„ íŒŒë¼ë¯¸í„° ì´ì•¼ê¸° - 2í¸\\",\\"image\\":[\\"https://chanhi2000.github.io/bookshelf/assets/image/meetup.nhncloud.com/53/banner.png\\"],\\"datePublished\\":\\"2015-12-28T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[]}"]],"prev":"/programming/sh/articles/README.md","date":"2015-12-28T00:00:00.000Z","isOriginal":false,"cover":"/assets/image/meetup.nhncloud.com/53/banner.png"},"headers":[{"level":2,"title":"4. ë„¤íŠ¸ì›Œí¬ capacity ê´€ë ¨ íŒŒë¼ë¯¸í„°","slug":"_4-á„‚á…¦á„á…³á„‹á…¯á„á…³-capacity-á„€á…ªá†«á„…á…§á†«-á„‘á…¡á„…á…¡á„†á…µá„á…¥","link":"#_4-á„‚á…¦á„á…³á„‹á…¯á„á…³-capacity-á„€á…ªá†«á„…á…§á†«-á„‘á…¡á„…á…¡á„†á…µá„á…¥","children":[{"level":3,"title":"4.1 maximum file count","slug":"_4-1-maximum-file-count","link":"#_4-1-maximum-file-count","children":[]}]},{"level":2,"title":"4.2 backlogs","slug":"_4-2-backlogs","link":"#_4-2-backlogs","children":[{"level":3,"title":"4.3 port range","slug":"_4-3-port-range","link":"#_4-3-port-range","children":[]}]}],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":1.46,"words":438},"filePathRelative":"meetup.nhncloud.com/54.md","localizedDate":"2015ë…„ 12ì›” 28ì¼","excerpt":"\\n"}');export{R as comp,V as data};
