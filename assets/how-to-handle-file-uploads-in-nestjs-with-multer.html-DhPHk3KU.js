import{_ as h}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as m,b as n,t as f,e,n as g,g as v,w as t,d as s,f as p,r as c,o as b}from"./app-BgNevrm5.js";const w={},y={id:"frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´",tabindex:"-1"},_={class:"header-anchor",href:"#frontmatter-title-·ÑÄ·Ö™·Ü´·ÑÖ·Öß·Ü´"},j={class:"table-of-contents"},x=n("hr",null,null,-1),F=p(`<p>Uploading files is an important need in many applications. Using Multer, you can set up a NestJS file upload feature in an easy and straightforward way.</p><p>In this guide, we‚Äôll walk through the steps to create a resource dedicated to file uploads, ensuring that your application can easily manage user files. You&#39;ll configure your application to handle files securely and seamlessly.</p><hr><h2 id="prerequisites" tabindex="-1"><a class="header-anchor" href="#prerequisites"><span>Prerequisites</span></a></h2><p>This is a hands-on guide. To follow along, you must have the following things:</p><ul><li>Node.js (v14 and above)</li><li>Node package manager</li><li>Basic understanding of Node.js and NestJS</li><li>A code editor, like VS Code</li><li>NestJS CLI. You can use the <code>npm install -g @nestjs/cli</code> command to install the CLI.</li></ul><hr><h2 id="how-to-set-up-the-project" tabindex="-1"><a class="header-anchor" href="#how-to-set-up-the-project"><span>How to Set up the Project</span></a></h2><p>Create a new NestJS project:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">nest new file-upload-example</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Then navigate to your project directory and run:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token builtin class-name">cd</span> file-upload-example</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Next, install the <code>multer</code> package‚Äîthe middleware that will handle your file uploads:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">npm</span> <span class="token function">install</span> @nestjs/platform-express multer</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Lastly, install the <code>@types/express</code> and <code>@types/multer</code> packages:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">npm</span> <span class="token function">install</span> -save-dev @types/express @types/multer</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>With the project set up and dependencies installed, let‚Äôs create the resource for the file upload feature.</p><hr><h2 id="how-to-create-a-resource-for-file-upload" tabindex="-1"><a class="header-anchor" href="#how-to-create-a-resource-for-file-upload"><span>How to Create a Resource for File Upload</span></a></h2><p>Using the NestJS CLI, generate the resource to handle file uploads:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">nest generate resource file-upload</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,21),U=n("code",null,"file-upload",-1),S=n("code",null,"src",-1),H=n("code",null,"file-upload.module.ts",-1),M=n("code",null,"file-upload.controller.ts",-1),N=n("code",null,"file-upload.service.ts",-1),A=n("hr",null,null,-1),C=n("h2",{id:"how-to-configure-the-file-upload-resource",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#how-to-configure-the-file-upload-resource"},[n("span",null,"How to Configure the File Upload Resource")])],-1),I=n("code",null,"file-upload.module.ts",-1),T=n("code",null,"file-upload.controller.ts",-1),P=n("code",null,"file-upload.service.ts",-1),J=n("div",{class:"language-typescript line-numbers-mode","data-highlighter":"prismjs","data-ext":"ts","data-title":"ts"},[n("pre",null,[n("code",null,[n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Module "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@nestjs/common'"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" FileUploadService "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./file-upload.service'"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" FileUploadController "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./file-upload.controller'"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" MulterModule "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@nestjs/platform-express'"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" diskStorage "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'multer'"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token decorator"},[n("span",{class:"token at operator"},"@"),n("span",{class:"token function"},"Module")]),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  imports"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"[")]),s(`
`),n("span",{class:"line"},[s("    MulterModule"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"register"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("      storage"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token function"},"diskStorage"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("        destination"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'./uploads'"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token function-variable function"},"filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"("),s("req"),n("span",{class:"token punctuation"},","),s(" file"),n("span",{class:"token punctuation"},","),s(" cb"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("          "),n("span",{class:"token keyword"},"const"),s(" filename "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("Date"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"now"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"},"-"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),s("file"),n("span",{class:"token punctuation"},"."),s("originalname"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("          "),n("span",{class:"token function"},"cb"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"null"),n("span",{class:"token punctuation"},","),s(" filename"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("      "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  controllers"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s("FileUploadController"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  providers"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"["),s("FileUploadService"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"FileUploadModule"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),R=n("code",null,"file-upload.module.ts",-1),q=n("code",null,"MulterModule",-1),E=n("div",{class:"language-javascript line-numbers-mode","data-highlighter":"prismjs","data-ext":"js","data-title":"js"},[n("pre",null,[n("code",null,[n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  Controller"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  Post"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  UseInterceptors"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[s("  UploadedFile"),n("span",{class:"token punctuation"},",")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@nestjs/common'"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" FileInterceptor "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@nestjs/platform-express'"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" FileUploadService "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'./file-upload.service'"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("@"),n("span",{class:"token function"},"Controller"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'file-upload'"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"FileUploadController"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[n("span",{class:"token keyword"},"private"),s(" readonly fileUploadService"),n("span",{class:"token operator"},":"),s(" FileUploadService")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("  @"),n("span",{class:"token function"},"Post"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'upload'"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[s("  @"),n("span",{class:"token function"},"UseInterceptors"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"FileInterceptor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'file'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token function"},"uploadFile"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("@"),n("span",{class:"token function"},"UploadedFile"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(" file"),n("span",{class:"token operator"},":"),s(" Express"),n("span",{class:"token punctuation"},"."),s("Multer"),n("span",{class:"token punctuation"},"."),s("File")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("fileUploadService"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"handleFileUpload"),n("span",{class:"token punctuation"},"("),s("file"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),z=n("code",null,"file-upload.controller.ts",-1),B=n("code",null,"POST",-1),V=n("div",{class:"language-javascript line-numbers-mode","data-highlighter":"prismjs","data-ext":"js","data-title":"js"},[n("pre",null,[n("code",null,[n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" Injectable "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@nestjs/common'"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("@"),n("span",{class:"token function"},"Injectable"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"FileUploadService"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token function"},"handleFileUpload"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[n("span",{class:"token literal-property property"},"file"),n("span",{class:"token operator"},":"),s(" Express"),n("span",{class:"token punctuation"},"."),s("Multer"),n("span",{class:"token punctuation"},"."),s("File")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"message"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'File uploaded successfully'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"filePath"),n("span",{class:"token operator"},":"),s(" file"),n("span",{class:"token punctuation"},"."),s("path "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),Y=n("p",null,"The service processes the file and returns a response with the file‚Äôs path.",-1),D=n("p",null,"Now that the module, service and controller has been configured, we can now add some validation to check the file size and file type.",-1),L=n("div",{class:"language-javascript line-numbers-mode","data-highlighter":"prismjs","data-ext":"js","data-title":"js"},[n("pre",null,[n("code",null,[n("span",{class:"line"},[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token punctuation"},"{"),s(" BadRequestException"),n("span",{class:"token punctuation"},","),s(" Injectable "),n("span",{class:"token punctuation"},"}"),s(),n("span",{class:"token keyword"},"from"),s(),n("span",{class:"token string"},"'@nestjs/common'"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("@"),n("span",{class:"token function"},"Injectable"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"export"),s(),n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"FileUploadService"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token function"},"handleFileUpload"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[n("span",{class:"token literal-property property"},"file"),n("span",{class:"token operator"},":"),s(" Express"),n("span",{class:"token punctuation"},"."),s("Multer"),n("span",{class:"token punctuation"},"."),s("File")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("file"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("      "),n("span",{class:"token keyword"},"throw"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"BadRequestException"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'no file uploaded'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token comment"},"// validate file type")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"const"),s(" allowedMimeTypes "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token string"},"'image/jpeg'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'image/png'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'application/pdf'"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("allowedMimeTypes"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"includes"),n("span",{class:"token punctuation"},"("),s("file"),n("span",{class:"token punctuation"},"."),s("mimetype"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("      "),n("span",{class:"token keyword"},"throw"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"BadRequestException"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'invalid file type'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token comment"},"// validate file size (e.g., max 5mb)")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"const"),s(" maxSize "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"5"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"1024"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token number"},"1024"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),s("file"),n("span",{class:"token punctuation"},"."),s("size "),n("span",{class:"token operator"},">"),s(" maxSize"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("      "),n("span",{class:"token keyword"},"throw"),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"BadRequestException"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'file is too large!'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token literal-property property"},"message"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'File uploaded successfully'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token literal-property property"},"filePath"),n("span",{class:"token operator"},":"),s(" file"),n("span",{class:"token punctuation"},"."),s("path "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),W=p('<p>We have done the necessary configurations to test the file upload.</p><hr><h2 id="how-to-test-the-file-upload" tabindex="-1"><a class="header-anchor" href="#how-to-test-the-file-upload"><span>How to Test the File Upload</span></a></h2><p>Testing is an important part of building features, in this section we‚Äôll test the file-upload feature using Postman, but you can use any similar tool to test the file upload endpoint. Let‚Äôs see our API in action!</p><p><strong>Post an image file with the</strong> <code>/file-upload/upload</code> endpoint:</p><figure><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1724616574064/c19015a7-5776-4148-838d-dd7acf5c3509.png" alt="postman test for the upload endpoint" tabindex="0" loading="lazy"><figcaption>postman test for the upload endpoint</figcaption></figure>',6),K=n("strong",null,"file-upload-example",-1),O=n("code",null,"uploads",-1),Z=n("hr",null,null,-1),$=n("h2",{id:"conclusion",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#conclusion"},[n("span",null,"Conclusion")])],-1),G=n("p",null,"Congratulations to you now that you‚Äôve successfully set up a file upload feature with Multer and NestJS. You configured the module, controller, and service to handle the files securely, and tested the endpoint.",-1),Q=n("p",null,"You should understand that these are basic and essential steps to uploading files. You can add to these by building more complex features like handling multiple file uploads, storage in cloud services, and so on.",-1),X={href:"https://github.com/dotun2203/nest-js-fileupload-demo",target:"_blank",rel:"noopener noreferrer"},nn=n("code",null,"dotun2203/nest-js-fileupload-demo",-1),sn={href:"https://x.com/Adedot1Abimbola",target:"_blank",rel:"noopener noreferrer"},en=n("code",null,"Adedot1Abimbola",-1);function an(r,tn){const u=c("VPCard"),o=c("router-link"),d=c("SiteInfo"),a=c("FontIcon"),k=c("Tabs");return b(),m("div",null,[n("h1",y,[n("a",_,[n("span",null,f(r.$frontmatter.title)+" Í¥ÄÎ†®",1)])]),e(u,g(v({title:"Nest.js > Article(s)",desc:"Article(s)",link:"/programming/js-nest/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),n("nav",j,[n("ul",null,[n("li",null,[e(o,{to:"#prerequisites"},{default:t(()=>[s("Prerequisites")]),_:1})]),n("li",null,[e(o,{to:"#how-to-set-up-the-project"},{default:t(()=>[s("How to Set up the Project")]),_:1})]),n("li",null,[e(o,{to:"#how-to-create-a-resource-for-file-upload"},{default:t(()=>[s("How to Create a Resource for File Upload")]),_:1})]),n("li",null,[e(o,{to:"#how-to-configure-the-file-upload-resource"},{default:t(()=>[s("How to Configure the File Upload Resource")]),_:1})]),n("li",null,[e(o,{to:"#how-to-test-the-file-upload"},{default:t(()=>[s("How to Test the File Upload")]),_:1})]),n("li",null,[e(o,{to:"#conclusion"},{default:t(()=>[s("Conclusion")]),_:1})])])]),x,e(d,{name:"How to Handle File Uploads in NestJS with Multer",desc:"Authentication is a very important aspect of software development. It is the process of verifying a user‚Äôs identity. Authentication ensures that only authorized individuals access specific resources or perform certain actions within a system. It provides accountability by enabling the tracking of user actions and holding individuals responsible for their...",url:"https://freecodecamp.org/news/how-to-handle-file-uploads-in-nestjs-with-multer/",logo:"https://cdn.freecodecamp.org/universal/favicons/favicon.ico",preview:"https://cdn.hashnode.com/res/hashnode/image/upload/v1724695369812/b0511a24-bbb6-4dae-9ccf-b511383b8f6a.png"}),F,n("p",null,[s("This command creates a resource "),U,s(" in the "),e(a,{icon:"fas fa-folder-open"}),S,s(" directory: module, controller and service, to manage file uploads.")]),n("p",null,[s("."),e(a,{icon:"iconfont icon-typsecript"}),H,s(" organizes the file upload logic, "),e(a,{icon:"iconfont icon-typescript"}),M,s(" handles incoming file upload requests, and "),e(a,{icon:"iconfont icon-typsecript"}),N,s(" handles the file upload operations. With the resource created, let‚Äôs configure the module, service and controller.")]),A,C,n("p",null,[s("In this section we‚Äôll configure the "),e(a,{icon:"iconfont icon-typsecript"}),I,s(),e(a,{icon:"iconfont icon-typsecript"}),T,s(" and "),e(a,{icon:"iconfont icon-typsecript"}),P,s(" files.")]),e(k,{id:"93",data:[{id:"Module configuration"},{id:"Controller configuration"},{id:"Service configuration"}]},{title0:t(({value:l,isActive:i})=>[s("Module configuration")]),title1:t(({value:l,isActive:i})=>[s("Controller configuration")]),title2:t(({value:l,isActive:i})=>[s("Service configuration")]),tab0:t(({value:l,isActive:i})=>[J,n("p",null,[s("Above is the "),e(a,{icon:"iconfont icon-typsecript"}),R,s(" file, where we configured the "),q,s(" to specify the upload destination and how it should name the file.")])]),tab1:t(({value:l,isActive:i})=>[E,n("p",null,[s("Is the "),e(a,{icon:"iconfont icon-typsecript"}),z,s(" file above, a "),B,s(" route is created to handle file uploads. The route listens for file uploads and passes the file to the service for processing")])]),tab2:t(({value:l,isActive:i})=>[V,Y,D,L]),_:1}),W,n("p",null,[s("After sending the request, check your response to ensure the file was uploaded successfully. And to further confirm the upload, check the "),K,s(" and you‚Äôll see the "),e(a,{icon:"fas fa-folder-open"}),O,s(" directory already created with the file you uploaded.")]),Z,$,G,Q,n("p",null,[s("I really enjoyed working on this demo, and I hope you also find it helpful. For your convenience, the project repository is "),n("a",X,[s("avalilable on Github ("),e(a,{icon:"iconfont icon-github"}),nn,s(")")]),s(". You can also connect with me on "),n("a",sn,[s("Twitter ("),e(a,{icon:"fa-brands fa-x-twitter"}),en,s(")")]),s(". I‚Äôd love to hear from you.")])])}const cn=h(w,[["render",an],["__file","how-to-handle-file-uploads-in-nestjs-with-multer.html.vue"]]),pn=JSON.parse('{"path":"/freecodecamp.org/how-to-handle-file-uploads-in-nestjs-with-multer.html","title":"How to Handle File Uploads in NestJS with Multer","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"How to Handle File Uploads in NestJS with Multer","description":"Article(s) > How to Handle File Uploads in NestJS with Multer","icon":"iconfont icon-nestjs","category":["Node.js","Nest.js","Article(s)"],"tag":["blog","freecodecamp.org","node","nodejs","nest","nestjs","typeorm"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > How to Handle File Uploads in NestJS with Multer"},{"property":"og:description","content":"How to Handle File Uploads in NestJS with Multer"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/freecodecamp.org/how-to-handle-file-uploads-in-nestjs-with-multer.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/freecodecamp.org/how-to-handle-file-uploads-in-nestjs-with-multer.html"}],["meta",{"property":"og:site_name","content":"üìöBookshelf"}],["meta",{"property":"og:title","content":"How to Handle File Uploads in NestJS with Multer"}],["meta",{"property":"og:description","content":"Article(s) > How to Handle File Uploads in NestJS with Multer"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://cdn.hashnode.com/res/hashnode/image/upload/v1724695369812/b0511a24-bbb6-4dae-9ccf-b511383b8f6a.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://cdn.hashnode.com/res/hashnode/image/upload/v1724695369812/b0511a24-bbb6-4dae-9ccf-b511383b8f6a.png"}],["meta",{"name":"twitter:image:alt","content":"How to Handle File Uploads in NestJS with Multer"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"freecodecamp.org"}],["meta",{"property":"article:tag","content":"node"}],["meta",{"property":"article:tag","content":"nodejs"}],["meta",{"property":"article:tag","content":"nest"}],["meta",{"property":"article:tag","content":"nestjs"}],["meta",{"property":"article:tag","content":"typeorm"}],["meta",{"property":"article:published_time","content":"2024-07-28T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"How to Handle File Uploads in NestJS with Multer\\",\\"image\\":[\\"https://cdn.hashnode.com/res/hashnode/image/upload/v1724616574064/c19015a7-5776-4148-838d-dd7acf5c3509.png\\"],\\"datePublished\\":\\"2024-07-28T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[]}"]],"prev":"/programming/js-nest/articles/README.md","date":"2024-07-28T00:00:00.000Z","isOriginal":false,"cover":"https://cdn.hashnode.com/res/hashnode/image/upload/v1724695369812/b0511a24-bbb6-4dae-9ccf-b511383b8f6a.png"},"headers":[{"level":2,"title":"Prerequisites","slug":"prerequisites","link":"#prerequisites","children":[]},{"level":2,"title":"How to Set up the Project","slug":"how-to-set-up-the-project","link":"#how-to-set-up-the-project","children":[]},{"level":2,"title":"How to Create a Resource for File Upload","slug":"how-to-create-a-resource-for-file-upload","link":"#how-to-create-a-resource-for-file-upload","children":[]},{"level":2,"title":"How to Configure the File Upload Resource","slug":"how-to-configure-the-file-upload-resource","link":"#how-to-configure-the-file-upload-resource","children":[]},{"level":2,"title":"How to Test the File Upload","slug":"how-to-test-the-file-upload","link":"#how-to-test-the-file-upload","children":[]},{"level":2,"title":"Conclusion","slug":"conclusion","link":"#conclusion","children":[]}],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":3.67,"words":1100},"filePathRelative":"freecodecamp.org/how-to-handle-file-uploads-in-nestjs-with-multer.md","localizedDate":"2024ÎÖÑ 7Ïõî 28Ïùº","excerpt":"\\n"}');export{cn as comp,pn as data};
