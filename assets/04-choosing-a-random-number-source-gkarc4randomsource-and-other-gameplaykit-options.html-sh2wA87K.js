import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as u,b as e,t as d,e as t,n as s,g as r,d as n,w as m,f as h,r as o,o as g}from"./app-BgNevrm5.js";const y={},f={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},k={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},w=e("nav",{class:"table-of-contents"},[e("ul")],-1),b=e("hr",null,null,-1),_=e("p",null,"Using the system's built-in random number source is exactly what you want when you just need something simple. But the system's random number generator is not deterministic, which means you can't predict what numbers it will output because it always starts in a different state â€“ and that makes it useless for synchronizing network games.",-1),v=e("p",null,"Using the system's random number source is also useless to avoid cheating. If someone is playing a brilliant strategy game you made and loses a battle because a dice roll didn't go their way, they could quickly quit the app, relaunch, and try the battle again hoping that the random roll would go differently for them.",-1),R=e("code",null,"NSCoding",-1),C=e("p",null,"The reason GameplayKit has three sources of random numbers is simple: generating random numbers is hard, so you get to choose whether you want something simple and fast, complex and slow, or somewhere in the middle. That is, if you know the result of your random number doesn't matter that much and you're going to need thousands quickly, you can use the faster-but-less-random option.",-1),G={href:"https://en.wiktionary.org/wiki/you_pays_your_money_and_you_takes_your_choice",target:"_blank",rel:"noopener noreferrer"},K=h(`<p>The three options are:</p><ul><li><strong>GKLinearCongruentialRandomSource</strong>: has high performance but the lowest randomness</li><li><strong>GKMersenneTwisterRandomSource</strong>: has high randomness but the lowest performance</li><li><strong>GKARC4RandomSource</strong>: has good performance and good randomness â€“ in the words of Apple, &quot;it&#39;s going to be your Goldilocks random source.&quot;</li></ul><p>Honestly, the performance difference between the three of these is all but insignificant unless you&#39;re generating vast quantities of random numbers.</p><p>So, to generate a random number between 0 and 19 using an ARC4 random source that you can save to disk, you&#39;d use this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> arc4 <span class="token operator">=</span> <span class="token class-name">GKARC4RandomSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">arc4<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>upperBound<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>If you really want the maximum possible randomness for your app or game, try the Mersenne Twister source instead:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> mersenne <span class="token operator">=</span> <span class="token class-name">GKMersenneTwisterRandomSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">mersenne<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span>upperBound<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>As you can see, once you&#39;ve created the random source the method calls on it are identical â€“ all you&#39;ve done is change the underlying random number generator.</p><p>Before continuing, you should know that Apple recommends you force flush its ARC4 random number generator before using it for anything important, otherwise it will generate sequences that can be guessed to begin with. Apple suggests dropping at least the first 769 values, so I suspect most coders will round up to the nearest pleasing value: 1024. To drop values, use this code:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line">arc4<span class="token punctuation">.</span><span class="token function">dropValues</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Regardless of which source you choose, Apple goes to great lengths to point out that none of them are recommended for cryptography purposes. Apps, yes, games, yes, but not cryptography â€“ sorry!</p>`,11);function S(i,A){const a=o("VPCard"),c=o("RouteLink"),l=o("FontIcon");return g(),u("div",null,[e("h1",f,[e("a",k,[e("span",null,d(i.$frontmatter.title)+" ê´€ë ¨",1)])]),t(a,s(r({title:"Hacking with iOS â€“ learn to code iPhone and iPad apps with free Swift tutorials",desc:"Learn Swift coding for iOS with these free tutorials â€“ learn Swift, iOS, and Xcode",link:"/hackingwithswift.com/read/README.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),w,b,t(a,s(r({title:"Choosing a random number source: GKARC4RandomSource and other GameplayKit options | Hacking with iOS",desc:"Choosing a random number source: GKARC4RandomSource and other GameplayKit options",link:"https://hackingwithswift.com/read/35/4/choosing-a-random-number-source-gkarc4randomsource-and-other-gameplaykit-options",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),_,v,e("p",null,[n("GameplayKit offers three custom sources of random numbers, all of which are deterministic, and all of which can be serialized â€“ i.e., written out to disk using something like "),R,n(" that we looked at in "),t(c,{to:"/hackingwithswift.com/read/12/overview.html"},{default:m(()=>[n("project 12")]),_:1}),n(". This means network play can be synchronized and cheaters are unable to force their way around your game â€“ a win all around!")]),C,e("p",null,[n("Alternatively, if you need one random number but it's got to be as random as they come, you can use the more intensive algorithm. In short, "),e("a",G,[t(l,{icon:"fa-brands fa-wikipedia-w"}),n("you pays your money and you takes your choice.")])]),K])}const O=p(y,[["render",S],["__file","04-choosing-a-random-number-source-gkarc4randomsource-and-other-gameplaykit-options.html.vue"]]),B=JSON.parse('{"path":"/hackingwithswift.com/read/35/04-choosing-a-random-number-source-gkarc4randomsource-and-other-gameplaykit-options.html","title":"Choosing a random number source: GKARC4RandomSource and other GameplayKit options","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Choosing a random number source: GKARC4RandomSource and other GameplayKit options","description":"Article(s) > Choosing a random number source: GKARC4RandomSource and other GameplayKit options","category":["Swift","iOS","Article(s)"],"tag":["blog","hackingwithswift.com","crashcourse","swift","xcode","appstore","ios"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > Choosing a random number source: GKARC4RandomSource and other GameplayKit options"},{"property":"og:description","content":"Choosing a random number source: GKARC4RandomSource and other GameplayKit options"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/35/04-choosing-a-random-number-source-gkarc4randomsource-and-other-gameplaykit-options.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/35/04-choosing-a-random-number-source-gkarc4randomsource-and-other-gameplaykit-options.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Choosing a random number source: GKARC4RandomSource and other GameplayKit options"}],["meta",{"property":"og:description","content":"Article(s) > Choosing a random number source: GKARC4RandomSource and other GameplayKit options"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"hackingwithswift.com"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:tag","content":"ios"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Choosing a random number source: GKARC4RandomSource and other GameplayKit options\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]],"isOriginal":false},"headers":[],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":2.4,"words":721},"filePathRelative":"hackingwithswift.com/read/35/04-choosing-a-random-number-source-gkarc4randomsource-and-other-gameplaykit-options.md","excerpt":"\\n"}');export{O as comp,B as data};
