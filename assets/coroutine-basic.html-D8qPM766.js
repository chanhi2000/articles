import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as d,b as n,t as k,e,n as m,g as v,w as p,a,f as s,r as l,o as g,d as i}from"./app-BgNevrm5.js";const b={},h={id:"frontmatter-title-관련",tabindex:"-1"},f={class:"header-anchor",href:"#frontmatter-title-관련"},y={class:"table-of-contents"},w=n("hr",null,null,-1),_=s(`<blockquote><p>안녕하세요. 강남언니에서 Android 개발을 맡고 있는 David 입니다.</p><p>이번 글에서는 Coroutine의 기본적인 사용 방법과 왜 Coroutine을 써야하는지에 대하여 다뤄보도록 하겠습니다.</p></blockquote><p><strong>coroutine</strong> 이 <strong>light-weight thread</strong> 같다 라고 말합니다.</p><p>그 이유는 Kotlin에서의 coroutine은 자신만의 stack이 존재하지 않으며</p><p>(C#, Scala, Kotlin의 coroutine은 stackless이며 Quasar, Javaflow에서의 coroutine은 stackful 입니다.)</p><p>native thread와 mapping 되지 않기 때문에 context switchig이 필요하지 않습니다.</p><p>그리고 coroutine은 thread 와 비슷한 역할을 합니다.</p><p>어떤 점이 서로 비슷한지 알아보도록 하겠습니다.</p><p>아래 코드를 실행시키면 어떤 결과가 나올까요?</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  thread <span class="token punctuation">{</span></span>
<span class="line">    Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;World!&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Hello,&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9),x=s(`<p>결과는 다음과 같습니다.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">Hello,</span>
<span class="line">World<span class="token operator">!</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Thread.sleep()</code> 메서드는 blocking 메서드 이기 때문에</p><p>&quot;Hello,&quot; 문자열이 먼저 나타나고 1초 뒤에 &quot;World!&quot;가 나타납니다.</p><p>이번에는 thread 대신에 <code>GlobalScope.launch</code> 를 이용하여 실행을 시켜보도록 하겠습니다.</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  GlobalScope<span class="token punctuation">.</span><span class="token function">launch</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;World!&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Hello,&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),q=s(`<p>결과는 역시 똑같습니다.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">Hello,</span>
<span class="line">World<span class="token operator">!</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>위의 결과를 봤을때 다음과 같이 나타낼 수 있습니다.</p><ul><li><code>GlobalScope.launch { … }</code> ≒ <code>thread { … }</code></li><li><code>delay(…)</code> ≒ <code>Thread.sleep(…)</code></li></ul><p>여기서 주의해야할 부분은 <code>delay()</code> 메서드는 <strong>coroutine scope</strong> 안에서만 동작합니다.</p><p><code>main</code> 함수에서 <code>delay()</code> 메서드를 사용하고 싶다면</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> runBlocking <span class="token punctuation">{</span></span>
<span class="line">  GlobalScope<span class="token punctuation">.</span><span class="token function">launch</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;World!&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Hello,&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),T=s(`<p>main 함수에 <strong>runBlocking {...}</strong> coroutine scope를 설정하면 사용할 수 있습니다.</p><p>coroutine은 thread 와 비슷한 동작을 하는데 왜 coroutine을 사용해야할까요?</p><h2 id="_1-thread-보다-더-좋은-performance를-나타내기-때문입니다" tabindex="-1"><a class="header-anchor" href="#_1-thread-보다-더-좋은-performance를-나타내기-때문입니다"><span>1. thread 보다 더 좋은 performance를 나타내기 때문입니다.</span></a></h2><p>만약 10만번 반복되는 작업을 실행하고 싶으면 어떻게 해야할까요?</p><p>일반적으로 thread를 생성하여 작업을 실행합니다.</p><p>아래 코드는 100_000개의 thread를 실행시키는 코드입니다.</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> rubBlocking <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">100_000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    thread <span class="token punctuation">{</span></span>
<span class="line">      Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),j=s(`<p>해당 코드를 실행시키면</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">out-of-memory error</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>메모리 부족으로 OOM 에러가 나타납니다.</p><p>thread 생성할 수 있는 개수가 제한되어 있기 때문에</p><figure><img src="https://static.blog.gangnamunni.com/files/d5ddc5c5-8326-4720-87bd-f396ae953380" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>thread pool를 이용하여 thread를 관리하면 10만번 반복되는 작업을 실행시킬 수 있습니다.</p><p>하지만 thread pool을 이용하여 개발을 하면 코드가 길어지고 잘못 사용할 경우에는 memory leak이 발생하고</p><p>개발자가 신경써야할 부분이 많아집니다.</p><p><strong>coroutine</strong> 으로 10만번 작업을 실행하면 어떤 결과가 나올까요?</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> runBlocking <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">100_000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    launch <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10),O=s(`<p>결과는</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">...........</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>예상한대로 &quot;.&quot;이 10만번 찍힙니다.</p><p>thread 사용하면 생성하는데 비용이 들고 여러개의 thread를 생성하면 OOM이 일어나지만</p><p>coroutine을 사용하면 많이 생성하더라도 아주 훌륭한 performance를 보여줍니다.</p><hr><h2 id="_2-반복되는-작업을-쉽게-취소할-수-있습니다" tabindex="-1"><a class="header-anchor" href="#_2-반복되는-작업을-쉽게-취소할-수-있습니다"><span>2. 반복되는 작업을 쉽게 취소할 수 있습니다.</span></a></h2><p>다음과 같이 반복되는 작업을 하고 있을때 해당 작업을 취소하고 싶으면 어떻게 해야할까요?</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> runBlocking <span class="token punctuation">{</span></span>
<span class="line">  thread <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;running...&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9),B=s(`<p>thread 의 생명주기를 보면</p><figure><img src="https://static.blog.gangnamunni.com/files/5b677dcb-9596-4cf9-a959-a6a4c2683c93" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>thread가 생성되고 <code>start()</code> 메서드를 호출하면 작업이 실행됩니다.</p><p><code>stop()</code> 메서드를 이용하면 thread를 종료시킬 수 있습니다.</p><p>다음은 3초뒤에 스레드를 종료시키는 코드입니다.</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> runBlocking <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> thread <span class="token operator">=</span> thread <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;running...&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span></span>
<span class="line">    thread<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),C=s(`<p>결과는</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">running...</span>
<span class="line">running...</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>&quot;running...&quot; 이 두번 찍히고 종료됩니다.</p><p>하지만 <code>stop()</code> 메서드를 보면</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * <span class="token keyword">@deprecated</span> This method is inherently unsafe. Stopping a thread with</span>
<span class="line"> *       Thread.stop causes it to unlock all of the monitors that it</span>
<span class="line"> *       has locked (as a natural consequence of the unchecked</span>
<span class="line"> */</span></span>
<span class="line"><span class="token annotation punctuation">@Deprecated</span><span class="token punctuation">(</span>since<span class="token operator">=</span><span class="token string">&quot;1.2&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Java 1.2 버전부터 Deprecated 됬으며 사용하는것을 권장하지 않고 있습니다.</p><p>그러면 어떻게 thread를 종료 시켜야 할까요?</p><p>방법은 thread를 Interrupting 하여 종료 시켜야 합니다.</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">fun</span> main <span class="token operator">=</span> runBlocking <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> thread <span class="token operator">=</span> thread <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>Thread<span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;running...&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> InterruptedException<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span></span>
<span class="line">    thread<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9),D=s(`<p>2가지를 설정해줘야 하는데 interrupt state가 설정되었는지 확인을 해야합니다.</p><p>반복되는 작업에 <code>Thread.interrupted()</code> 메서드를 호출하여 매번 확인을 합니다.</p><p>그리고 interrupt를 한후 <code>sleep()</code> 같은 Blocking 메서드가 호출되었을 경우 InterruptedException이 일어납니다.</p><p>Blocking 메서드를 호출할 경우 try-catch로 감싸줘야합니다.</p><h3 id="coroutine-에서는-어떻게-작업을-취소할-수-있을까요" tabindex="-1"><a class="header-anchor" href="#coroutine-에서는-어떻게-작업을-취소할-수-있을까요"><span><strong>coroutine</strong> 에서는 어떻게 작업을 취소할 수 있을까요?</span></a></h3><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> runBlocking <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">val</span> job <span class="token operator">=</span> launch <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;running...&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span></span>
<span class="line">    job<span class="token punctuation">.</span><span class="token function">cancelAndJoin</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),S=s(`<p>아주 간단하게 <code>cancelAndJoin()</code> 메서드를 호출하면 해당 작업을 취소 할 수 있습니다.</p><p><code>launch()</code> 메서드를 보면 <code>Job</code> 을 return 합니다. 그리고 어떠한 결과 값을 받을 수 없습니다.</p><figure><img src="https://static.blog.gangnamunni.com/files/4900040b-0d0a-49b6-8b78-9e0e70c6264f" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>thread 와 비슷하게 동작은 하지만 thread에 비하여 작업을 쉽게 취소할 수 있다라는 장점이 있습니다.</p><hr><h2 id="세번째-비동기-병렬-처리를-쉽게-할-수-있습니다" tabindex="-1"><a class="header-anchor" href="#세번째-비동기-병렬-처리를-쉽게-할-수-있습니다"><span>세번째, 비동기 병렬 처리를 쉽게 할 수 있습니다.</span></a></h2><p>다음과 같은 코드를 실행시켰을 경우 결과가 어떻게 나올까요?</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> runBlocking <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> time <span class="token operator">=</span> measureTimeMillis <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">val</span> one <span class="token operator">=</span> <span class="token function">doSomethingUsefulOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">val</span> two <span class="token operator">=</span> <span class="token function">doSomethingUsefulTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;The answer is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">one <span class="token operator">+</span> two</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Completed in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">time</span></span><span class="token string"> ms&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">doSomethingUsefulOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">13</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">doSomethingUsefulTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">29</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8),A=s(`<p>결과는</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">The answer is <span class="token number">42</span></span>
<span class="line">Completed <span class="token keyword">in</span> <span class="token number">2009</span> ms</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>값은 42이지만 시간은 2초가 걸렸습니다.</p><p>각 메서드에 1초씩 delay 되었기 때문에 총 2초가 걸렸습니다.</p><p>해당 작업을 병렬로 처리하려면</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> runBlocking <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> time <span class="token operator">=</span> measureTimeMillis <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">val</span> one <span class="token operator">=</span> async <span class="token punctuation">{</span> <span class="token function">doSomethingUsefulOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">val</span> two <span class="token operator">=</span> async <span class="token punctuation">{</span> <span class="token function">doSomethingUsefulTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line">        <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;The answer is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">one<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> two<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Completed in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">time</span></span><span class="token string"> ms&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">doSomethingUsefulOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">13</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token function">doSomethingUsefulTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token number">29</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),J=s('<p>coroutine의 <code>async</code> 를 사용하면 쉽게 병렬처리를 할 수 있습니다.</p><p><code>async</code> 의 return 값은 <strong>Deferred</strong> 이며 Java의 <strong>Future</strong> 와 비슷하게 동작을 합니다.</p><p>thread를 이용하여 병렬처리 하는 방식보다 훨씬 더 간단하게 작성할 수 있다라는것을 알 수 있습니다.</p><p>이외에도 coroutine을 사용하면 쉽게 코드를 짤 수 있다라는 장점이 있습니다.</p><p>하지만 thread를 전혀 이해하지 못하고 무작정 coroutine을 사용하는것은 권장하지 않습니다.</p><p>면접에서 thread 동작원리에 대하여 질문을 하면 대부분 답을 못하시는 분들이 많습니다.</p><p>thread 동작원리도 모르는데 RxJava를 사용하신분들이 많으신데 그럴경우 RxJava를 잘못 사용할 경우가 큽니다.</p><p>thread에 대하여 충분한 학습을 한 뒤 coroutine을 학습하고</p><p>RxJava와 coroutine의 차이점에 대하여도 분석하는것도 추천드립니다.</p><hr><h2 id="출처" tabindex="-1"><a class="header-anchor" href="#출처"><span>출처</span></a></h2>',11);function I(c,K){const u=l("VPCard"),t=l("router-link"),o=l("SiteInfo");return g(),d("div",null,[n("h1",h,[n("a",f,[n("span",null,k(c.$frontmatter.title)+" 관련",1)])]),e(u,m(v({title:"Java > Article(s)",desc:"Article(s)",link:"/programming/java/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),n("nav",y,[n("ul",null,[n("li",null,[e(t,{to:"#_1-thread-보다-더-좋은-performance를-나타내기-때문입니다"},{default:p(()=>[i("1. thread 보다 더 좋은 performance를 나타내기 때문입니다.")]),_:1})]),n("li",null,[e(t,{to:"#_2-반복되는-작업을-쉽게-취소할-수-있습니다"},{default:p(()=>[i("2. 반복되는 작업을 쉽게 취소할 수 있습니다.")]),_:1}),n("ul",null,[n("li",null,[e(t,{to:"#coroutine-에서는-어떻게-작업을-취소할-수-있을까요"},{default:p(()=>[i("coroutine 에서는 어떻게 작업을 취소할 수 있을까요?")]),_:1})])])]),n("li",null,[e(t,{to:"#세번째-비동기-병렬-처리를-쉽게-할-수-있습니다"},{default:p(()=>[i("세번째, 비동기 병렬 처리를 쉽게 할 수 있습니다.")]),_:1})]),n("li",null,[e(t,{to:"#출처"},{default:p(()=>[i("출처")]),_:1})])])]),w,e(o,{name:"Coroutine Basic",desc:"Coroutine 기초 내용",url:"https://blog.gangnamunni.com/post/coroutine_basic/",logo:"https://blog.gangnamunni.com/favicon.ico",preview:"https://blog.gangnamunni.com/_nuxt/img/ae65a45.jpg"}),_,a(" TODO: kotlin playground로 변경 "),x,a(" TODO: kotlin playground로 변경 "),q,a(" TODO: kotlin playground로 변경 "),T,a(" TODO: kotlin playground로 변경 "),j,a(" TODO: kotlin playground로 변경 "),O,a(" TODO: kotlin playground로 변경 "),B,a(" TODO: kotlin playground로 변경 "),C,a(" TODO: kotlin playground로 변경 "),D,a(" TODO: kotlin playground로 변경 "),S,a(" TODO: kotlin playground로 변경 "),A,a(" TODO: kotlin playground로 변경 "),J,e(o,{name:"Coroutines guide | Kotlin Documentation",desc:"Kotlin provides only minimal low-level APIs in its standard library to enable other libraries to utilize coroutines. Unlike many other languages with similar capabilities, async and await are not keywords in Kotlin and are not even part of its standard library. Moreover, Kotlin's concept of suspending function provides a safer and less error-prone abstraction for asynchronous operations than futures and promises.",url:"https://kotlinlang.org/docs/reference/coroutines/coroutines-guide.html",logo:"https://kotlinlang.org/assets/images/favicon.svg?v2",preview:"https://kotlinlang.org/assets/images/open-graph/docs.png"})])}const M=r(b,[["render",I],["__file","coroutine-basic.html.vue"]]),E=JSON.parse('{"path":"/blog.gangnamunni.com/coroutine-basic.html","title":"Coroutine Basic","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Coroutine Basic","description":"Article(s) > Coroutine Basic","icon":"iconfont icon-kotlin","category":["Java","Kotlin","Article(s)"],"tag":["blog","blog.gangnamunni.com","java","kotlin"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > Coroutine Basic"},{"property":"og:description","content":"Coroutine Basic"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.gangnamunni.com/coroutine-basic.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/blog.gangnamunni.com/coroutine-basic.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"Coroutine Basic"}],["meta",{"property":"og:description","content":"Article(s) > Coroutine Basic"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://blog.gangnamunni.com/_nuxt/img/ae65a45.jpg"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://blog.gangnamunni.com/_nuxt/img/ae65a45.jpg"}],["meta",{"name":"twitter:image:alt","content":"Coroutine Basic"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"blog.gangnamunni.com"}],["meta",{"property":"article:tag","content":"java"}],["meta",{"property":"article:tag","content":"kotlin"}],["meta",{"property":"article:published_time","content":"2019-08-20T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Coroutine Basic\\",\\"image\\":[\\"https://static.blog.gangnamunni.com/files/d5ddc5c5-8326-4720-87bd-f396ae953380\\",\\"https://static.blog.gangnamunni.com/files/5b677dcb-9596-4cf9-a959-a6a4c2683c93\\",\\"https://static.blog.gangnamunni.com/files/4900040b-0d0a-49b6-8b78-9e0e70c6264f\\"],\\"datePublished\\":\\"2019-08-20T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[]}"]],"prev":"/programming/java/articles/README.md","date":"2019-08-20T00:00:00.000Z","isOriginal":false,"cover":"https://blog.gangnamunni.com/_nuxt/img/ae65a45.jpg"},"headers":[{"level":2,"title":"1. thread 보다 더 좋은 performance를 나타내기 때문입니다.","slug":"_1-thread-보다-더-좋은-performance를-나타내기-때문입니다","link":"#_1-thread-보다-더-좋은-performance를-나타내기-때문입니다","children":[]},{"level":2,"title":"2. 반복되는 작업을 쉽게 취소할 수 있습니다.","slug":"_2-반복되는-작업을-쉽게-취소할-수-있습니다","link":"#_2-반복되는-작업을-쉽게-취소할-수-있습니다","children":[{"level":3,"title":"coroutine 에서는 어떻게 작업을 취소할 수 있을까요?","slug":"coroutine-에서는-어떻게-작업을-취소할-수-있을까요","link":"#coroutine-에서는-어떻게-작업을-취소할-수-있을까요","children":[]}]},{"level":2,"title":"세번째, 비동기 병렬 처리를 쉽게 할 수 있습니다.","slug":"세번째-비동기-병렬-처리를-쉽게-할-수-있습니다","link":"#세번째-비동기-병렬-처리를-쉽게-할-수-있습니다","children":[]},{"level":2,"title":"출처","slug":"출처","link":"#출처","children":[]}],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":2.29,"words":686},"filePathRelative":"blog.gangnamunni.com/coroutine-basic.md","localizedDate":"2019년 8월 20일","excerpt":"\\n"}');export{M as comp,E as data};
