import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as d,b as n,t as u,e as s,n as t,g as o,d as a,f as p,r as i,o as h}from"./app-BgNevrm5.js";const k={},m={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},f={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},w=n("nav",{class:"table-of-contents"},[n("ul")],-1),g=n("hr",null,null,-1),b=p(`<p>There&#39;s a reason I&#39;ve made you put the card functionality into a separate view controller, and it&#39;s because we&#39;re going to be adding some functionality to cards to handle them being flipped over. iOS makes this kind of animation really easy, but it&#39;s done in a slightly different way to our previous animations.</p><p>To handle tap detection we&#39;re going to use a <code>UITapGestureRecognizer</code> rather than something like <code>touchesBegan</code>. This will make more sense later on, but the TL;DR version is that part of the hoax effect will be you running your finger over the cards using your powers to &quot;feel&quot; for the star â€“ something like <code>touchesBegan()</code> will just cause problems.</p><p>So, please add this gesture recognizer to the end of <code>viewDidLoad()</code> in the <code>CardViewController</code> class:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> tap <span class="token operator">=</span> <span class="token class-name">UITapGestureRecognizer</span><span class="token punctuation">(</span>target<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">,</span> action<span class="token punctuation">:</span> <span class="token other-directive property">#selector</span><span class="token punctuation">(</span>cardTapped<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">back<span class="token punctuation">.</span>isUserInteractionEnabled <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">back<span class="token punctuation">.</span><span class="token function">addGestureRecognizer</span><span class="token punctuation">(</span>tap<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We haven&#39;t written the <code>cardTapped()</code> method yet, but it&#39;s trivial because all it will do is pass the message on to the <code>ViewController</code> class to handle. This is important: we need each card to decide if it was tapped, but we need to pass control onto the <code>ViewController</code> class to act upon the tap, otherwise it&#39;s possible users might tap two cards at the same time and cause problems.</p><p>So, the <code>cardTapped()</code> method in the card view controller is simple:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@objc</span> <span class="token keyword">func</span> <span class="token function-definition function">cardTapped</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    delegate<span class="token punctuation">.</span><span class="token function">cardTapped</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Of course, that just pushes all the work to the <code>ViewController</code> class, where things get more complicated. The <code>cardTapped()</code> method there needs to:</p><ul><li>Ensure that only one card can be tapped at any time</li><li>Loop through all the cards in the <code>allCards</code> array.</li><li>When it finds the card that was tapped, animate it to flip over then fade away.</li><li>For all other cards, animate them fading away.</li><li>Reset the game after two seconds so that more cards appear.</li></ul><p>We&#39;ll be doing the animation using methods inside <code>CardViewController</code>, and resetting the game is done just by calling <code>loadCards()</code>, so that&#39;s all straightforward. But what&#39;s the best way to ensure that only one card can be chosen by the player?</p><p>It turns out this is pretty easy: as soon as the user taps any card, we&#39;re going to disable user interaction for our main view. We can then check that property inside the <code>cardTapped()</code> method using the <code>guard</code> keyword, then set it back to true inside <code>loadCards()</code>.</p><p>To make things slightly more interesting, I want to introduce you to the <code>perform()</code> method family. These exist on objects that inherit from <code>NSObject</code>, which is both our view controllers, and allow us to call a method after a delay or in the background really easily.</p><p>Let&#39;s take this step by step. First, here&#39;s the <code>cardTapped()</code> method for the <code>ViewController</code> class:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">cardTapped</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> tapped<span class="token punctuation">:</span> <span class="token class-name">CardViewController</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">guard</span> view<span class="token punctuation">.</span>isUserInteractionEnabled <span class="token operator">==</span> <span class="token boolean">true</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">}</span></span>
<span class="line">    view<span class="token punctuation">.</span>isUserInteractionEnabled <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">for</span> card <span class="token keyword">in</span> allCards <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> card <span class="token operator">==</span> tapped <span class="token punctuation">{</span></span>
<span class="line">            card<span class="token punctuation">.</span><span class="token function">wasTapped</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            card<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span><span class="token other-directive property">#selector</span><span class="token punctuation">(</span>card<span class="token punctuation">.</span>wasntTapped<span class="token punctuation">)</span><span class="token punctuation">,</span> with<span class="token punctuation">:</span> <span class="token nil constant">nil</span><span class="token punctuation">,</span> afterDelay<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            card<span class="token punctuation">.</span><span class="token function">wasntTapped</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">perform</span><span class="token punctuation">(</span><span class="token other-directive property">#selector</span><span class="token punctuation">(</span>loadCards<span class="token punctuation">)</span><span class="token punctuation">,</span> with<span class="token punctuation">:</span> <span class="token nil constant">nil</span><span class="token punctuation">,</span> afterDelay<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can see that calls <code>wasTapped()</code> and <code>wasntTapped()</code> methods in the card view controllers, each of which will perform some animation â€“ we&#39;ll get onto that in a moment. Using the <code>afterDelay</code> variant of <code>perform()</code> will cause <code>wasntTapped()</code> to be called after 1 second, and <code>loadCards()</code> to be called after 2 seconds.</p><p>For now, focus on the first two lines of that method: that&#39;s what stops users tapping two cards at once. By disabling the user interaction (and also checking that it was enabled beforehand) we can be sure the user gets to make only one choice. But we do need to re-enable user interaction when we&#39;re done, otherwise our app will be useless.</p><p>So, add this line somewhere into the <code>loadCards()</code> method:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line">view<span class="token punctuation">.</span>isUserInteractionEnabled <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,18),v=n("code",null,"wasTapped()",-1),y=n("code",null,"wasntTapped()",-1),T=n("code",null,"wasntTapped()",-1),_=n("code",null,"CardViewController.swift",-1),C=p(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@objc</span> <span class="token keyword">func</span> <span class="token function-definition function">wasntTapped</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">UIView</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>withDuration<span class="token punctuation">:</span> <span class="token number">0.7</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>view<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token class-name">CGAffineTransform</span><span class="token punctuation">(</span>scaleX<span class="token punctuation">:</span> <span class="token number">0.00001</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0.00001</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>view<span class="token punctuation">.</span>alpha <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That tells the card to zoom down and fade away over 0.7 seconds. Things are more interesting in the <code>wasTapped()</code> method because it needs to animate a 3D flip effect from the card back to the card front. But if you were imagining this was going to be hard, you&#39;re wrong: this flip effect has been around since the earliest days of iOS, so Apple made it extremely easy.</p><p>Here is the <code>wasTapped()</code> method in its entirety:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">wasTapped</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">UIView</span><span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>with<span class="token punctuation">:</span> view<span class="token punctuation">,</span> duration<span class="token punctuation">:</span> <span class="token number">0.7</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span>transitionFlipFromRight<span class="token punctuation">]</span><span class="token punctuation">,</span> animations<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span><span class="token keyword">unowned</span> <span class="token keyword">self</span><span class="token punctuation">]</span> <span class="token keyword">in</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>back<span class="token punctuation">.</span>isHidden <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>front<span class="token punctuation">.</span>isHidden <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As you can see, all the work is done by the <code>transition(with:)</code> method. This takes a view to operate on as its first parameter, and all the animations you perform need to be done on subviews of this container view. We pass <code>.transitionFlipFromRight</code> to create the flip effect, but you should try using the code completion to explore other options.</p><p>Inside the animations block, we just adjust the <code>isHidden</code> properties of the front and back image views, but in the context of <code>.transitionFlipFromRight</code> that will cause iOS to animate this change as a flip â€“ it really is that simple.</p><p>That&#39;s it! Run the project now and you&#39;ll find you can tap on any card to flip it over â€“ a neat effect with hardly any code. Thanks, iOS!</p>`,7);function A(c,S){const e=i("VPCard"),l=i("FontIcon");return h(),d("div",null,[n("h1",m,[n("a",f,[n("span",null,u(c.$frontmatter.title)+" ê´€ë ¨",1)])]),s(e,t(o({title:"Hacking with iOS â€“ learn to code iPhone and iPad apps with free Swift tutorials",desc:"Learn Swift coding for iOS with these free tutorials â€“ learn Swift, iOS, and Xcode",link:"/hackingwithswift.com/read/README.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),w,g,s(e,t(o({title:"Animating a 3D flip effect using transition(with:) | Hacking with iOS",desc:"Animating a 3D flip effect using transition(with:)",link:"https://hackingwithswift.com/read/37/3/animating-a-3d-flip-effect-using-transitionwith",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),b,n("p",null,[a("Now all we need to do is write the "),v,a(" and "),y,a(" methods of the card view controller. We'll do "),T,a(" first because it uses code you already know, so re-open "),s(l,{icon:"fa-brands fa-swift"}),_,a(" and add this:")]),C])}const j=r(k,[["render",A],["__file","03-animating-a-3d-flip-effect-using-transitionwith.html.vue"]]),V=JSON.parse('{"path":"/hackingwithswift.com/read/37/03-animating-a-3d-flip-effect-using-transitionwith.html","title":"Animating a 3D flip effect using transition(with:)","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Animating a 3D flip effect using transition(with:)","description":"Article(s) > Animating a 3D flip effect using transition(with:)","category":["Swift","iOS","Article(s)"],"tag":["blog","hackingwithswift.com","crashcourse","swift","xcode","appstore","ios"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > Animating a 3D flip effect using transition(with:)"},{"property":"og:description","content":"Animating a 3D flip effect using transition(with:)"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/37/03-animating-a-3d-flip-effect-using-transitionwith.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/37/03-animating-a-3d-flip-effect-using-transitionwith.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Animating a 3D flip effect using transition(with:)"}],["meta",{"property":"og:description","content":"Article(s) > Animating a 3D flip effect using transition(with:)"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"hackingwithswift.com"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:tag","content":"ios"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Animating a 3D flip effect using transition(with:)\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]],"isOriginal":false},"headers":[],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":3.61,"words":1084},"filePathRelative":"hackingwithswift.com/read/37/03-animating-a-3d-flip-effect-using-transitionwith.md","excerpt":"\\n"}');export{j as comp,V as data};
