import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as k,b as n,t as v,e as s,n as m,g as b,w as l,d as a,f as e,r as p,o as h}from"./app-BgNevrm5.js";const g={},y={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},_={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},I={class:"table-of-contents"},E=n("hr",null,null,-1),w=e('<h2 id="unit-overview" tabindex="-1"><a class="header-anchor" href="#unit-overview"><span>Unit overview</span></a></h2><ul><li>modern applications tend to be more complex, and most of them use Docker</li><li>we will build &amp; deploy an application that runs in a Docker container</li></ul><hr><h2 id="introduction-to-aws-elastic-beanstalk" tabindex="-1"><a class="header-anchor" href="#introduction-to-aws-elastic-beanstalk"><span>Introduction to AWS Elastic Beanstalk</span></a></h2><p>AWS Elastic Beanstalk (AWS EB) is a service that allows us to deploy an application in the AWS cloud without having to worry about managing the virtual server(s) that runs it</p><hr><h2 id="creating-a-new-aws-elastic-beanstalk-application" tabindex="-1"><a class="header-anchor" href="#creating-a-new-aws-elastic-beanstalk-application"><span>Creating a new AWS Elastic Beanstalk application</span></a></h2><ul><li>when creating an EB app, choose the <em>Docker</em> platform and deploy the sample app</li><li>AWS EB will use two AWS services to run the application: <ul><li>EC2 (virtual servers)</li><li>S3 (storage)</li></ul></li><li>to deploy a new version, go to the environment in EB and upload the file in templates called <code>Dockerrun.aws.public.json</code></li></ul>',8),S=n("code",null,"Dockerrun.aws.public.json",-1),P=e(`<div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;AWSEBDockerrunVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;Image&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;Name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nginx&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;Ports&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;ContainerPort&quot;</span><span class="token operator">:</span> <span class="token number">80</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="creating-the-dockerfile" tabindex="-1"><a class="header-anchor" href="#creating-the-dockerfile"><span>Creating the Dockerfile</span></a></h2><ul><li>create a new file called <code>Dockerfile</code> in the root of the project</li><li>add the following contents to it:</li></ul><div class="language-docker line-numbers-mode" data-highlighter="prismjs" data-ext="docker" data-title="docker"><pre><code><span class="line"><span class="token instruction"><span class="token keyword">FROM</span> nginx:1.20-alpine</span></span>
<span class="line"><span class="token instruction"><span class="token keyword">COPY</span> build /usr/share/nginx/html</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">ðŸ“šResources</p><ul><li><a href="https://hub.docker.com/_/nginx" target="_blank" rel="noopener noreferrer">Official build of Nginx on Dockerhub</a></li></ul></div><hr><h2 id="building-the-docker-image" tabindex="-1"><a class="header-anchor" href="#building-the-docker-image"><span>Building the Docker image</span></a></h2><ul><li>to build the Docker image, we will use the command <code>docker build</code></li><li>to build Docker images from a GitLab CI pipeline, we need to start the Docker Daemon as a service</li></ul>`,9),R={class:"hint-container important"},f=n("p",{class:"hint-container-title"},"Pipeline after this lecture",-1),A=e(`<code>.gitlab-ci.yml</code><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">stages</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token punctuation">-</span> build</span>
<span class="line">  <span class="token punctuation">-</span> package</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">variables</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">APP_VERSION</span><span class="token punctuation">:</span> $CI_PIPELINE_IID</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">build website</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span>16<span class="token punctuation">-</span>alpine</span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> yarn install</span>
<span class="line">    <span class="token punctuation">-</span> yarn lint</span>
<span class="line">    <span class="token punctuation">-</span> yarn test</span>
<span class="line">    <span class="token punctuation">-</span> yarn build</span>
<span class="line">    <span class="token punctuation">-</span> echo $APP_VERSION <span class="token punctuation">&gt;</span> build/version.html</span>
<span class="line">  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">paths</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> build</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">build docker image</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> package</span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> docker<span class="token punctuation">:</span>20.10.12</span>
<span class="line">  <span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> docker<span class="token punctuation">:</span>20.10.12<span class="token punctuation">-</span>dind</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> echo $CI_REGISTRY_PASSWORD <span class="token punctuation">|</span> docker login <span class="token punctuation">-</span>u $CI_REGISTRY_USER $CI_REGISTRY <span class="token punctuation">-</span><span class="token punctuation">-</span>password<span class="token punctuation">-</span>stdin</span>
<span class="line">    <span class="token punctuation">-</span> docker build <span class="token punctuation">-</span>t $CI_REGISTRY_IMAGE <span class="token punctuation">-</span>t $CI_REGISTRY_IMAGE<span class="token punctuation">:</span>$APP_VERSION .</span>
<span class="line">    <span class="token punctuation">-</span> docker image ls</span>
<span class="line">    <span class="token punctuation">-</span> docker push <span class="token punctuation">-</span><span class="token punctuation">-</span>all<span class="token punctuation">-</span>tags $CI_REGISTRY_IMAGE</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),$=e('<div class="hint-container info"><p class="hint-container-title">ðŸ“šResources</p><ul><li><a href="https://docs.docker.com/engine/reference/commandline/build/" target="_blank" rel="noopener noreferrer">docker build command reference</a></li><li><a href="https://hub.docker.com/_/docker" target="_blank" rel="noopener noreferrer">Docker in Docker (dind) on Dockerhub</a></li><li><a href="https://docs.gitlab.com/ee/ci/variables/predefined_variables.html" target="_blank" rel="noopener noreferrer">Predefined variables in GitLab</a></li><li><a href="https://docs.docker.com/engine/reference/commandline/image_ls/" target="_blank" rel="noopener noreferrer"><code>docker image ls</code></a></li></ul></div><hr><h2 id="docker-container-registry" tabindex="-1"><a class="header-anchor" href="#docker-container-registry"><span>Docker container registry</span></a></h2><ul><li>to preserve a Docker image, we need to push it to a registry</li><li>Dockerhub is a public registry with Docker images</li><li>GitLab offers a private Docker registry which is ideal for private projects</li></ul>',4),D={class:"hint-container important"},C=n("p",{class:"hint-container-title"},"Pipeline after this lecture",-1),G=e(`<code>.gitlab-ci.yml</code><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">stages</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token punctuation">-</span> build</span>
<span class="line">  <span class="token punctuation">-</span> package</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">variables</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">APP_VERSION</span><span class="token punctuation">:</span> $CI_PIPELINE_IID</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">build website</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span>16<span class="token punctuation">-</span>alpine</span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> yarn install</span>
<span class="line">    <span class="token punctuation">-</span> yarn lint</span>
<span class="line">    <span class="token punctuation">-</span> yarn test</span>
<span class="line">    <span class="token punctuation">-</span> yarn build</span>
<span class="line">    <span class="token punctuation">-</span> echo $APP_VERSION <span class="token punctuation">&gt;</span> build/version.html</span>
<span class="line">  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">paths</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> build</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">build docker image</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> package</span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> docker<span class="token punctuation">:</span>20.10.12</span>
<span class="line">  <span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> docker<span class="token punctuation">:</span>20.10.12<span class="token punctuation">-</span>dind</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> echo $CI_REGISTRY_PASSWORD <span class="token punctuation">|</span> docker login <span class="token punctuation">-</span>u $CI_REGISTRY_USER $CI_REGISTRY <span class="token punctuation">-</span><span class="token punctuation">-</span>password<span class="token punctuation">-</span>stdin</span>
<span class="line">    <span class="token punctuation">-</span> docker build <span class="token punctuation">-</span>t $CI_REGISTRY_IMAGE <span class="token punctuation">-</span>t $CI_REGISTRY_IMAGE<span class="token punctuation">:</span>$APP_VERSION .</span>
<span class="line">    <span class="token punctuation">-</span> docker image ls</span>
<span class="line">    <span class="token punctuation">-</span> docker push <span class="token punctuation">-</span><span class="token punctuation">-</span>all<span class="token punctuation">-</span>tags $CI_REGISTRY_IMAGE</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),N=e('<div class="hint-container info"><p class="hint-container-title">ðŸ“šResources</p><ul><li><a href="https://docs.docker.com/engine/reference/commandline/login/" target="_blank" rel="noopener noreferrer">docker login command reference</a></li><li><a href="https://docs.docker.com/engine/reference/commandline/push/" target="_blank" rel="noopener noreferrer">docker push command reference</a></li></ul></div><hr><h2 id="testing-the-container" tabindex="-1"><a class="header-anchor" href="#testing-the-container"><span>Testing the container</span></a></h2><ul><li>we want to test the container to see if the application running on it (web server) is working properly</li><li>to start the container, we will use the <code>services:</code> keyword</li></ul>',4),T={class:"hint-container important"},O=n("p",{class:"hint-container-title"},"Pipeline after this lecture",-1),j=e(`<code>.gitlab-ci.yml</code><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">stages</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token punctuation">-</span> build</span>
<span class="line">  <span class="token punctuation">-</span> package</span>
<span class="line">  <span class="token punctuation">-</span> test</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">variables</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">APP_VERSION</span><span class="token punctuation">:</span> $CI_PIPELINE_IID</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">build website</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span>16<span class="token punctuation">-</span>alpine</span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> yarn install</span>
<span class="line">    <span class="token punctuation">-</span> yarn lint</span>
<span class="line">    <span class="token punctuation">-</span> yarn test</span>
<span class="line">    <span class="token punctuation">-</span> yarn build</span>
<span class="line">    <span class="token punctuation">-</span> echo $APP_VERSION <span class="token punctuation">&gt;</span> build/version.html</span>
<span class="line">  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">paths</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> build</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">build docker image</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> package</span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> docker<span class="token punctuation">:</span>20.10.12</span>
<span class="line">  <span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> docker<span class="token punctuation">:</span>20.10.12<span class="token punctuation">-</span>dind</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> echo $CI_REGISTRY_PASSWORD <span class="token punctuation">|</span> docker login <span class="token punctuation">-</span>u $CI_REGISTRY_USER $CI_REGISTRY <span class="token punctuation">-</span><span class="token punctuation">-</span>password<span class="token punctuation">-</span>stdin</span>
<span class="line">    <span class="token punctuation">-</span> docker build <span class="token punctuation">-</span>t $CI_REGISTRY_IMAGE <span class="token punctuation">-</span>t $CI_REGISTRY_IMAGE<span class="token punctuation">:</span>$APP_VERSION .</span>
<span class="line">    <span class="token punctuation">-</span> docker image ls</span>
<span class="line">    <span class="token punctuation">-</span> docker push <span class="token punctuation">-</span><span class="token punctuation">-</span>all<span class="token punctuation">-</span>tags $CI_REGISTRY_IMAGE</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">test docker image</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test</span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> curlimages/curl</span>
<span class="line">  <span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> $CI_REGISTRY_IMAGE<span class="token punctuation">:</span>$APP_VERSION</span>
<span class="line">      <span class="token key atrule">alias</span><span class="token punctuation">:</span> website</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> curl http<span class="token punctuation">:</span>//website/version.html <span class="token punctuation">|</span> grep $APP_VERSION</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),V=e('<hr><h2 id="private-registry-authentication" tabindex="-1"><a class="header-anchor" href="#private-registry-authentication"><span>Private registry authentication</span></a></h2><ul><li>AWS EB requires authentication credentials to pull our Docker image</li><li>GitLab allows us to create a Deploy Token that AWS can use to log to the registry</li><li>to generate a Deploy Token, from your project, go to <em>Settings &gt; Repository &gt; Deploy tokens</em>.</li><li>create a new Deploy Token with the following scopes: <ul><li><code>read_repository</code></li><li><code>read_registry</code></li></ul></li></ul>',3),Y={class:"hint-container important"},M=n("p",{class:"hint-container-title"},"Pipeline after this lecture",-1),W=e(`<code>.gitlab-ci.yml</code><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">stages</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token punctuation">-</span> build</span>
<span class="line">  <span class="token punctuation">-</span> package</span>
<span class="line">  <span class="token punctuation">-</span> test</span>
<span class="line">  <span class="token punctuation">-</span> deploy</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">variables</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">APP_VERSION</span><span class="token punctuation">:</span> $CI_PIPELINE_IID</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">.build website</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span>16<span class="token punctuation">-</span>alpine</span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> yarn install</span>
<span class="line">    <span class="token punctuation">-</span> yarn lint</span>
<span class="line">    <span class="token punctuation">-</span> yarn test</span>
<span class="line">    <span class="token punctuation">-</span> yarn build</span>
<span class="line">    <span class="token punctuation">-</span> echo $APP_VERSION <span class="token punctuation">&gt;</span> build/version.html</span>
<span class="line">  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">paths</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> build</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">.build docker image</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> package</span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> docker<span class="token punctuation">:</span>20.10.12</span>
<span class="line">  <span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> docker<span class="token punctuation">:</span>20.10.12<span class="token punctuation">-</span>dind</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> echo $CI_REGISTRY_PASSWORD <span class="token punctuation">|</span> docker login <span class="token punctuation">-</span>u $CI_REGISTRY_USER $CI_REGISTRY <span class="token punctuation">-</span><span class="token punctuation">-</span>password<span class="token punctuation">-</span>stdin</span>
<span class="line">    <span class="token punctuation">-</span> docker build <span class="token punctuation">-</span>t $CI_REGISTRY_IMAGE <span class="token punctuation">-</span>t $CI_REGISTRY_IMAGE<span class="token punctuation">:</span>$APP_VERSION .</span>
<span class="line">    <span class="token punctuation">-</span> docker image ls</span>
<span class="line">    <span class="token punctuation">-</span> docker push <span class="token punctuation">-</span><span class="token punctuation">-</span>all<span class="token punctuation">-</span>tags $CI_REGISTRY_IMAGE</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">.test docker image</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test</span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> curlimages/curl</span>
<span class="line">  <span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> $CI_REGISTRY_IMAGE<span class="token punctuation">:</span>$APP_VERSION</span>
<span class="line">      <span class="token key atrule">alias</span><span class="token punctuation">:</span> website</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> curl http<span class="token punctuation">:</span>//website/version.html <span class="token punctuation">|</span> grep $APP_VERSION</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">deploy to production</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> amazon/aws<span class="token punctuation">-</span>cli<span class="token punctuation">:</span>2.4.11</span>
<span class="line">    <span class="token key atrule">entrypoint</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy</span>
<span class="line">  <span class="token key atrule">variables</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">APP_NAME</span><span class="token punctuation">:</span> My website</span>
<span class="line">    <span class="token key atrule">APP_ENV_NAME</span><span class="token punctuation">:</span> Mywebsite<span class="token punctuation">-</span>env</span>
<span class="line">  <span class="token key atrule">environment</span><span class="token punctuation">:</span> production</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> aws <span class="token punctuation">-</span><span class="token punctuation">-</span>version</span>
<span class="line">    <span class="token punctuation">-</span> yum install <span class="token punctuation">-</span>y gettext</span>
<span class="line">    <span class="token punctuation">-</span> export DEPLOY_TOKEN=$(echo $GITLAB_DEPLOY_TOKEN <span class="token punctuation">|</span> tr <span class="token punctuation">-</span>d &quot;\\n&quot; <span class="token punctuation">|</span> base64)</span>
<span class="line">    <span class="token punctuation">-</span> envsubst &lt; templates/Dockerrun.aws.json <span class="token punctuation">&gt;</span> Dockerrun.aws.json</span>
<span class="line">    <span class="token punctuation">-</span> envsubst &lt; templates/auth.json <span class="token punctuation">&gt;</span> auth.json</span>
<span class="line">    <span class="token punctuation">-</span> cat Dockerrun.aws.json</span>
<span class="line">    <span class="token punctuation">-</span> cat auth.json</span>
<span class="line">    <span class="token punctuation">-</span> aws s3 cp Dockerrun.aws.json s3<span class="token punctuation">:</span>//$AWS_S3_BUCKET/Dockerrun.aws.json</span>
<span class="line">    <span class="token punctuation">-</span> aws s3 cp auth.json s3<span class="token punctuation">:</span>//$AWS_S3_BUCKET/auth.json</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),q=n("hr",null,null,-1),B=n("h2",{id:"deploying-to-aws-elastic-beanstalk",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#deploying-to-aws-elastic-beanstalk"},[n("span",null,"Deploying to AWS Elastic Beanstalk")])],-1),x=n("ul",null,[n("li",null,"a new deployment to AWS EB happens in two steps"),n("li",null,[a("step 1: we create a new application version with "),n("code",null,"aws elasticbeanstalk create-application-version")]),n("li",null,[a("step 2: we update the environment with the new application version with "),n("code",null,"aws elasticbeanstalk update-environment")])],-1),L={class:"hint-container important"},U=n("p",{class:"hint-container-title"},"Pipeline after this lecture",-1),K=e(`<code>.gitlab-ci.yml</code><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">stages</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token punctuation">-</span> build</span>
<span class="line">  <span class="token punctuation">-</span> package</span>
<span class="line">  <span class="token punctuation">-</span> test</span>
<span class="line">  <span class="token punctuation">-</span> deploy</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">variables</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">APP_VERSION</span><span class="token punctuation">:</span> $CI_PIPELINE_IID</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">build website</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span>16<span class="token punctuation">-</span>alpine</span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> yarn install</span>
<span class="line">    <span class="token punctuation">-</span> yarn lint</span>
<span class="line">    <span class="token punctuation">-</span> yarn test</span>
<span class="line">    <span class="token punctuation">-</span> yarn build</span>
<span class="line">    <span class="token punctuation">-</span> echo $APP_VERSION <span class="token punctuation">&gt;</span> build/version.html</span>
<span class="line">  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">paths</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> build</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">build docker image</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> package</span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> docker<span class="token punctuation">:</span>20.10.12</span>
<span class="line">  <span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> docker<span class="token punctuation">:</span>20.10.12<span class="token punctuation">-</span>dind</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> echo $CI_REGISTRY_PASSWORD <span class="token punctuation">|</span> docker login <span class="token punctuation">-</span>u $CI_REGISTRY_USER $CI_REGISTRY <span class="token punctuation">-</span><span class="token punctuation">-</span>password<span class="token punctuation">-</span>stdin</span>
<span class="line">    <span class="token punctuation">-</span> docker build <span class="token punctuation">-</span>t $CI_REGISTRY_IMAGE <span class="token punctuation">-</span>t $CI_REGISTRY_IMAGE<span class="token punctuation">:</span>$APP_VERSION .</span>
<span class="line">    <span class="token punctuation">-</span> docker image ls</span>
<span class="line">    <span class="token punctuation">-</span> docker push <span class="token punctuation">-</span><span class="token punctuation">-</span>all<span class="token punctuation">-</span>tags $CI_REGISTRY_IMAGE</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">test docker image</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test</span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> curlimages/curl</span>
<span class="line">  <span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> $CI_REGISTRY_IMAGE<span class="token punctuation">:</span>$APP_VERSION</span>
<span class="line">      <span class="token key atrule">alias</span><span class="token punctuation">:</span> website</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> curl http<span class="token punctuation">:</span>//website/version.html <span class="token punctuation">|</span> grep $APP_VERSION</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">deploy to production</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> amazon/aws<span class="token punctuation">-</span>cli<span class="token punctuation">:</span>2.4.11</span>
<span class="line">    <span class="token key atrule">entrypoint</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy</span>
<span class="line">  <span class="token key atrule">variables</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">APP_NAME</span><span class="token punctuation">:</span> My website</span>
<span class="line">    <span class="token key atrule">APP_ENV_NAME</span><span class="token punctuation">:</span> Mywebsite<span class="token punctuation">-</span>env</span>
<span class="line">  <span class="token key atrule">environment</span><span class="token punctuation">:</span> production</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> aws <span class="token punctuation">-</span><span class="token punctuation">-</span>version</span>
<span class="line">    <span class="token punctuation">-</span> yum install <span class="token punctuation">-</span>y gettext</span>
<span class="line">    <span class="token punctuation">-</span> export DEPLOY_TOKEN=$(echo $GITLAB_DEPLOY_TOKEN <span class="token punctuation">|</span> tr <span class="token punctuation">-</span>d &quot;\\n&quot; <span class="token punctuation">|</span> base64)</span>
<span class="line">    <span class="token punctuation">-</span> envsubst &lt; templates/Dockerrun.aws.json <span class="token punctuation">&gt;</span> Dockerrun.aws.json</span>
<span class="line">    <span class="token punctuation">-</span> envsubst &lt; templates/auth.json <span class="token punctuation">&gt;</span> auth.json</span>
<span class="line">    <span class="token punctuation">-</span> cat Dockerrun.aws.json</span>
<span class="line">    <span class="token punctuation">-</span> cat auth.json</span>
<span class="line">    <span class="token punctuation">-</span> aws s3 cp Dockerrun.aws.json s3<span class="token punctuation">:</span>//$AWS_S3_BUCKET/Dockerrun.aws.json</span>
<span class="line">    <span class="token punctuation">-</span> aws s3 cp auth.json s3<span class="token punctuation">:</span>//$AWS_S3_BUCKET/auth.json</span>
<span class="line">    <span class="token punctuation">-</span> aws elasticbeanstalk create<span class="token punctuation">-</span>application<span class="token punctuation">-</span>version <span class="token punctuation">-</span><span class="token punctuation">-</span>application<span class="token punctuation">-</span>name &quot;$APP_NAME&quot; <span class="token punctuation">-</span><span class="token punctuation">-</span>version<span class="token punctuation">-</span>label $APP_VERSION <span class="token punctuation">-</span><span class="token punctuation">-</span>source<span class="token punctuation">-</span>bundle S3Bucket=$AWS_S3_BUCKET<span class="token punctuation">,</span>S3Key=Dockerrun.aws.json</span>
<span class="line">    <span class="token punctuation">-</span> aws elasticbeanstalk update<span class="token punctuation">-</span>environment <span class="token punctuation">-</span><span class="token punctuation">-</span>application<span class="token punctuation">-</span>name &quot;$APP_NAME&quot; <span class="token punctuation">-</span><span class="token punctuation">-</span>version<span class="token punctuation">-</span>label $APP_VERSION <span class="token punctuation">-</span><span class="token punctuation">-</span>environment<span class="token punctuation">-</span>name $APP_ENV_NAME</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),z=n("hr",null,null,-1),F=n("h2",{id:"post-deployment-testing",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#post-deployment-testing"},[n("span",null,"Post-deployment testing")])],-1),J=n("ul",null,[n("li",null,"updating an EB environment does not happen instantly"),n("li",null,[a("we will use "),n("code",null,"aws elasticbeanstalk wait"),a(" to know when the environment has been updated")])],-1),Q={class:"hint-container important"},H=n("p",{class:"hint-container-title"},"Pipeline after this lecture",-1),X=e(`<code>.gitlab-ci.yml</code><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">stages</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token punctuation">-</span> build</span>
<span class="line">  <span class="token punctuation">-</span> package</span>
<span class="line">  <span class="token punctuation">-</span> test</span>
<span class="line">  <span class="token punctuation">-</span> deploy</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">variables</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">APP_VERSION</span><span class="token punctuation">:</span> $CI_PIPELINE_IID</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">build website</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span>16<span class="token punctuation">-</span>alpine</span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> yarn install</span>
<span class="line">    <span class="token punctuation">-</span> yarn lint</span>
<span class="line">    <span class="token punctuation">-</span> yarn test</span>
<span class="line">    <span class="token punctuation">-</span> yarn build</span>
<span class="line">    <span class="token punctuation">-</span> echo $APP_VERSION <span class="token punctuation">&gt;</span> build/version.html</span>
<span class="line">  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">paths</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> build</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">build docker image</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> package</span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> docker<span class="token punctuation">:</span>20.10.12</span>
<span class="line">  <span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> docker<span class="token punctuation">:</span>20.10.12<span class="token punctuation">-</span>dind</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> echo $CI_REGISTRY_PASSWORD <span class="token punctuation">|</span> docker login <span class="token punctuation">-</span>u $CI_REGISTRY_USER $CI_REGISTRY <span class="token punctuation">-</span><span class="token punctuation">-</span>password<span class="token punctuation">-</span>stdin</span>
<span class="line">    <span class="token punctuation">-</span> docker build <span class="token punctuation">-</span>t $CI_REGISTRY_IMAGE <span class="token punctuation">-</span>t $CI_REGISTRY_IMAGE<span class="token punctuation">:</span>$APP_VERSION .</span>
<span class="line">    <span class="token punctuation">-</span> docker image ls</span>
<span class="line">    <span class="token punctuation">-</span> docker push <span class="token punctuation">-</span><span class="token punctuation">-</span>all<span class="token punctuation">-</span>tags $CI_REGISTRY_IMAGE</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">test docker image</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test</span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> curlimages/curl</span>
<span class="line">  <span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> $CI_REGISTRY_IMAGE<span class="token punctuation">:</span>$APP_VERSION</span>
<span class="line">      <span class="token key atrule">alias</span><span class="token punctuation">:</span> website</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> curl http<span class="token punctuation">:</span>//website/version.html <span class="token punctuation">|</span> grep $APP_VERSION</span>
<span class="line"></span>
<span class="line"><span class="token key atrule">deploy to production</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">image</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> amazon/aws<span class="token punctuation">-</span>cli<span class="token punctuation">:</span>2.4.11</span>
<span class="line">    <span class="token key atrule">entrypoint</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&quot;</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy</span>
<span class="line">  <span class="token key atrule">variables</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">APP_NAME</span><span class="token punctuation">:</span> My website</span>
<span class="line">    <span class="token key atrule">APP_ENV_NAME</span><span class="token punctuation">:</span> Mywebsite<span class="token punctuation">-</span>env</span>
<span class="line">  <span class="token key atrule">environment</span><span class="token punctuation">:</span> production</span>
<span class="line">  <span class="token key atrule">script</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">-</span> aws <span class="token punctuation">-</span><span class="token punctuation">-</span>version</span>
<span class="line">    <span class="token punctuation">-</span> yum install <span class="token punctuation">-</span>y gettext</span>
<span class="line">    <span class="token punctuation">-</span> export DEPLOY_TOKEN=$(echo $GITLAB_DEPLOY_TOKEN <span class="token punctuation">|</span> tr <span class="token punctuation">-</span>d &quot;\\n&quot; <span class="token punctuation">|</span> base64)</span>
<span class="line">    <span class="token punctuation">-</span> envsubst &lt; templates/Dockerrun.aws.json <span class="token punctuation">&gt;</span> Dockerrun.aws.json</span>
<span class="line">    <span class="token punctuation">-</span> envsubst &lt; templates/auth.json <span class="token punctuation">&gt;</span> auth.json</span>
<span class="line">    <span class="token punctuation">-</span> cat Dockerrun.aws.json</span>
<span class="line">    <span class="token punctuation">-</span> cat auth.json</span>
<span class="line">    <span class="token punctuation">-</span> aws s3 cp Dockerrun.aws.json s3<span class="token punctuation">:</span>//$AWS_S3_BUCKET/Dockerrun.aws.json</span>
<span class="line">    <span class="token punctuation">-</span> aws s3 cp auth.json s3<span class="token punctuation">:</span>//$AWS_S3_BUCKET/auth.json</span>
<span class="line">    <span class="token punctuation">-</span> aws elasticbeanstalk create<span class="token punctuation">-</span>application<span class="token punctuation">-</span>version <span class="token punctuation">-</span><span class="token punctuation">-</span>application<span class="token punctuation">-</span>name &quot;$APP_NAME&quot; <span class="token punctuation">-</span><span class="token punctuation">-</span>version<span class="token punctuation">-</span>label $APP_VERSION <span class="token punctuation">-</span><span class="token punctuation">-</span>source<span class="token punctuation">-</span>bundle S3Bucket=$AWS_S3_BUCKET<span class="token punctuation">,</span>S3Key=Dockerrun.aws.json</span>
<span class="line">    <span class="token punctuation">-</span> aws elasticbeanstalk update<span class="token punctuation">-</span>environment <span class="token punctuation">-</span><span class="token punctuation">-</span>application<span class="token punctuation">-</span>name &quot;$APP_NAME&quot; <span class="token punctuation">-</span><span class="token punctuation">-</span>version<span class="token punctuation">-</span>label $APP_VERSION <span class="token punctuation">-</span><span class="token punctuation">-</span>environment<span class="token punctuation">-</span>name $APP_ENV_NAME</span>
<span class="line">    <span class="token punctuation">-</span> aws elasticbeanstalk wait environment<span class="token punctuation">-</span>updated <span class="token punctuation">-</span><span class="token punctuation">-</span>application<span class="token punctuation">-</span>name &quot;$APP_NAME&quot; <span class="token punctuation">-</span><span class="token punctuation">-</span>version<span class="token punctuation">-</span>label $APP_VERSION <span class="token punctuation">-</span><span class="token punctuation">-</span>environment<span class="token punctuation">-</span>name $APP_ENV_NAME</span>
<span class="line">    <span class="token punctuation">-</span> curl $CI_ENVIRONMENT_URL/version.html <span class="token punctuation">|</span> grep $APP_VERSION</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2);function Z(c,nn){const o=p("VPCard"),t=p("router-link"),u=p("SiteInfo"),r=p("VidStack"),i=p("FontIcon");return h(),k("div",null,[n("h1",y,[n("a",_,[n("span",null,v(c.$frontmatter.title)+" ê´€ë ¨",1)])]),s(o,m(b({title:"DevOps with GitLab CI Course",desc:"GitLab CI/CD can automatically build, test, deploy, and monitor your applications. We just published a full course on the freeCodeCamp.org YouTube channel that will teach you how to use GitLab CI. Valentin Despa developed this course. Valentin is an ...",link:"/freecodecamp.org/devops-with-gitlab-ci-course/README.md",logo:"https://cdn.freecodecamp.org/universal/favicons/favicon.ico",background:"rgba(10,10,35,0.2)"})),null,16),n("nav",I,[n("ul",null,[n("li",null,[s(t,{to:"#unit-overview"},{default:l(()=>[a("Unit overview")]),_:1})]),n("li",null,[s(t,{to:"#introduction-to-aws-elastic-beanstalk"},{default:l(()=>[a("Introduction to AWS Elastic Beanstalk")]),_:1})]),n("li",null,[s(t,{to:"#creating-a-new-aws-elastic-beanstalk-application"},{default:l(()=>[a("Creating a new AWS Elastic Beanstalk application")]),_:1})]),n("li",null,[s(t,{to:"#creating-the-dockerfile"},{default:l(()=>[a("Creating the Dockerfile")]),_:1})]),n("li",null,[s(t,{to:"#building-the-docker-image"},{default:l(()=>[a("Building the Docker image")]),_:1})]),n("li",null,[s(t,{to:"#docker-container-registry"},{default:l(()=>[a("Docker container registry")]),_:1})]),n("li",null,[s(t,{to:"#testing-the-container"},{default:l(()=>[a("Testing the container")]),_:1})]),n("li",null,[s(t,{to:"#private-registry-authentication"},{default:l(()=>[a("Private registry authentication")]),_:1})]),n("li",null,[s(t,{to:"#deploying-to-aws-elastic-beanstalk"},{default:l(()=>[a("Deploying to AWS Elastic Beanstalk")]),_:1})]),n("li",null,[s(t,{to:"#post-deployment-testing"},{default:l(()=>[a("Post-deployment testing")]),_:1})])])]),E,s(u,{name:"DevOps with GitLab CI Course",desc:"GitLab CI/CD can automatically build, test, deploy, and monitor your applications. We just published a full course on the freeCodeCamp.org YouTube channel that will teach you how to use GitLab CI. Valentin Despa developed this course. Valentin is an ...",url:"https://freecodecamp.org/news/devops-with-gitlab-ci-course/",logo:"https://cdn.freecodecamp.org/universal/favicons/favicon.ico",preview:"https://freecodecamp.org/news/content/images/size/w2000/2022/03/qomm1soQ.png"}),s(r,{src:"youtube/PGyhBwLyK2U"}),w,n("blockquote",null,[s(i,{icon:"iconfont icon-json"}),S]),P,n("div",R,[f,s(i,{icon:"iconfont icon-gitlab"}),a(),A]),$,n("div",D,[C,s(i,{icon:"iconfont icon-gitlab"}),a(),G]),N,n("div",T,[O,s(i,{icon:"iconfont icon-gitlab"}),a(),j]),V,n("div",Y,[M,s(i,{icon:"iconfont icon-gitlab"}),a(),W]),q,B,x,n("div",L,[U,s(i,{icon:"iconfont icon-gitlab"}),a(),K]),z,F,J,n("div",Q,[H,s(i,{icon:"iconfont icon-gitlab"}),a(),X])])}const en=d(g,[["render",Z],["__file","unit-4-deploying-a-dockerized-application-to-aws.html.vue"]]),tn=JSON.parse('{"path":"/freecodecamp.org/devops-with-gitlab-ci-course/unit-4-deploying-a-dockerized-application-to-aws.html","title":"Unit 4: Deploying a dockerized application to AWS","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Unit 4: Deploying a dockerized application to AWS","description":"(4/5) DevOps with GitLab CI Course","category":["DevOps","Gitlab","Docker","AWS","Youtube"],"tag":["blog","freecodecamp.org","devops","gitlab","docker","aws","scm","@vdespa","yaml","ci","cd","cicd","youtube","crashcourse"],"head":[[{"meta":null},{"property":"og:title","content":"(4/5) DevOps with GitLab CI Course"},{"property":"og:description","content":"Unit 4: Deploying a dockerized application to AWS"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/freecodecamp.org/devops-with-gitlab-ci-course/unit-4-deploying-a-dockerized-application-to-aws.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/freecodecamp.org/devops-with-gitlab-ci-course/unit-4-deploying-a-dockerized-application-to-aws.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Unit 4: Deploying a dockerized application to AWS"}],["meta",{"property":"og:description","content":"(4/5) DevOps with GitLab CI Course"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"freecodecamp.org"}],["meta",{"property":"article:tag","content":"devops"}],["meta",{"property":"article:tag","content":"gitlab"}],["meta",{"property":"article:tag","content":"docker"}],["meta",{"property":"article:tag","content":"aws"}],["meta",{"property":"article:tag","content":"scm"}],["meta",{"property":"article:tag","content":"@vdespa"}],["meta",{"property":"article:tag","content":"yaml"}],["meta",{"property":"article:tag","content":"ci"}],["meta",{"property":"article:tag","content":"cd"}],["meta",{"property":"article:tag","content":"cicd"}],["meta",{"property":"article:tag","content":"youtube"}],["meta",{"property":"article:tag","content":"crashcourse"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Unit 4: Deploying a dockerized application to AWS\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Unit overview","slug":"unit-overview","link":"#unit-overview","children":[]},{"level":2,"title":"Introduction to AWS Elastic Beanstalk","slug":"introduction-to-aws-elastic-beanstalk","link":"#introduction-to-aws-elastic-beanstalk","children":[]},{"level":2,"title":"Creating a new AWS Elastic Beanstalk application","slug":"creating-a-new-aws-elastic-beanstalk-application","link":"#creating-a-new-aws-elastic-beanstalk-application","children":[]},{"level":2,"title":"Creating the Dockerfile","slug":"creating-the-dockerfile","link":"#creating-the-dockerfile","children":[]},{"level":2,"title":"Building the Docker image","slug":"building-the-docker-image","link":"#building-the-docker-image","children":[]},{"level":2,"title":"Docker container registry","slug":"docker-container-registry","link":"#docker-container-registry","children":[]},{"level":2,"title":"Testing the container","slug":"testing-the-container","link":"#testing-the-container","children":[]},{"level":2,"title":"Private registry authentication","slug":"private-registry-authentication","link":"#private-registry-authentication","children":[]},{"level":2,"title":"Deploying to AWS Elastic Beanstalk","slug":"deploying-to-aws-elastic-beanstalk","link":"#deploying-to-aws-elastic-beanstalk","children":[]},{"level":2,"title":"Post-deployment testing","slug":"post-deployment-testing","link":"#post-deployment-testing","children":[]}],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":4.94,"words":1482},"filePathRelative":"freecodecamp.org/devops-with-gitlab-ci-course/unit-4-deploying-a-dockerized-application-to-aws.md","excerpt":"\\n"}');export{en as comp,tn as data};
