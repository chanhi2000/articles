import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as u,b as n,t as h,e as a,n as i,g as l,d as s,f as p,r as e,o as k}from"./app-BgNevrm5.js";const g={},m={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},w={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},f=n("nav",{class:"table-of-contents"},[n("ul")],-1),b=n("hr",null,null,-1),v=n("p",null,[s("Before this project is finished, we're going to make two changes. First, we're going to add another tab to the "),n("code",null,"UITabBarController"),s(" that will show popular petitions, and second we're going to make our loading code a little more resilient by adding error messages.")],-1),y=n("p",null,[s("As I said previously, we can't really put the second tab into our storyboard because both tabs will host a "),n("code",null,"ViewController"),s(" and doing so would require us to duplicate the view controllers in the storyboard. You can do that if you really want, but please don't â€“ it's a maintenance nightmare!")],-1),_=n("p",null,"Instead, we're going to leave our current storyboard configuration alone, then create the second view controller using code. This isn't something you've done before, but it's not hard and we already took the first step, as you'll see.",-1),S=n("code",null,"AppDelegate.swift",-1),T=n("code",null,"didFinishLaunchingWithOptions",-1),C=n("code",null,"ViewController",-1),I=p(`<p>It should already have some default Apple code in there, but we&#39;re going to add some more just before the <code>return true</code> line:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">if</span> <span class="token keyword">let</span> tabBarController <span class="token operator">=</span> window<span class="token operator">?</span><span class="token punctuation">.</span>rootViewController <span class="token keyword">as</span><span class="token operator">?</span> <span class="token class-name">UITabBarController</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> storyboard <span class="token operator">=</span> <span class="token class-name">UIStoryboard</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Main&quot;</span></span><span class="token punctuation">,</span> bundle<span class="token punctuation">:</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">let</span> vc <span class="token operator">=</span> storyboard<span class="token punctuation">.</span><span class="token function">instantiateViewController</span><span class="token punctuation">(</span>withIdentifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;NavController&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    vc<span class="token punctuation">.</span>tabBarItem <span class="token operator">=</span> <span class="token class-name">UITabBarItem</span><span class="token punctuation">(</span>tabBarSystemItem<span class="token punctuation">:</span> <span class="token punctuation">.</span>topRated<span class="token punctuation">,</span> tag<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    tabBarController<span class="token punctuation">.</span>viewControllers<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>vc<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Every line of that is new, so let&#39;s dig in deeper:</p>`,3),R=n("li",null,[s("Our storyboard automatically creates a window in which all our view controllers are shown. This window needs to know what its initial view controller is, and that gets set to its "),n("code",null,"rootViewController"),s(" property. This is all handled by our storyboard.")],-1),V=n("li",null,[s("In the Single View App template, the root view controller is the "),n("code",null,"ViewController"),s(", but we embedded ours inside a navigation controller, then embedded "),n("em",null,"that"),s(" inside a tab bar controller. So, for us the root view controller is a "),n("code",null,"UITabBarController"),s(".")],-1),j=n("code",null,"ViewController",-1),q=n("code",null,"Main.storyboard",-1),O=n("code",null,"UIStoryboard",-1),x=n("code",null,"nil",-1),B=n("li",null,[s("We create our view controller using the "),n("code",null,"instantiateViewController()"),s(' method, passing in the storyboard ID of the view controller we want. Earlier we set our navigation controller to have the storyboard ID of "NavController", so we pass that in.')],-1),A=n("li",null,[s("We create a "),n("code",null,"UITabBarItem"),s(' object for the new view controller, giving it the "Top Rated" icon and the tag 1. That tag will be important in a moment.')],-1),L=n("li",null,[s("We add the new view controller to our tab bar controller's "),n("code",null,"viewControllers"),s(" array, which will cause it to appear in the tab bar.")],-1),M=n("p",null,[s("So, the code creates a duplicate "),n("code",null,"ViewController"),s(" wrapped inside a navigation controller, gives it a new tab bar item to distinguish it from the existing tab, then adds it to the list of visible tabs. This lets us use the same class for both tabs without having to duplicate things in the storyboard.")],-1),U=n("code",null,"UITabBarItem",-1),H=n("code",null,"ViewController",-1),E=n("code",null,"urlString",-1),N=n("code",null,"ViewController.swift",-1),D=n("code",null,"viewDidLoad()",-1),P=p(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> urlString<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> navigationController<span class="token operator">?</span><span class="token punctuation">.</span>tabBarItem<span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// urlString = &quot;https://api.whitehouse.gov/v1/petitions.json?limit=100&quot;</span></span>
<span class="line">    urlString <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;https://hackingwithswift.com/samples/petitions-1.json&quot;</span></span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// urlString = &quot;https://api.whitehouse.gov/v1/petitions.json?signatureCountFloor=10000&amp;limit=100&quot;</span></span>
<span class="line">    urlString <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;https://hackingwithswift.com/samples/petitions-2.json&quot;</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That adjusts the code so that the first instance of <code>ViewController</code> loads the original JSON, and the second loads only petitions that have at least 10,000 signatures. Once again Iâ€™ve provided cached copies of the Whitehouse API data in case it changes or goes away in the future â€“ use whichever one you prefer.</p><p>The project is almost done, but we&#39;re going to make one last change. Our current loading code isn&#39;t very resilient: we have a couple of <code>if</code> statements checking that things are working correctly, but no <code>else</code> statements showing an error message if there&#39;s a problem.</p><p>This is easily fixed by adding a new <code>showError()</code> method that creates a <code>UIAlertController</code> showing a general failure message:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">showError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> ac <span class="token operator">=</span> <span class="token class-name">UIAlertController</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Loading error&quot;</span></span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;There was a problem loading the feed; please check your connection and try again.&quot;</span></span><span class="token punctuation">,</span> preferredStyle<span class="token punctuation">:</span> <span class="token punctuation">.</span>alert<span class="token punctuation">)</span></span>
<span class="line">    ac<span class="token punctuation">.</span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token class-name">UIAlertAction</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;OK&quot;</span></span><span class="token punctuation">,</span> style<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">present</span><span class="token punctuation">(</span>ac<span class="token punctuation">,</span> animated<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can now adjust the JSON downloading and parsing code to call this error method everywhere a condition fails, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">if</span> <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> urlString<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> <span class="token class-name">Data</span><span class="token punctuation">(</span>contentsOf<span class="token punctuation">:</span> url<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">parse</span><span class="token punctuation">(</span>json<span class="token punctuation">:</span> data<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">showError</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">showError</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Alternatively we could rewrite this to be a little cleaner by inserting <code>return</code> after the call to <code>parse()</code>. This means that the method would exit if parsing was reached, so we get to the end of the method it means parsing <em>wasnâ€™t</em> reached and we can show the error. Try this instead:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">if</span> <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> urlString<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> <span class="token class-name">Data</span><span class="token punctuation">(</span>contentsOf<span class="token punctuation">:</span> url<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">parse</span><span class="token punctuation">(</span>json<span class="token punctuation">:</span> data<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token function">showError</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Both approaches are perfectly valid â€“ do whichever you prefer.</p><p>Regardless of which you opt for, now that error messages are shown when the app hits problems weâ€™re done â€“ good job!</p>`,11);function F(c,W){const o=e("VPCard"),r=e("VidStack"),t=e("FontIcon");return k(),u("div",null,[n("h1",m,[n("a",w,[n("span",null,h(c.$frontmatter.title)+" ê´€ë ¨",1)])]),a(o,i(l({title:"Hacking with iOS â€“ learn to code iPhone and iPad apps with free Swift tutorials",desc:"Learn Swift coding for iOS with these free tutorials â€“ learn Swift, iOS, and Xcode",link:"/hackingwithswift.com/read/README.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),f,b,a(o,i(l({title:"Rendering a petition: loadHTMLString | Hacking with iOS",desc:"Rendering a petition: loadHTMLString",link:"https://hackingwithswift.com/read/7/5/finishing-touches-didfinishlaunchingwithoptions",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),a(r,{src:"youtube/9VorfMsbKQQ"}),v,y,_,n("p",null,[s("Open the file "),a(t,{icon:"fa-brands fa-swift"}),S,s(". This has been in all our projects so far, but it's not one we've had to work with until now. Look for the "),T,s(" method, which should be at the top of the file. This gets called by iOS when the app has finished loading and is ready to be used, and we're going to hijack it to insert a second "),C,s(" into our tab bar.")]),I,n("ul",null,[R,V,n("li",null,[s("We need to create a new "),j,s(" by hand, which first means getting a reference to our "),a(t,{icon:"iconfont icon-xcode"}),q,s(" file. This is done using the "),O,s(" class, as shown. You don't need to provide a bundle, because "),x,s(' means "use my current app bundle."')]),B,A,L]),M,n("p",null,[s("The reason we gave a tag of 1 to the new "),U,s(" is because it's an easy way to identify it. Remember, both tabs contain a "),H,s(", which means the same code is executed. Right now that means both will download the same JSON feed, which makes having two tabs pointless. But if you modify "),E,s(" in "),a(t,{icon:"fa-brands fa-swift"}),N,s("â€™s "),D,s(" method to this, it will work much better:")]),P])}const Y=d(g,[["render",F],["__file","05-finishing-touches-didfinishlaunchingwithoptions.html.vue"]]),Q=JSON.parse('{"path":"/hackingwithswift.com/read/07/05-finishing-touches-didfinishlaunchingwithoptions.html","title":"Rendering a petition: loadHTMLString","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Rendering a petition: loadHTMLString","description":"Article(s) > Rendering a petition: loadHTMLString","category":["Swift","iOS","Article(s)"],"tag":["blog","hackingwithswift.com","crashcourse","swift","xcode","appstore","ios"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > Rendering a petition: loadHTMLString"},{"property":"og:description","content":"Rendering a petition: loadHTMLString"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/07/05-finishing-touches-didfinishlaunchingwithoptions.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/07/05-finishing-touches-didfinishlaunchingwithoptions.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Rendering a petition: loadHTMLString"}],["meta",{"property":"og:description","content":"Article(s) > Rendering a petition: loadHTMLString"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"hackingwithswift.com"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:tag","content":"ios"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Rendering a petition: loadHTMLString\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]],"isOriginal":false},"headers":[],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":3.7,"words":1109},"filePathRelative":"hackingwithswift.com/read/07/05-finishing-touches-didfinishlaunchingwithoptions.md","excerpt":"\\n"}');export{Y as comp,Q as data};
