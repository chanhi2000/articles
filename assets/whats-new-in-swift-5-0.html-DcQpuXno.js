import{_ as h}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as g,b as n,t as w,e as a,n as r,g as u,w as e,d as s,a as v,f as t,r as l,o as f}from"./app-BgNevrm5.js";const b={},y={id:"frontmatter-title-관련",tabindex:"-1"},_={class:"header-anchor",href:"#frontmatter-title-관련"},q={class:"table-of-contents"},x=n("hr",null,null,-1),S=n("p",null,[s("Swift 5.0 is the next major release of Swift, and brings ABI stability at long last. That's not all, though: several key new features are already implemented, including raw strings, future enum cases, a "),n("code",null,"Result"),s(" type, checking for integer multiples and more.")],-1),I={class:"hint-container info"},T=n("p",{class:"hint-container-title"},"Try it yourself",-1),C=n("p",null,"I created an Xcode Playground showing what's new in Swift 5.0 with examples you can edit.",-1),j=n("hr",null,null,-1),R=n("h2",{id:"a-standard-result-type",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#a-standard-result-type"},[n("span",null,[s("A standard "),n("code",null,"Result"),s(" type")])])],-1),A={href:"https://github.com/apple/swift-evolution/blob/master/proposals/0235-add-result.md",target:"_blank",rel:"noopener noreferrer"},E=n("code",null,"apple/swift-evolution",-1),N=n("code",null,"Result",-1),M=t(`<p>Swift’s <code>Result</code> type is implemented as an enum that has two cases: <code>success</code> and <code>failure</code>. Both are implemented using generics so they can have an associated value of your choosing, but <code>failure</code> must be something that conforms to Swift’s <code>Error</code> type.</p><p>To demonstrate <code>Result</code>, we could write a function that connects to a server to figure out how many unread messages are waiting for the user. In this example code we’re going to have just one possible error, which is that the requested URL string isn’t a valid URL:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">enum</span> <span class="token class-name">NetworkError</span><span class="token punctuation">:</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> badURL</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The fetching function will accept a URL string as its first parameter, and a completion handler as its second parameter. That completion handler will itself accept a <code>Result</code>, where the success case will store an integer, and the failure case will be some sort of <code>NetworkError</code>. We’re not actually going to connect to a server here, but using a completion handler at least lets us simulate asynchronous code.</p><p>Here’s the code:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token class-name">Foundation</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">fetchUnreadCount1</span><span class="token punctuation">(</span>from urlString<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> completionHandler<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token punctuation">(</span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token class-name">NetworkError</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">guard</span> <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">URL</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> urlString<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">completionHandler</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span><span class="token punctuation">.</span>badURL<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// complicated networking code here</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Fetching </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">url<span class="token punctuation">.</span>absoluteString</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">...&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">completionHandler</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To use that code we need to check the value inside our <code>Result</code> to see whether our call succeeded or failed, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token function">fetchUnreadCount1</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;https://hackingwithswift.com&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> result <span class="token keyword">in</span></span>
<span class="line">    <span class="token keyword">switch</span> result <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token keyword">let</span> count<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">count</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> unread messages.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span><span class="token keyword">let</span> error<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>localizedDescription<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There are three more things you ought to know before you start using <code>Result</code> in your own code.</p><p>First, <code>Result</code> has a <code>get()</code> method that either returns the successful value if it exists, or throws its error otherwise. This allows you to convert <code>Result</code> into a regular throwing call, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token function">fetchUnreadCount1</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;https://hackingwithswift.com&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> result <span class="token keyword">in</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> result<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">count</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> unread messages.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Second, <code>Result</code> has an initializer that accepts a throwing closure: if the closure returns a value successfully that gets used for the <code>success</code> case, otherwise the thrown error is placed into the <code>failure</code> case.</p><p>For example:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token class-name">Result</span> <span class="token punctuation">{</span> <span class="token keyword">try</span> <span class="token class-name">String</span><span class="token punctuation">(</span>contentsOfFile<span class="token punctuation">:</span> someFile<span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Third, rather than using a specific error enum that you’ve created, you can also use the general <code>Error</code> protocol. In fact, the Swift Evolution proposal says “it&#39;s expected that most uses of Result will use <code>Swift.Error</code> as the <code>Error</code> type argument.”</p><p>So, rather than using <code>Result&lt;Int, NetworkError&gt;</code> you could use <code>Result&lt;Int, Error&gt;</code>. Although this means you lose the safety of typed throws, you gain the ability to throw a variety of different error enums – which you prefer really depends on your coding style.</p><hr><h2 id="raw-strings" tabindex="-1"><a class="header-anchor" href="#raw-strings"><span>Raw strings</span></a></h2>`,18),V={href:"https://github.com/apple/swift-evolution/blob/master/proposals/0200-raw-string-escaping.md",target:"_blank",rel:"noopener noreferrer"},L=n("code",null,"apple/swift-evolution",-1),W=t(`<p>To use raw strings, place one or more <code>#</code> symbols before your strings, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> rain <span class="token operator">=</span> <span class="token string-literal"><span class="token string">#&quot;The &quot;rain&quot; in &quot;Spain&quot; falls mainly on the Spaniards.&quot;#</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The <code>#</code> symbols at the start and end of the string become part of the string delimiter, so Swift understands that the standalone quote marks around “rain” and “Spain” should be treated as literal quote marks rather than ending the string.</p><p>Raw strings allow you to use backslashes too:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> keypaths <span class="token operator">=</span> <span class="token string-literal"><span class="token string">#&quot;Swift keypaths such as \\Person.name hold uninvoked references to properties.&quot;#</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>That treats the backslash as being a literal character in the string, rather than an escape character. This in turn means that string interpolation works differently:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> answer <span class="token operator">=</span> <span class="token number">42</span></span>
<span class="line"><span class="token keyword">let</span> dontpanic <span class="token operator">=</span> <span class="token string-literal"><span class="token string">#&quot;The answer to life, the universe, and everything is </span><span class="token interpolation-punctuation punctuation">\\#(</span><span class="token interpolation">answer</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">.&quot;#</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Notice how I’ve used <code>\\#(answer)</code> to use string interpolation – a regular <code>\\(answer)</code> will be interpreted as characters in the string, so when you want string interpolation to happen in a raw string you must add the extra <code>#</code>.</p><p>One of the interesting features of Swift’s raw strings is the use of hash symbols at the start and end, because you can use more than one in the unlikely event you’ll need to. It’s hard to provide a good example here because it really ought to be extremely rare, but consider this string: <strong>My dog said &quot;woof&quot;#gooddog</strong>. Because there’s no space before the hash, Swift will see <code>&quot;#</code> and immediately interpret it as the string terminator. In this situation we need to change our delimiter from <code>#&quot;</code> to <code>##&quot;</code>, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string-literal"><span class="token string">##&quot;My dog said &quot;woof&quot;#gooddog&quot;##</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Notice how the number of hashes at the end must match the number at the start.</p><p>Raw strings are fully compatible with Swift’s multi-line string system – just use <code>#&quot;&quot;&quot;</code> to start, then <code>&quot;&quot;&quot;#</code> to end, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> multiline <span class="token operator">=</span> <span class="token string-literal"><span class="token string">#&quot;&quot;&quot;</span>
<span class="line">The answer to life,</span>
<span class="line">the universe,</span>
<span class="line">and everything is </span><span class="token interpolation-punctuation punctuation">\\#(</span><span class="token interpolation">answer</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">.</span>
<span class="line">&quot;&quot;&quot;#</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Being able to do without lots of backslashes will prove particularly useful in regular expressions. For example, writing a simple regex to find keypaths such as <code>\\Person.name</code> used to look like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> regex1 <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;\\\\\\\\[A-Z]+[A-Za-z]+\\\\.[a-z]+&quot;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Thanks to raw strings we can write the same thing with half the number of backslashes:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> regex2 <span class="token operator">=</span> <span class="token string-literal"><span class="token string">#&quot;\\\\[A-Z]+[A-Za-z]+\\.[a-z]+&quot;#</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>We still need <em>some</em>, because regular expressions use them too.</p><hr><h2 id="customizing-string-interpolation" tabindex="-1"><a class="header-anchor" href="#customizing-string-interpolation"><span>Customizing string interpolation</span></a></h2>`,20),P={href:"https://github.com/apple/swift-evolution/blob/master/proposals/0228-fix-expressiblebystringinterpolation.md",target:"_blank",rel:"noopener noreferrer"},F=n("code",null,"apple/swift-evolution",-1),z=t(`<p>In its most basic form, the new string interpolation system lets us control how objects appear in strings. Swift has default behavior for structs that is helpful for debugging, because it prints the struct name followed by all its properties. But if you were working with classes (that don’t have this behavior), or wanted to format that output so it could be user-facing, then you could use the new string interpolation system.</p><p>For example, if we had a struct like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">    <span class="token keyword">var</span> age<span class="token punctuation">:</span> <span class="token class-name">Int</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If we wanted to add a special string interpolation for that so that we printed users neatly, we would add an extension to <code>String.StringInterpolation</code> with a new <code>appendInterpolation()</code> method. Swift already has several of these built in, and users the interpolation <em>type</em> – in this case <code>User</code> to figure out which method to call.</p><p>In this case, we’re going to add an implementation that puts the user’s name and age into a single string, then calls one of the built-in <code>appendInterpolation()</code> methods to add that to our string, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">extension</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token class-name">StringInterpolation</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">appendInterpolation</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> value<span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">appendInterpolation</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;My name is </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">value<span class="token punctuation">.</span>name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> and I&#39;m </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">value<span class="token punctuation">.</span>age</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now we can create a user and print out their data:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Guybrush Threepwood&quot;</span></span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">33</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;User details: </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">user</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>That will print <strong>User details: My name is Guybrush Threepwood and I&#39;m 33</strong>, whereas with the custom string interpolation it would have printed <strong>User details: User(name: &quot;Guybrush Threepwood&quot;, age: 33)</strong>. Of course, that functionality is no different from just implementing the <code>CustomStringConvertible</code> protocol, so let’s move on to more advanced usages.</p><p>Your custom interpolation method can take as many parameters as you need, labeled or unlabeled. For example, we could add an interpolation to print numbers using various styles, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">extension</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token class-name">StringInterpolation</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">appendInterpolation</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> number<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> style<span class="token punctuation">:</span> <span class="token class-name">NumberFormatter</span><span class="token punctuation">.</span><span class="token class-name">Style</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> formatter <span class="token operator">=</span> <span class="token class-name">NumberFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        formatter<span class="token punctuation">.</span>numberStyle <span class="token operator">=</span> style</span>
<span class="line"></span>
<span class="line">        <span class="token keyword">if</span> <span class="token keyword">let</span> result <span class="token operator">=</span> formatter<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> number <span class="token keyword">as</span> <span class="token class-name">NSNumber</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">appendLiteral</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>NumberFormatter</code> class has a number of styles, including currency ($72.83), ordinal (1st, 12th), and spell out (five, forty-three). So, we could create a random number and have it spelled out into a string like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token class-name">Int</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">...</span><span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">let</span> lucky <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;The lucky number this week is </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">number<span class="token punctuation">,</span> style<span class="token punctuation">:</span> <span class="token punctuation">.</span>spellOut</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">.&quot;</span></span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>lucky<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can call <code>appendLiteral()</code> as many times as you need, or even not at all if necessary. For example, we could add a string interpolation to repeat a string multiple times, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">extension</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token class-name">StringInterpolation</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">appendInterpolation</span><span class="token punctuation">(</span><span class="token keyword">repeat</span> str<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token omit keyword">_</span> count<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span> <span class="token number">0</span> <span class="token operator">..&lt;</span> count <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">appendLiteral</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Baby shark </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation"><span class="token keyword">repeat</span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;doo &quot;</span></span><span class="token punctuation">,</span> <span class="token number">6</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>And, as these are just regular methods, you can use Swift’s full range of functionality. For example, we might add an interpolation that joins an array of strings together, but if that array is empty execute a closure that returns a string instead:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">extension</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token class-name">StringInterpolation</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">appendInterpolation</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> values<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">]</span><span class="token punctuation">,</span> empty defaultValue<span class="token punctuation">:</span> <span class="token attribute atrule">@autoclosure</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> values<span class="token punctuation">.</span>count <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">appendLiteral</span><span class="token punctuation">(</span><span class="token function">defaultValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">appendLiteral</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">joined</span><span class="token punctuation">(</span>separator<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;, &quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;Harry&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Ron&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Hermione&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;List of students: </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">names<span class="token punctuation">,</span> empty<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;No one&quot;</span></span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Using <code>@autoclosure</code> means that we can use simple values or call complex functions for the default value, but none of that work will be done unless <code>values.count</code> is zero.</p><p>With a combination of the <code>ExpressibleByStringLiteral</code> and <code>ExpressibleByStringInterpolation</code> protocols it’s now possible to create whole types using string interpolation, and if we add <code>CustomStringConvertible</code> we can even make those types print as strings however we want.</p><p>To make this work, we need to fulfill some specific criteria:</p><ul><li>Whatever type we create should conform to <code>ExpressibleByStringLiteral</code>, <code>ExpressibleByStringInterpolation</code>, and <code>CustomStringConvertible</code>. The latter is only needed if you want to customize the way the type is printed.</li><li><em>Inside</em> your type needs to be a nested struct called <code>StringInterpolation</code> that conforms to <code>StringInterpolationProtocol</code>.</li><li>The nested struct needs to have an initializer that accepts two integers telling us roughly how much data it can expect.</li><li>It also needs to implement an <code>appendLiteral()</code> method, as well as one or more <code>appendInterpolation()</code> methods.</li><li>Your main type needs to have two initializers that allow it to be created from string literals and string interpolations.</li></ul><p>We can put all that together into an example type that can construct HTML from various common elements. The “scratchpad” inside the nested <code>StringInterpolation</code> struct will be a string: each time a new literal or interpolation is added, we’ll append it to the string. To help you see exactly what’s going on, I’ve added some <code>print()</code> calls inside the various append methods.</p><p>Here’s the code.</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">HTMLComponent</span><span class="token punctuation">:</span> <span class="token class-name">ExpressibleByStringLiteral</span><span class="token punctuation">,</span> <span class="token class-name">ExpressibleByStringInterpolation</span><span class="token punctuation">,</span> <span class="token class-name">CustomStringConvertible</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">struct</span> <span class="token class-name">StringInterpolation</span><span class="token punctuation">:</span> <span class="token class-name">StringInterpolationProtocol</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// start with an empty string</span></span>
<span class="line">        <span class="token keyword">var</span> output <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// allocate enough space to hold twice the amount of literal text</span></span>
<span class="line">        <span class="token keyword">init</span><span class="token punctuation">(</span>literalCapacity<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> interpolationCount<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            output<span class="token punctuation">.</span><span class="token function">reserveCapacity</span><span class="token punctuation">(</span>literalCapacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// a hard-coded piece of text – just add it</span></span>
<span class="line">        <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">appendLiteral</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> literal<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Appending </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">literal</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">            output<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>literal<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// a Twitter username – add it as a link</span></span>
<span class="line">        <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">appendInterpolation</span><span class="token punctuation">(</span>twitter<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Appending </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">twitter</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">            output<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;&lt;a href=\\&quot;https://twitter/</span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">twitter</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">\\&quot;&gt;@</span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">twitter</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&lt;/a&gt;&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// an email address – add it using mailto</span></span>
<span class="line">        <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">appendInterpolation</span><span class="token punctuation">(</span>email<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Appending </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">email</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">            output<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;&lt;a href=\\&quot;mailto:</span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">email</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">\\&quot;&gt;</span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">email</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&lt;/a&gt;&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// the finished text for this whole component</span></span>
<span class="line">    <span class="token keyword">let</span> description<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// create an instance from a literal string</span></span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>stringLiteral value<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        description <span class="token operator">=</span> value</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// create an instance from an interpolated string</span></span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>stringInterpolation<span class="token punctuation">:</span> <span class="token class-name">StringInterpolation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        description <span class="token operator">=</span> stringInterpolation<span class="token punctuation">.</span>output</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We can now create and use an instance of <code>HTMLComponent</code> using string interpolation like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> text<span class="token punctuation">:</span> <span class="token class-name">HTMLComponent</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;You should follow me on Twitter </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">twitter<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;twostraws&quot;</span></span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">, or you can email me at </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">email<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;paul@hackingwithswift.com&quot;</span></span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">.&quot;</span></span></span>
<span class="line"> <span class="token function">print</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Thanks to the <code>print()</code> calls that were scattered inside, you’ll see exactly how the string interpolation functionality works: you’ll see “Appending You should follow me on Twitter”, “Appending twostraws”, “Appending , or you can email me at “, “Appending paul@hackingwithswift.com”, and finally “Appending .” – each part triggers a method call, and is added to our string.</p><hr><h2 id="dynamically-callable-types" tabindex="-1"><a class="header-anchor" href="#dynamically-callable-types"><span>Dynamically callable types</span></a></h2>`,29),D={href:"https://github.com/apple/swift-evolution/blob/master/proposals/0216-dynamic-callable.md",target:"_blank",rel:"noopener noreferrer"},O=n("code",null,"apple/swift-evolution",-1),H=n("code",null,"@dynamicCallable",-1),U=t(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">random</span><span class="token punctuation">(</span>numberOfZeroes<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Into this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> result <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">dynamicallyCall</span><span class="token punctuation">(</span>withKeywordArguments<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;numberOfZeroes&quot;</span></span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,3),B=n("code",null,"@dynamicCallable",-1),Z=n("code",null,"@dynamicMemberLookup",-1),Y=t(`<p>To add this functionality to your own types, you need to add the <code>@dynamicCallable</code> attribute plus one or both of these methods:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">dynamicallyCall</span><span class="token punctuation">(</span>withArguments args<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Double</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">dynamicallyCall</span><span class="token punctuation">(</span>withKeywordArguments args<span class="token punctuation">:</span> <span class="token class-name">KeyValuePairs</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Int</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Double</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The first of those is used when you call the type without parameter labels (e.g. <code>a(b, c)</code>), and the second is used when you <em>do</em> provide labels (e.g. <code>a(b: cat, c: dog)</code>).</p><p><code>@dynamicCallable</code> is really flexible about which data types its methods accept and return, allowing you to benefit from all of Swift’s type safety while still having some wriggle room for advanced usage. So, for the first method (no parameter labels) you can use anything that conforms to <code>ExpressibleByArrayLiteral</code> such as arrays, array slices, and sets, and for the second method (with parameter labels) you can use anything that conforms to <code>ExpressibleByDictionaryLiteral</code> such as dictionaries and key value pairs.</p>`,4),K={class:"hint-container note"},G=n("p",{class:"hint-container-title"},"Note",-1),$=n("code",null,"KeyValuePairs",-1),J=n("code",null,"@dynamicCallable",-1),X=t(`<p>As well as accepting a variety of inputs, you can also provide multiple overloads for a variety of outputs – one might return a string, one an integer, and so on. As long as Swift is able to resolve which one is used, you can mix and match all you want.</p><p>Let’s look at an example. First, here’s a <code>RandomNumberGenerator</code> struct that generates numbers between 0 and a certain maximum, depending on what input was passed in:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">RandomNumberGenerator</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">generate</span><span class="token punctuation">(</span>numberOfZeroes<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> maximum <span class="token operator">=</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>numberOfZeroes<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">...</span>maximum<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To switch that over to <code>@dynamicCallable</code> we’d write something like this instead:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@dynamicCallable</span></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">RandomNumberGenerator</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">dynamicallyCall</span><span class="token punctuation">(</span>withKeywordArguments args<span class="token punctuation">:</span> <span class="token class-name">KeyValuePairs</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Int</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> numberOfZeroes <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>first<span class="token operator">?</span><span class="token punctuation">.</span>value <span class="token operator">??</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> maximum <span class="token operator">=</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> numberOfZeroes<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">...</span>maximum<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That method can be called with any number of parameters, or perhaps zero, so we read the first value carefully and use nil coalescing to make sure there’s a sensible default.</p><p>We can now create an instance of <code>RandomNumberGenerator</code> and call it like a function:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> random <span class="token operator">=</span> <span class="token class-name">RandomNumberGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">random</span><span class="token punctuation">(</span>numberOfZeroes<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>If you had used <code>dynamicallyCall(withArguments:)</code> instead – or at the same time, because you can have them both a single type – then you’d write this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@dynamicCallable</span></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">RandomNumberGenerator</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">dynamicallyCall</span><span class="token punctuation">(</span>withArguments args<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> numberOfZeroes <span class="token operator">=</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> maximum <span class="token operator">=</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> numberOfZeroes<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">...</span>maximum<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> random <span class="token operator">=</span> <span class="token class-name">RandomNumberGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">random</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There are some important rules to be aware of when using <code>@dynamicCallable</code>:</p><ul><li>You can apply it to structs, enums, classes, and protocols.</li><li>If you implement <code>withKeywordArguments:</code> and don’t implement <code>withArguments:</code>, your type can still be called without parameter labels – you’ll just get empty strings for the keys.</li><li>If your implementations of <code>withKeywordArguments:</code> or <code>withArguments:</code> are marked as throwing, calling the type will also be throwing.</li><li>You can’t add <code>@dynamicCallable</code> to an extension, only the primary definition of a type.</li><li>You can still add other methods and properties to your type, and use them as normal.</li></ul><p>Perhaps more importantly, there is no support for method resolution, which means we must call the type directly (e.g. <code>random(numberOfZeroes: 5)</code>) rather than calling specific methods on the type (e.g. <code>random.generate(numberOfZeroes: 5)</code>). There is already some discussion on adding the latter using a method signature such as this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">dynamicallyCallMethod</span><span class="token punctuation">(</span>named<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> withKeywordArguments<span class="token punctuation">:</span> <span class="token class-name">KeyValuePairs</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Int</span><span class="token operator">&gt;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>If that became possible in future Swift versions it might open up some very interesting possibilities for test mocking.</p><p>In the meantime, <code>@dynamicCallable</code> is not likely to be widely popular, but it <em>is</em> hugely important for a small number of people who want interactivity with Python, JavaScript, and other languages.</p><hr><h2 id="handling-future-enum-cases" tabindex="-1"><a class="header-anchor" href="#handling-future-enum-cases"><span>Handling future enum cases</span></a></h2>`,18),Q={href:"https://github.com/apple/swift-evolution/blob/master/proposals/0192-non-exhaustive-enums.md",target:"_blank",rel:"noopener noreferrer"},nn=n("code",null,"apple/swift-evolution",-1),sn=t(`<p>One of Swift’s security features is that it requires all switch statements to be exhaustive – that they must cover all cases. While this works well from a safety perspective, it causes compatibility issues when new cases are added in the future: a system framework might send something different that you hadn’t catered for, or code you rely on might add a new case and cause your compile to break because your switch is no longer exhaustive.</p><p>With the <code>@unknown</code> attribute we can now distinguish between two subtly different scenarios: “this default case should be run for all other cases because I don’t want to handle them individually,” and “I want to handle all cases individually, but if anything comes up in the future use this rather than causing an error.”</p><p>Here’s an example enum:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">enum</span> <span class="token class-name">PasswordError</span><span class="token punctuation">:</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> short</span>
<span class="line">    <span class="token keyword">case</span> obvious</span>
<span class="line">    <span class="token keyword">case</span> simple</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We could write code to handle each of those cases using a <code>switch</code> block:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">showOld</span><span class="token punctuation">(</span>error<span class="token punctuation">:</span> <span class="token class-name">PasswordError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">switch</span> error <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">.</span>short<span class="token punctuation">:</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Your password was too short.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">.</span>obvious<span class="token punctuation">:</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Your password was too obvious.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">default</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Your password was too simple.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That uses two explicit cases for short and obvious passwords, but bundles the third case into a default block.</p><p>Now, if in the future we added a new case to the enum called <code>old</code>, for passwords that had been used previously, our <code>default</code> case would automatically be called even though its message doesn’t really make sense – the password might not be too simple.</p><p>Swift can’t warn us about this code because it’s technically correct (the best kind of correct), so this mistake would easily be missed. Fortunately, the new <code>@unknown</code> attribute fixes it perfectly – it can be used only on the <code>default</code> case, and is designed to be run when new cases come along in the future.</p><p>For example:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">showNew</span><span class="token punctuation">(</span>error<span class="token punctuation">:</span> <span class="token class-name">PasswordError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">switch</span> error <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">.</span>short<span class="token punctuation">:</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Your password was too short.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token punctuation">.</span>obvious<span class="token punctuation">:</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Your password was too obvious.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token attribute atrule">@unknown</span> <span class="token keyword">default</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Your password wasn&#39;t suitable.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That code will now issue warnings because the <code>switch</code> block is no longer exhaustive – Swift wants us to handle each case explicitly. Helpfully this is only a <em>warning</em>, which is what makes this attribute so useful: if a framework adds a new case in the future you’ll be warned about it, but it won’t break your source code.</p><hr><h2 id="flattening-nested-optionals-resulting-from-try" tabindex="-1"><a class="header-anchor" href="#flattening-nested-optionals-resulting-from-try"><span>Flattening nested optionals resulting from try?</span></a></h2>`,14),an={href:"https://github.com/apple/swift-evolution/blob/master/proposals/0230-flatten-optional-try.md",target:"_blank",rel:"noopener noreferrer"},en=n("code",null,"apple/swift-evolution",-1),tn=n("code",null,"try?",-1),on=t(`<p>Here’s a practical example that demonstrates the change:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">User</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> id<span class="token punctuation">:</span> <span class="token class-name">Int</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">init</span><span class="token operator">?</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> id <span class="token operator">&lt;</span> <span class="token number">1</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token nil constant">nil</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">getMessages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// complicated code here</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">&quot;No messages&quot;</span></span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">let</span> messages <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> user<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">getMessages</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>User</code> struct has a failable initializer, because we want to make sure folks create users with a valid ID. The <code>getMessages()</code> method would in theory contain some sort of complicated code to get a list of all the messages for the user, so it’s marked as <code>throws</code>; I’ve made it return a fixed string so the code compiles.</p><p>The key line is the last one: because the user is optional it uses optional chaining, and because <code>getMessages()</code> can throw it uses <code>try?</code> to convert the throwing method into an optional, so we end up with a nested optional. In Swift 4.2 and earlier this would make <code>messages</code> a <code>String??</code> – an optional optional string – but in Swift 5.0 and later <code>try?</code> won’t wrap values in an optional if they are already optional, so <code>messages</code> will just be a <code>String?</code>.</p><p>This new behavior matches the existing behavior of optional chaining and conditional typecasting. That is, you could use optional chaining a dozen times in a single line of code if you wanted, but you wouldn’t end up with 12 nested optionals. Similarly, if you used optional chaining with <code>as?</code>, you would still end up with only one level of optionality, because that’s usually what you want.</p><hr><h2 id="checking-for-integer-multiples" tabindex="-1"><a class="header-anchor" href="#checking-for-integer-multiples"><span>Checking for integer multiples</span></a></h2>`,7),pn={href:"https://github.com/apple/swift-evolution/blob/master/proposals/0225-binaryinteger-iseven-isodd-ismultiple.md",target:"_blank",rel:"noopener noreferrer"},ln=n("code",null,"apple/swift-evolution",-1),cn=n("code",null,"isMultiple(of:)",-1),rn=n("code",null,"%",-1),un=t(`<p>For example:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> rowNumber <span class="token operator">=</span> <span class="token number">4</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> rowNumber<span class="token punctuation">.</span><span class="token function">isMultiple</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Even&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Odd&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Yes, we could write the same check using <code>if rowNumber % 2 == 0</code> but you have to admit that’s less clear – having <code>isMultiple(of:)</code> as a method means it can be listed in code completion options in Xcode, which aids discoverability.</p><hr><h2 id="transforming-and-unwrapping-dictionary-values-with-compactmapvalues" tabindex="-1"><a class="header-anchor" href="#transforming-and-unwrapping-dictionary-values-with-compactmapvalues"><span>Transforming and unwrapping dictionary values with compactMapValues()</span></a></h2>`,5),dn={href:"https://github.com/apple/swift-evolution/blob/master/proposals/0218-introduce-compact-map-values.md",target:"_blank",rel:"noopener noreferrer"},kn=n("code",null,"apple/swift-evolution",-1),mn=n("code",null,"compactMapValues()",-1),hn=n("code",null,"compactMap()",-1),gn=n("code",null,"mapValues()",-1),wn=t(`<p>As an example, here’s a dictionary of people in a race, along with the times they took to finish in seconds. One person did not finish, marked as “DNF”:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> times <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string-literal"><span class="token string">&quot;Hudson&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;38&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-literal"><span class="token string">&quot;Clarke&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;42&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-literal"><span class="token string">&quot;Robinson&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;35&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-literal"><span class="token string">&quot;Hartis&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;DNF&quot;</span></span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We can use <code>compactMapValues()</code> to create a new dictionary with names and times as an integer, with the one DNF person removed:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> finishers1 <span class="token operator">=</span> times<span class="token punctuation">.</span>compactMapValues <span class="token punctuation">{</span> <span class="token class-name">Int</span><span class="token punctuation">(</span><span class="token short-argument">$0</span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Alternatively, you could just pass the <code>Int</code> initializer directly to <code>compactMapValues()</code>, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> finishers2 <span class="token operator">=</span> times<span class="token punctuation">.</span><span class="token function">compactMapValues</span><span class="token punctuation">(</span><span class="token class-name">Int</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>You can also use <code>compactMapValues()</code> to unwrap optionals and discard nil values without performing any sort of transformation, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> people <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string-literal"><span class="token string">&quot;Paul&quot;</span></span><span class="token punctuation">:</span> <span class="token number">38</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-literal"><span class="token string">&quot;Sophie&quot;</span></span><span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-literal"><span class="token string">&quot;Charlotte&quot;</span></span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-literal"><span class="token string">&quot;William&quot;</span></span><span class="token punctuation">:</span> <span class="token nil constant">nil</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> knownAges <span class="token operator">=</span> people<span class="token punctuation">.</span>compactMapValues <span class="token punctuation">{</span> <span class="token short-argument">$0</span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="withdrawn-counting-matching-items-in-a-sequence" tabindex="-1"><a class="header-anchor" href="#withdrawn-counting-matching-items-in-a-sequence"><span>Withdrawn: Counting matching items in a sequence</span></a></h2>`,10),vn=n("p",null,[n("strong",null,"This Swift 5.0 feature was withdrawn in beta testing because it was causing performance issues for the type checker. Hopefully it will come back in time for Swift 5.1, perhaps with a new name to avoid problems.")],-1),fn={href:"https://github.com/apple/swift-evolution/blob/master/proposals/0220-count-where.md",target:"_blank",rel:"noopener noreferrer"},bn=n("code",null,"apple/swift-evolution",-1),yn=n("code",null,"count(where:)",-1),_n=n("code",null,"filter()",-1),qn=t(`<p>This example creates an array of test results, and counts how many are greater or equal to 85:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> scores <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">let</span> passCount <span class="token operator">=</span> scores<span class="token punctuation">.</span>count <span class="token punctuation">{</span> <span class="token short-argument">$0</span> <span class="token operator">&gt;=</span> <span class="token number">85</span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>And this counts how many names in an array start with “Terry”:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> pythons <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;Eric Idle&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Graham Chapman&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;John Cleese&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Michael Palin&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Terry Gilliam&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Terry Jones&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">let</span> terryCount <span class="token operator">=</span> pythons<span class="token punctuation">.</span>count <span class="token punctuation">{</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span><span class="token function">hasPrefix</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Terry&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>This method is available to all types that conform to <code>Sequence</code>, so you can use it on sets and dictionaries too.</p><hr><h2 id="where-next" tabindex="-1"><a class="header-anchor" href="#where-next"><span>Where next?</span></a></h2><p>Swift 5.0 is the latest release of Swift, but previous releases have been packed with great features too. You can read my articles on those below:</p>`,8),xn={href:"https://swift.org/blog/5-1-release-process/",target:"_blank",rel:"noopener noreferrer"};function Sn(m,In){const c=l("VPCard"),o=l("router-link"),k=l("SiteInfo"),p=l("VidStack"),i=l("FontIcon"),d=l("RouteLink");return f(),g("div",null,[n("h1",y,[n("a",_,[n("span",null,w(m.$frontmatter.title)+" 관련",1)])]),a(c,r(u({title:"Swift > Article(s)",desc:"Article(s)",link:"/programming/swift/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),n("nav",q,[n("ul",null,[n("li",null,[a(o,{to:"#a-standard-result-type"},{default:e(()=>[s("A standard Result type")]),_:1})]),n("li",null,[a(o,{to:"#raw-strings"},{default:e(()=>[s("Raw strings")]),_:1})]),n("li",null,[a(o,{to:"#customizing-string-interpolation"},{default:e(()=>[s("Customizing string interpolation")]),_:1})]),n("li",null,[a(o,{to:"#dynamically-callable-types"},{default:e(()=>[s("Dynamically callable types")]),_:1})]),n("li",null,[a(o,{to:"#handling-future-enum-cases"},{default:e(()=>[s("Handling future enum cases")]),_:1})]),n("li",null,[a(o,{to:"#flattening-nested-optionals-resulting-from-try"},{default:e(()=>[s("Flattening nested optionals resulting from try?")]),_:1})]),n("li",null,[a(o,{to:"#checking-for-integer-multiples"},{default:e(()=>[s("Checking for integer multiples")]),_:1})]),n("li",null,[a(o,{to:"#transforming-and-unwrapping-dictionary-values-with-compactmapvalues"},{default:e(()=>[s("Transforming and unwrapping dictionary values with compactMapValues()")]),_:1})]),n("li",null,[a(o,{to:"#withdrawn-counting-matching-items-in-a-sequence"},{default:e(()=>[s("Withdrawn: Counting matching items in a sequence")]),_:1})]),n("li",null,[a(o,{to:"#where-next"},{default:e(()=>[s("Where next?")]),_:1})])])]),x,a(k,{name:"What's new in Swift 5.0 – Hacking with Swift",desc:"Raw strings, future enum cases, compactMapValues(), and more!",url:"https://hackingwithswift.com/articles/126/whats-new-in-swift-5-0",logo:"https://hackingwithswift.com/favicon.svg",preview:"https://hackingwithswift.com/uploads/swift-evolution-5.jpg"}),S,n("div",I,[T,C,a(k,{name:"twostraws/whats-new-in-swift-5-0",desc:"An Xcode playground that demonstrates the new features introduced in Swift 5.0.",url:"https://github.com/twostraws/whats-new-in-swift-5-0",logo:"https://avatars.githubusercontent.com/u/190200?v=4",preview:"https://opengraph.githubassets.com/09c7ca997e6496f92b8d11f7bba702ed88782e06c9af4a736740e16f14e0d85c/twostraws/whats-new-in-swift-5-0"}),a(p,{src:"youtube/_Iw4zf8gtqs"})]),j,R,a(p,{src:"youtube/RBZFCp3kSL`"}),n("p",null,[n("a",A,[s("SE-0235 ("),a(i,{icon:"iconfont icon-github"}),E,s(")")]),s(" introduces a "),N,s(" type into the standard library, giving us a simpler, clearer way of handling errors in complex code such as asynchronous APIs.")]),M,a(p,{src:"youtube/e6tuUzmxyOU"}),n("p",null,[n("a",V,[s("SE-0200 ("),a(i,{icon:"iconfont icon-github"}),L,s(")")]),s(" added the ability to create raw strings, where backslashes and quote marks are interpreted as those literal symbols rather than escapes characters or string terminators. This makes a number of use cases more easy, but regular expressions in particular will benefit.")]),W,n("p",null,[n("a",P,[s("SE-0228 ("),a(i,{icon:"iconfont icon-github"}),F,s(")")]),s(" dramatically revamped Swift’s string interpolation system so that it’s more efficient and more flexible, and it’s creating a whole new range of features that were previously impossible.")]),z,n("p",null,[n("a",D,[s("SE-0216 ("),a(i,{icon:"iconfont icon-github"}),O,s(")")]),s(" adds a new "),H,s(" attribute to Swift, which brings with it the ability to mark a type as being directly callable. It’s syntactic sugar rather than any sort of compiler magic, effectively transforming this code:")]),U,n("p",null,[s("Previously I wrote about a "),a(d,{to:"/hackingwithswift.com/how-to-use-dynamic-member-lookup-in-swift.html"},{default:e(()=>[s("feature in Swift 4.2 called @dynamicMemberLookup")]),_:1}),s(". "),B,s(" is the natural extension of "),Z,s(", and serves the same purpose: to make it easier for Swift code to work alongside dynamic languages such as Python and JavaScript.")]),Y,n("div",K,[G,n("p",null,[s("If you haven’t used "),$,s(" before, now would be a good time to learn what they are because they are extremely useful with "),J,s(". Find out more here: "),a(d,{to:"/hackingwithswift.com/example-code/language/what-are-keyvaluepairs.html"},{default:e(()=>[s("What are KeyValuePairs?")]),_:1})]),v(" TODO: add VPCard ")]),X,n("p",null,[n("a",Q,[s("SE-0192 ("),a(i,{icon:"iconfont icon-github"}),nn,s(")")]),s(" adds the ability to distinguish between enums that are fixed and enums that might change in the future.")]),sn,n("p",null,[n("a",an,[s("SE-0230 ("),a(i,{icon:"iconfont icon-github"}),en,s(")")]),s(" modifies the way "),tn,s(" works so that nested optionals are flattened to become regular optionals. This makes it work the same way as optional chaining and conditional typecasts, both of which flatten optionals in earlier Swift versions.")]),on,a(p,{src:"youtube/iCRwqxON8Os"}),n("p",null,[n("a",pn,[s("SE-0225 ("),a(i,{icon:"iconfont icon-github"}),ln,s(")")]),s(" adds an "),cn,s(" method to integers, allowing us to check whether one number is a multiple of another in a much clearer way than using the division remainder operation, "),rn,s(".")]),un,a(p,{src:"youtube/Le32Tbkv2v0"}),n("p",null,[n("a",dn,[s("SE-0218 ("),a(i,{icon:"iconfont icon-github"}),kn,s(")")]),s(" adds a new "),mn,s(" method to dictionaries, bringing together the "),hn,s(" functionality from arrays (“transform my values, unwrap the results, then discard anything that’s nil”) with the "),gn,s(" method from dictionaries (“leave my keys intact but transform my values”).")]),wn,a(p,{src:"youtube/syPKtPb0y-Y"}),vn,n("p",null,[n("a",fn,[s("SE-0220 ("),a(i,{icon:"iconfont icon-github"}),bn,s(")")]),s(" introduces a new "),yn,s(" method that performs the equivalent of a "),_n,s(" and count in a single pass. This saves the creation of a new array that gets immediately discarded, and provides a clear and concise solution to a common problem.")]),qn,a(c,r(u({title:"What's new in Swift 4.2 – Hacking with Swift",desc:"Enum case arrays, warning and compiler directives, and more!",link:"/hackingwithswift.com/whats-new-in-swift-4-2.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),a(c,r(u({title:"What's new in Swift 4.1 – Hacking with Swift",desc:"Synthesized equatable, conditional conformance, and more!",link:"/hackingwithswift.com/whats-new-in-swift-4-1.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),a(c,r(u({title:"What's new in Swift 4.0? - Hacking with Swift",desc:"Hands-on code examples to help you learn what's new in Swift 4: new encoding and decoding, smarter keypaths, multi-line strings, and more!",link:"/hackingwithswift.com/swift4.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),n("p",null,[s("But there's more to come – Apple already announced the "),n("a",xn,[a(i,{icon:"fa-brands fa-swift"}),s("Swift 5.1 release process")]),s(" on Swift.org, which will include module stability alongside some other improvements. At the time of writing there are very few hard dates attached to 5.1, but it's looking like we'll see it ship in beta around WWDC.")]),n("p",null,[s("If you'd like to learn more about what's changing in Swift 5.1, see my article: "),a(d,{to:"/hackingwithswift.com/whats-new-in-swift-5-1.html"},{default:e(()=>[s("what's new in Swift 5.1")]),_:1}),s(".")])])}const jn=h(b,[["render",Sn],["__file","whats-new-in-swift-5-0.html.vue"]]),Rn=JSON.parse(`{"path":"/hackingwithswift.com/whats-new-in-swift-5-0.html","title":"What's new in Swift 5.0","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"What's new in Swift 5.0","description":"Raw strings, future enum cases, compactMapValues(), and more!","icon":"fa-brands fa-swift","category":["Swift","Article(s)"],"tag":["blog","hackingwithswift.com","crashcourse","swift","swift-5.0","ios","xcode"],"head":[[{"meta":null},{"property":"og:title","content":"What's new in Swift 5.0"},{"property":"og:description","content":"Raw strings, future enum cases, compactMapValues(), and more!"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/whats-new-in-swift-5-0.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/whats-new-in-swift-5-0.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"What's new in Swift 5.0"}],["meta",{"property":"og:description","content":"Raw strings, future enum cases, compactMapValues(), and more!"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://hackingwithswift.com/uploads/swift-evolution-5.jpg"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://hackingwithswift.com/uploads/swift-evolution-5.jpg"}],["meta",{"name":"twitter:image:alt","content":"What's new in Swift 5.0"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"hackingwithswift.com"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"swift-5.0"}],["meta",{"property":"article:tag","content":"ios"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:published_time","content":"2019-03-28T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"What's new in Swift 5.0\\",\\"image\\":[\\"https://hackingwithswift.com/uploads/swift-evolution-5.jpg\\"],\\"datePublished\\":\\"2019-03-28T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[]}"]],"prev":"/programming/swift/articles/README.md","date":"2019-03-28T00:00:00.000Z","isOriginal":false,"cover":"https://hackingwithswift.com/uploads/swift-evolution-5.jpg"},"headers":[{"level":2,"title":"A standard Result type","slug":"a-standard-result-type","link":"#a-standard-result-type","children":[]},{"level":2,"title":"Raw strings","slug":"raw-strings","link":"#raw-strings","children":[]},{"level":2,"title":"Customizing string interpolation","slug":"customizing-string-interpolation","link":"#customizing-string-interpolation","children":[]},{"level":2,"title":"Dynamically callable types","slug":"dynamically-callable-types","link":"#dynamically-callable-types","children":[]},{"level":2,"title":"Handling future enum cases","slug":"handling-future-enum-cases","link":"#handling-future-enum-cases","children":[]},{"level":2,"title":"Flattening nested optionals resulting from try?","slug":"flattening-nested-optionals-resulting-from-try","link":"#flattening-nested-optionals-resulting-from-try","children":[]},{"level":2,"title":"Checking for integer multiples","slug":"checking-for-integer-multiples","link":"#checking-for-integer-multiples","children":[]},{"level":2,"title":"Transforming and unwrapping dictionary values with compactMapValues()","slug":"transforming-and-unwrapping-dictionary-values-with-compactmapvalues","link":"#transforming-and-unwrapping-dictionary-values-with-compactmapvalues","children":[]},{"level":2,"title":"Withdrawn: Counting matching items in a sequence","slug":"withdrawn-counting-matching-items-in-a-sequence","link":"#withdrawn-counting-matching-items-in-a-sequence","children":[]},{"level":2,"title":"Where next?","slug":"where-next","link":"#where-next","children":[]}],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":15.18,"words":4553},"filePathRelative":"hackingwithswift.com/whats-new-in-swift-5-0.md","localizedDate":"2019년 3월 28일","excerpt":"\\n"}`);export{jn as comp,Rn as data};
