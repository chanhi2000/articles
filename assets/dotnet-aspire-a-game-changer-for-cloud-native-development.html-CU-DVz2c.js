import{_ as v}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as g,b as n,t as k,e as a,n as c,g as r,w as e,d as s,a as d,f as p,r as o,o as f}from"./app-BgNevrm5.js";const b={},y={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},_={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},A={class:"table-of-contents"},w=n("hr",null,null,-1),T=n("p",null,"I've been tinkering with .NET Aspire lately, and I've got some thoughts to share. If you're curious about this new cloud-native development tool from Microsoft, stick around. I'll break down what's great, what's not, and how you can start using it.",-1),E=n("blockquote",null,[n("p",null,".NET Aspire is an opinionated, cloud-ready stack for building observable, production-ready, distributed applications.")],-1),N={href:"https://learn.microsoft.com/en-us/dotnet/aspire/get-started/aspire-overview",target:"_blank",rel:"noopener noreferrer"},C=n("strong",null,".NET Aspire",-1),j=p(`<p>Distributed applications often consist of small applications that consume external services like databases, message brokers, and caching. .NET Aspire gives you a set of tools to make building distributed applications easier.</p><hr><h2 id="net-aspire-orchestration" tabindex="-1"><a class="header-anchor" href="#net-aspire-orchestration"><span>.NET Aspire Orchestration</span></a></h2><p>How are you setting up a local development environment? I often use <strong>Docker Compose</strong> to configure my applications and run external services. It&#39;s a simple setup, but you need to manage environment variables and connection strings. If you&#39;re not familiar with Docker, it can prove to be quite tricky sometimes.</p><p>Here&#39;s a <code>docker-compose.yml</code> file from a recent project:</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml" data-title="yml"><pre><code><span class="line"><span class="token key atrule">services</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">contentplatform-api</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>DOCKER_REGISTRY<span class="token punctuation">-</span><span class="token punctuation">}</span>contentplatform<span class="token punctuation">-</span>api</span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> ContentPlatform.Api</span>
<span class="line">    <span class="token key atrule">build</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">context</span><span class="token punctuation">:</span> .</span>
<span class="line">      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> ContentPlatform.Api/Dockerfile</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> 5000<span class="token punctuation">:</span><span class="token number">8080</span></span>
<span class="line">      <span class="token punctuation">-</span> 5001<span class="token punctuation">:</span><span class="token number">8081</span></span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">contentplatform-reporting-api</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>DOCKER_REGISTRY<span class="token punctuation">-</span><span class="token punctuation">}</span>contentplatform<span class="token punctuation">-</span>reporting<span class="token punctuation">-</span>api</span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> ContentPlatform.Reporting.Api</span>
<span class="line">    <span class="token key atrule">build</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">context</span><span class="token punctuation">:</span> .</span>
<span class="line">      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> ContentPlatform.Reporting.Api/Dockerfile</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> 6000<span class="token punctuation">:</span><span class="token number">8080</span></span>
<span class="line">      <span class="token punctuation">-</span> 6001<span class="token punctuation">:</span><span class="token number">8081</span></span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">contentplatform-presentation</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> contentplatform<span class="token punctuation">-</span>ui<span class="token punctuation">:</span>latest</span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> ContentPlatform.Presentation</span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> ASPNETCORE_ENVIRONMENT=Development</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> 3000<span class="token punctuation">:</span><span class="token number">80</span></span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">contentplatform-db</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span>latest</span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> ContentPlatform.Db</span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> POSTGRES_DB=contentplatform</span>
<span class="line">      <span class="token punctuation">-</span> POSTGRES_USER=postgres</span>
<span class="line">      <span class="token punctuation">-</span> POSTGRES_PASSWORD=postgres</span>
<span class="line">    <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> ./.containers/db<span class="token punctuation">:</span>/var/lib/postgresql/data</span>
<span class="line">    <span class="token key atrule">ports</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> 5432<span class="token punctuation">:</span><span class="token number">5432</span></span>
<span class="line"></span>
<span class="line">  <span class="token key atrule">contentplatform-mq</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">image</span><span class="token punctuation">:</span> rabbitmq<span class="token punctuation">:</span>management</span>
<span class="line">    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> ContentPlatform.RabbitMq</span>
<span class="line">    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> contentplatform<span class="token punctuation">-</span>mq</span>
<span class="line">    <span class="token key atrule">volumes</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> ./.containers/queue/data/<span class="token punctuation">:</span>/var/lib/rabbitmq</span>
<span class="line">      <span class="token punctuation">-</span> ./.containers/queue/log/<span class="token punctuation">:</span>/var/log/rabbitmq</span>
<span class="line">    <span class="token key atrule">environment</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">RABBITMQ_DEFAULT_USER</span><span class="token punctuation">:</span> guest</span>
<span class="line">      <span class="token key atrule">RABBITMQ_DEFAULT_PASS</span><span class="token punctuation">:</span> guest</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This sets up two APIs, a client application, PostgreSQL, and RabbitMQ. I also have to configure the connection strings manually to connect to these services.</p><p>So, I decided to migrate this application to .NET Aspire and documented the process.</p><p>You can right-click an existing project in Visual Studio and select <code>Add &gt; .NET Aspire Orchestrator Support...</code>.</p>`,9),S=n("img",{src:"https://milanjovanovic.tech/blogs/mnw_107/aspire_orchestration.png?imwidth=750",alt:`Context menu with '.NET Aspire Orchestrator Support...' highlighted.<br/>Source: <FontIcon icon="fas fa-microsoft"/>Microsoft`,tabindex:"0",loading:"lazy"},null,-1),D=n("br",null,null,-1),R={href:"https://learn.microsoft.com/en-us/dotnet/aspire/get-started/add-aspire-existing-app",target:"_blank",rel:"noopener noreferrer"},x=p(`<p>This will add an <code>AppHost</code> and <code>ServiceDefaults</code> project to your solution. You will then repeat this for the remaining projects in your solution to enlist them all in Aspire orchestration.</p><p>The <code>AppHost</code> project is responsible for orchestration. You can define your entire application stack in a single, readable file. Running the <code>AppHost</code> project from Visual Studio will start the required applications and services.</p><p>Here&#39;s the setup for my application using Aspire:</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token class-name">IDistributedApplicationBuilder</span> builder <span class="token operator">=</span> DistributedApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> postgres <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">AddPostgres</span><span class="token punctuation">(</span><span class="token string">&quot;contentplatform-db&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">WithPgAdmin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> rabbitMq <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">AddRabbitMQ</span><span class="token punctuation">(</span><span class="token string">&quot;contentplatform-mq&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">WithManagementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">builder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddProject</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Projects<span class="token punctuation">.</span>ContentPlatform_Api<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;contentplatform-api&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">WithReference</span><span class="token punctuation">(</span>postgres<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">WithReference</span><span class="token punctuation">(</span>rabbitMq<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">builder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddProject</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Projects<span class="token punctuation">.</span>ContentPlatform_Reporting_Api<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;contentplatform-reporting-api&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">WithReference</span><span class="token punctuation">(</span>postgres<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">WithReference</span><span class="token punctuation">(</span>rabbitMq<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">builder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddProject</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Projects<span class="token punctuation">.</span>ContentPlatform_Presentation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;contentplatform-presentation&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The Aspire version is much more concise and readable. Adding new services or changing configurations is straightforward. You also get built-in observability. Aspire includes tools for logging, metrics, and distributed tracing out of the box, making it easier to monitor and debug your applications.</p><p>When you run the application, you can see your applications and services on the Aspire dashboard:</p><figure><img src="https://milanjovanovic.tech/blogs/mnw_107/content_platfrom_resources.png?imwidth=3840" alt="Aspire dashboard resource views showing the application services and containers running." tabindex="0" loading="lazy"><figcaption>Aspire dashboard resource views showing the application services and containers running.</figcaption></figure><hr><h2 id="orchestration-the-bad-parts" tabindex="-1"><a class="header-anchor" href="#orchestration-the-bad-parts"><span>Orchestration - The Bad Parts</span></a></h2><p>There are a few things I don&#39;t like with the current Aspire setup.</p><p>The <code>AppHost</code> project needs to reference all other projects to enlist them in orchestration. If your services are all in one solution, this might be fine. But what about large microservices systems?</p><p>We can go around this limitation by building a Docker image for an external service. There&#39;s an <code>AddContainer</code> method that allows us to configure container resources. However, we won&#39;t be able to debug these services.</p><p>The <code>ServiceDefaults</code> projects needs to be visible to all other applications. Again, this works perfectly fine if everything is in one solution. We can also distribute this project as a NuGet package for complex systems.</p><hr><h2 id="net-aspire-integrations" tabindex="-1"><a class="header-anchor" href="#net-aspire-integrations"><span>.NET Aspire Integrations</span></a></h2><p>If you&#39;re wondering how I configured PostgreSQL and RabbitMQ in the previous example, this is made available using Aspire Integrations. These are NuGet packages that allow you to integrate with popular services, such as Redis or PostgreSQL. Aspire integrations take care of many cloud-native concerns for you, like adding health checks and telemetry.</p><p>You can right-click on the <code>AppHost</code> project and select <code>Add &gt; .NET Aspire package...</code> to see the list of available integrations:</p><figure><img src="https://milanjovanovic.tech/blogs/mnw_107/aspire_integrations.png?imwidth=3840" alt="NuGet browser view showing a list of .NET Aspire integrations." tabindex="0" loading="lazy"><figcaption>NuGet browser view showing a list of .NET Aspire integrations.</figcaption></figure><p>If we want to add Redis to our project, we can install the <code>Aspire.Hosting.Redis</code> package. Then, we would configure the Redis integration in the <code>AppHost</code> project:</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> DistributedApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Other service omitted for brevity</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> redis <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">AddRedis</span><span class="token punctuation">(</span><span class="token string">&quot;contentplatform-cache&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">builder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddProject</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Projects<span class="token punctuation">.</span>ContentPlatform_Api<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;contentplatform-api&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">WithReference</span><span class="token punctuation">(</span>postgres<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">WithReference</span><span class="token punctuation">(</span>rabbitMq<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">WithReference</span><span class="token punctuation">(</span>redis<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,20),P={href:"https://learn.microsoft.com/en-us/dotnet/aspire/fundamentals/integrations-overview",target:"_blank",rel:"noopener noreferrer"},I=p(`<p>When you configure a resource with a known connection string format, Aspire automatically injects an environment variable. The connection string name will have the same name as the respective resource.</p><ul><li><code>WithReference(postgres)</code> produces <code>ConnectionStrings__contentplatform-db=&quot;&lt;VALUE&gt;&quot;</code></li><li><code>WithReference(rabbitMq)</code> produces <code>ConnectionStrings__contentplatform-mq=&quot;&lt;VALUE&gt;&quot;</code></li><li><code>WithReference(redis)</code> produces <code>ConnectionStrings__contentplatform-cache=&quot;&lt;VALUE&gt;&quot;</code></li></ul><p>This lets you use logical connection string names when configuring your services:</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line">builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDbContext</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ApplicationDbContext<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>o <span class="token operator">=&gt;</span></span>
<span class="line">    o<span class="token punctuation">.</span><span class="token function">UseNpgsql</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span>Configuration<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span><span class="token string">&quot;contentplatform-db&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="service-defaults-and-opentelemetry" tabindex="-1"><a class="header-anchor" href="#service-defaults-and-opentelemetry"><span>Service Defaults and OpenTelemetry</span></a></h2>`,6),q=n("strong",null,"OpenTelemetry",-1),O=p(`<p>When you enlist a project in .NET Aspire orchestration, there are some updates made to the <code>Program</code> file automatically:</p><ul><li><code>AddServiceDefaults</code> is called to configure OpenTelemetry, health checks, and service discovery</li><li><code>MapDefaultEndpoints</code> is called to expose the health check endpoint</li></ul><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">builder<span class="token punctuation">.</span><span class="token function">AddServiceDefaults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Other code omitted for brevity</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">MapDefaultEndpoints</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Other code omitted for brevity</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can customize <code>AddServiceDefaults</code> according to your requirements. For example, if you&#39;re using MassTransit, you can add the respective tracing configuration for this library.</p><p>Here&#39;s the distributed traces view on the Aspire dashboard. You can see a <code>POST</code> request hitting the <code>contentplatform-api</code> service, publishing an <code>ArticleCreatedEvent</code>, and consuming that message in the <code>contentplatform-reporting-api</code> service.</p><figure><img src="https://milanjovanovic.tech/blogs/mnw_107/content_platfrom_traces.png?imwidth=3840" alt="Aspire dashboard traces views showing one distributed trace." tabindex="0" loading="lazy"><figcaption>Aspire dashboard traces views showing one distributed trace.</figcaption></figure><p>For local development, the .NET Aspire dashboard provides a UI for viewing telemetry data. In a production environment, you can configure the OpenTelemetry server to receive telemetry data using the <code>OTEL_EXPORTER_OTLP_ENDPOINT</code> environment variable.</p><hr><h2 id="deploying-net-aspire-applications" tabindex="-1"><a class="header-anchor" href="#deploying-net-aspire-applications"><span>Deploying .NET Aspire Applications</span></a></h2><p>.NET Aspire simplifies the deployment process for distributed applications, especially when targeting Azure. To deploy an Aspire application, you first generate a <strong>manifest file</strong> using the <code>dotnet run</code> command with specific parameters. This manifest is a JSON file that describes all the resources defined in your Aspire project, including services, databases, and other dependencies.</p>`,10),M=n("img",{src:"https://milanjovanovic.tech/blogs/mnw_107/aspire_manifest.png?imwidth=3840",alt:'.NET Aspire manifest JSON file example.<br/>Source: <FontIcon icon="fa-brands fa-microsoft"/>Microsoft',tabindex:"0",loading:"lazy"},null,-1),G=n("br",null,null,-1),B={href:"https://learn.microsoft.com/en-us/dotnet/aspire/deployment/manifest-format",target:"_blank",rel:"noopener noreferrer"},W=p(`<p>Deployment tools can use the manifest to set up the necessary infrastructure in your target environment. Aspire generates the required configuration for Azure Container Apps or Kubernetes for Azure deployments. It handles tasks like setting up networking, scaling services, and configuring monitoring automatically.</p><p>Here&#39;s a simple example of generating a manifest:</p><div class="language-pwsh line-numbers-mode" data-highlighter="prismjs" data-ext="pwsh" data-title="pwsh"><pre><code><span class="line">dotnet run --project ContentPlatform.AppHost\\ContentPlatform.AppHost.csproj \`</span>
<span class="line">  --publisher manifest --output-path ../aspire-manifest.json</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>This command creates a JSON manifest file that deployment tools can use to set up your application in the cloud or on-premises infrastructure.</p>`,4),H={href:"https://learn.microsoft.com/en-us/dotnet/aspire/deployment/overview",target:"_blank",rel:"noopener noreferrer"},z=n("hr",null,null,-1),L=n("h2",{id:"summary",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#summary"},[n("span",null,"Summary")])],-1),V=n("p",null,"I've used .NET Aspire a lot lately, and I'm genuinely impressed.",-1),U=n("p",null,"Aspire makes building complex systems much easier. I can set up a distributed system with just a few lines of C# code. This is much simpler than using Docker Compose. The built-in observability and monitoring tools are also great.",-1),Y=n("p",null,"While .NET Aspire is now production-ready, the ecosystem around it is still growing. Developers, particularly those new to cloud-native concepts, might face a learning curve.",-1),F=n("p",null,"Should you adopt Aspire in your .NET projects?",-1),J=n("p",null,"If you're building distributed applications, especially for Azure, I'd say give it a try. However, you might want to evaluate carefully if you work on simpler applications or use non-Azure cloud services.",-1),Q=n("p",null,"That's all for today.",-1),K=n("p",null,"See you next week.",-1),Z={class:"hint-container note"},$=n("p",{class:"hint-container-title"},"P.S.",-1),X={href:"https://github.com/m-jovanovic/aspire-orchestration",target:"_blank",rel:"noopener noreferrer"},nn=n("code",null,"m-jovanovic/aspire-orchestration",-1);function sn(m,an){const l=o("VPCard"),t=o("router-link"),u=o("SiteInfo"),i=o("FontIcon"),h=o("RouteLink");return f(),g("div",null,[n("h1",y,[n("a",_,[n("span",null,k(m.$frontmatter.title)+" ê´€ë ¨",1)])]),a(l,c(r({title:"C# > Article(s)",desc:"Article(s)",link:"/programming/cs/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),a(l,c(r({title:"Docker > Article(s)",desc:"Article(s)",link:"/devops/docker/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),n("nav",A,[n("ul",null,[n("li",null,[a(t,{to:"#net-aspire-orchestration"},{default:e(()=>[s(".NET Aspire Orchestration")]),_:1})]),n("li",null,[a(t,{to:"#orchestration-the-bad-parts"},{default:e(()=>[s("Orchestration - The Bad Parts")]),_:1})]),n("li",null,[a(t,{to:"#net-aspire-integrations"},{default:e(()=>[s(".NET Aspire Integrations")]),_:1})]),n("li",null,[a(t,{to:"#service-defaults-and-opentelemetry"},{default:e(()=>[s("Service Defaults and OpenTelemetry")]),_:1})]),n("li",null,[a(t,{to:"#deploying-net-aspire-applications"},{default:e(()=>[s("Deploying .NET Aspire Applications")]),_:1})]),n("li",null,[a(t,{to:"#summary"},{default:e(()=>[s("Summary")]),_:1})])])]),w,a(u,{name:".NET Aspire: A Game-Changer for Cloud-Native Development?",desc:".NET Aspire promises to revolutionize cloud-native development for .NET applications, but does it live up to the hype? In this hands-on review, I'll share my experience migrating a real project to Aspire, exploring its strengths, limitations, and potential impact on how we build distributed systems.",url:"https://milanjovanovic.tech/blog/dotnet-aspire-a-game-changer-for-cloud-native-development",logo:"https://milanjovanovic.tech/profile_favicon.png",preview:"https://milanjovanovic.tech/blog-covers/mnw_107.png"}),T,E,n("p",null,[n("a",N,[a(i,{icon:"fa-brands fa-microsoft"}),C]),s(" is Microsoft's latest offering for cloud-native application development. It aims to simplify the process of building, deploying, and managing distributed applications.")]),j,n("figure",null,[S,n("figcaption",null,[s("Context menu with '.NET Aspire Orchestrator Support...' highlighted."),D,s("Source: "),n("a",R,[a(i,{icon:"fas fa-microsoft"}),s("Microsoft")])])]),x,n("p",null,[s("You can find a list of supported "),n("a",P,[a(i,{icon:"fa-brands fa-microsoft"}),s("Aspire integrations")]),s(" in the documentation.")]),I,n("p",null,[s("One of Aspire's killer features is its built-in observability stack. It integrates "),a(h,{to:"/milanjovanovic.tech/introduction-to-distributed-tracing-with-opentelemetry-in-dotnet.html"},{default:e(()=>[q]),_:1}),s(", providing distributed tracing, metrics, and logging out of the box.")]),O,n("figure",null,[M,n("figcaption",null,[s(".NET Aspire manifest JSON file example."),G,s("Source: "),n("a",B,[a(i,{icon:"fa-brands fa-microsoft"}),s("Microsoft")])])]),W,n("p",null,[s("You can learn more about "),n("a",H,[a(i,{icon:"fa-brands fa-microsoft"}),s("Aspire deployment")]),s(" in the documentation.")]),z,L,V,U,Y,F,J,Q,K,n("div",Z,[$,n("p",null,[s("You can find the source code for this example in "),n("a",X,[s("this repository ("),a(i,{icon:"iconfont icon-github"}),nn,s(")")]),s(".")]),a(u,{name:"m-jovanovic/aspire-orchestration",desc:"A sample application demonstrating how to use Aspire orchestration (migrating from Docker Compose).",url:"https://github.com/m-jovanovic/aspire-orchestration",logo:"https://avatars.githubusercontent.com/u/34191235?s=48&v=4",preview:"https://opengraph.githubassets.com/b6a001b985225ba997fe2350fa0525207e489a68ceeab8aa2e7cea8d73a05d2d/m-jovanovic/aspire-orchestration"})]),d(" START: ARTICLE CARD "),a(l,c(r({title:".NET Aspire: A Game-Changer for Cloud-Native Development?",desc:".NET Aspire promises to revolutionize cloud-native development for .NET applications, but does it live up to the hype? In this hands-on review, I'll share my experience migrating a real project to Aspire, exploring its strengths, limitations, and potential impact on how we build distributed systems.",link:"/milanjovanovic.tech/dotnet-aspire-a-game-changer-for-cloud-native-development.md",logo:"https://milanjovanovic.tech/profile_favicon.png",background:"rgba(79,70,229,0.2)"})),null,16),d(" END: ARTICLE CARD ")])}const on=v(b,[["render",sn],["__file","dotnet-aspire-a-game-changer-for-cloud-native-development.html.vue"]]),pn=JSON.parse('{"path":"/milanjovanovic.tech/dotnet-aspire-a-game-changer-for-cloud-native-development.html","title":".NET Aspire: A Game-Changer for Cloud-Native Development?","lang":"en-US","frontmatter":{"lang":"en-US","title":".NET Aspire: A Game-Changer for Cloud-Native Development?","description":"Article(s) > .NET Aspire: A Game-Changer for Cloud-Native Development?","icon":"iconfont icon-csharp","category":["Article(s)","C#","DotNet","DevOps","Docker"],"tag":["blog","freecodecamp.org","cs","c#","csharp","dotnet","devops","docker"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > .NET Aspire: A Game-Changer for Cloud-Native Development?"},{"property":"og:description","content":".NET Aspire: A Game-Changer for Cloud-Native Development?"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/milanjovanovic.tech/dotnet-aspire-a-game-changer-for-cloud-native-development.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/milanjovanovic.tech/dotnet-aspire-a-game-changer-for-cloud-native-development.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":".NET Aspire: A Game-Changer for Cloud-Native Development?"}],["meta",{"property":"og:description","content":"Article(s) > .NET Aspire: A Game-Changer for Cloud-Native Development?"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://milanjovanovic.tech/blog-covers/mnw_107.png"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://milanjovanovic.tech/blog-covers/mnw_107.png"}],["meta",{"name":"twitter:image:alt","content":".NET Aspire: A Game-Changer for Cloud-Native Development?"}],["meta",{"property":"article:author","content":"Milan JovanoviÄ‡"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"freecodecamp.org"}],["meta",{"property":"article:tag","content":"cs"}],["meta",{"property":"article:tag","content":"c#"}],["meta",{"property":"article:tag","content":"csharp"}],["meta",{"property":"article:tag","content":"dotnet"}],["meta",{"property":"article:tag","content":"devops"}],["meta",{"property":"article:tag","content":"docker"}],["meta",{"property":"article:published_time","content":"2024-09-14T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\".NET Aspire: A Game-Changer for Cloud-Native Development?\\",\\"image\\":[\\"https://learn.microsoft.com/en-us/dotnet/aspire/get-started/add-aspire-existing-app\\",\\"https://milanjovanovic.tech/blogs/mnw_107/content_platfrom_resources.png?imwidth=3840\\",\\"https://milanjovanovic.tech/blogs/mnw_107/aspire_integrations.png?imwidth=3840\\",\\"https://milanjovanovic.tech/blogs/mnw_107/content_platfrom_traces.png?imwidth=3840\\",\\"https://learn.microsoft.com/en-us/dotnet/aspire/deployment/manifest-format\\"],\\"datePublished\\":\\"2024-09-14T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Milan JovanoviÄ‡\\"}]}"]],"prev":"/programming/cs/articles/README.md","date":"2024-09-14T00:00:00.000Z","isOriginal":false,"author":"Milan JovanoviÄ‡","cover":"https://milanjovanovic.tech/blog-covers/mnw_107.png"},"headers":[{"level":2,"title":".NET Aspire Orchestration","slug":"net-aspire-orchestration","link":"#net-aspire-orchestration","children":[]},{"level":2,"title":"Orchestration - The Bad Parts","slug":"orchestration-the-bad-parts","link":"#orchestration-the-bad-parts","children":[]},{"level":2,"title":".NET Aspire Integrations","slug":"net-aspire-integrations","link":"#net-aspire-integrations","children":[]},{"level":2,"title":"Service Defaults and OpenTelemetry","slug":"service-defaults-and-opentelemetry","link":"#service-defaults-and-opentelemetry","children":[]},{"level":2,"title":"Deploying .NET Aspire Applications","slug":"deploying-net-aspire-applications","link":"#deploying-net-aspire-applications","children":[]},{"level":2,"title":"Summary","slug":"summary","link":"#summary","children":[]}],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":6.09,"words":1826},"filePathRelative":"milanjovanovic.tech/dotnet-aspire-a-game-changer-for-cloud-native-development.md","localizedDate":"September 14, 2024","excerpt":"\\n","copyright":{"author":"Milan JovanoviÄ‡"}}');export{on as comp,pn as data};
