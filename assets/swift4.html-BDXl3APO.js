import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as k,b as n,t as h,e as a,n as p,g as l,w as o,d as s,f as c,r,o as m}from"./app-BgNevrm5.js";const g={},w={id:"frontmatter-title-관련",tabindex:"-1"},f={class:"header-anchor",href:"#frontmatter-title-관련"},v={class:"table-of-contents"},y=n("hr",null,null,-1),b=n("p",null,"Swift 4.0 is a major new release for everyone's favorite app development language, and introduces a variety of features that let us write simpler, safer code. You'll be pleased to know it's nothing as dramatic as the epic changes introduced with Swift 3.0, and indeed most changes are fully backwards-compatible with your existing Swift code. So, while you might need to make a handful of changes it shouldn't take long.",-1),q=n("p",null,"If you liked this article, you might also enjoy these:",-1),S=c(`<hr><h2 id="swifty-encoding-and-decoding" tabindex="-1"><a class="header-anchor" href="#swifty-encoding-and-decoding"><span>Swifty encoding and decoding</span></a></h2><p>We know value types are great, but we also know they interact terribly with Objective-C APIs such as <code>NSCoding</code> – you either need to write a shim layer or give in and use classes, both of which are unpleasant. Worse, even if you give in and switch to classes, you still need to write your encoding and decoding methods by hand, which is painful and error-prone.</p><p>Swift 4 introduces a new <code>Codable</code> protocol that lets you serialize and deserialize custom data types without writing any special code – and without having to worry about losing your value types. Even better, you can choose how you want the data to be serialized: you can use classic property list format or even JSON.</p><p><strong>Yes, you read all that correctly: Swift 4 lets you serialize your custom data types to JSON without writing any special code.</strong></p><p>Let&#39;s take a look at how beautiful this is. First, here&#39;s a custom data type and some instances of it:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">Language</span><span class="token punctuation">:</span> <span class="token class-name">Codable</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">    <span class="token keyword">var</span> version<span class="token punctuation">:</span> <span class="token class-name">Int</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> swift <span class="token operator">=</span> <span class="token class-name">Language</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Swift&quot;</span></span><span class="token punctuation">,</span> version<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">let</span> php <span class="token operator">=</span> <span class="token class-name">Language</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;PHP&quot;</span></span><span class="token punctuation">,</span> version<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">let</span> perl <span class="token operator">=</span> <span class="token class-name">Language</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Perl&quot;</span></span><span class="token punctuation">,</span> version<span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can see I&#39;ve marked the <code>Language</code> struct as conforming to the <code>Codable</code> protocol. With that one tiny addition, we can convert it to a <code>Data</code> representation of JSON like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> encoder <span class="token operator">=</span> <span class="token class-name">JSONEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token keyword">let</span> encoded <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> encoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>swift<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// save \`encoded\` somewhere</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Swift will automatically encode all properties inside your data type – you don&#39;t need to do anything.</p><p>Now, if you&#39;re like me and have a long history of using <code>NSCoding</code>, you&#39;re probably somewhat doubtful: is that really all it takes, and how can we be sure it&#39;s working? Well, let&#39;s add some more code to try converting the <code>Data</code> object into a string so we can print it out, then decode it back into a new <code>Language</code> instance that we can read from:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">if</span> <span class="token keyword">let</span> encoded <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> encoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>swift<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token keyword">let</span> json <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> encoded<span class="token punctuation">,</span> encoding<span class="token punctuation">:</span> <span class="token punctuation">.</span>utf8<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">let</span> decoder <span class="token operator">=</span> <span class="token class-name">JSONDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token keyword">let</span> decoded <span class="token operator">=</span> <span class="token keyword">try</span><span class="token operator">?</span> decoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">Language</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">,</span> from<span class="token punctuation">:</span> encoded<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span>decoded<span class="token punctuation">.</span>name<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Notice how decoding doesn&#39;t require a typecast – you provide the data type name as its first parameter, so Swift infers the return type from there.</p>`,13),_=n("code",null,"JSONEncoder",-1),x=n("code",null,"PropertyListEncoder",-1),j={href:"https://github.com/apple/swift-evolution/blob/master/proposals/0167-swift-encoders.md",target:"_blank",rel:"noopener noreferrer"},W=n("code",null,"apple/swift-evolution",-1),T=c(`<hr><h2 id="multi-line-string-literals" tabindex="-1"><a class="header-anchor" href="#multi-line-string-literals"><span>Multi-line string literals</span></a></h2><p>Writing multi-line strings in Swift has always meant adding <code>\\n</code> inside your strings to add line breaks wherever you want them. This doesn&#39;t look good in code, but at least it displays correctly for users. Fortunately, Swift 4 introduces new multi-line string literal syntax that lets you add line breaks freely and use quote marks without escaping, while still benefiting from functionality like string interpolation.</p><p>To start a string literal, you need to write three double quotation marks: <code>&quot;&quot;&quot;</code> then press return. You can then go ahead and write a string as long as you want, including variables and line breaks, before ending your string by pressing return then writing three more double quotation marks.</p><p>I&#39;ve been specific about pressing return because string literals have two important rules: when you open a string using <code>&quot;&quot;&quot;</code> the content of your string must begin on a new line, and when you end a multi-line string using <code>&quot;&quot;&quot;</code> that must also begin on a new line.</p><p>Here it is in action:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> longString <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;&quot;&quot;</span>
<span class="line">When you write a string that spans multiple</span>
<span class="line">lines make sure you start its content on a</span>
<span class="line">line all of its own, and end it with three</span>
<span class="line">quotes also on a line of their own.</span>
<span class="line">Multi-line strings also let you write &quot;quote marks&quot;</span>
<span class="line">freely inside your strings, which is great!</span>
<span class="line">&quot;&quot;&quot;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That creates a new string with several line breaks right there in the definition – much easier to read <em>and</em> write.</p>`,8),I={href:"https://github.com/apple/swift-evolution/blob/master/proposals/0168-multi-line-string-literals.md",target:"_blank",rel:"noopener noreferrer"},C=n("code",null,"apple/swift-evolution",-1),O=c(`<hr><h2 id="improved-keypaths-for-key-value-coding" tabindex="-1"><a class="header-anchor" href="#improved-keypaths-for-key-value-coding"><span>Improved keypaths for key-value coding</span></a></h2><p>One of the most loved features of Objective-C is its ability to reference a property dynamically rather than directly – that is, to be able to say &quot;given object X, here is the property I&#39;d like to read&quot; without actually reading it. These references, called <em>keypaths</em>, are distinct from direct property accesses because they don&#39;t actually read or write the value, they just stash it away for use later on.</p><p>If you&#39;ve never used keypaths before, let me show you an analogy of how they work using regular Swift methods. We&#39;re going to define a struct called <code>Starship</code> and a struct called <code>Crew</code>, then create one instance of each:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token comment">// an example struct</span></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">Crew</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">    <span class="token keyword">var</span> rank<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// another example struct, this time with a method</span></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">Starship</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">    <span class="token keyword">var</span> maxWarp<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line">    <span class="token keyword">var</span> captain<span class="token punctuation">:</span> <span class="token class-name">Crew</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">goToMaximumWarp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is now travelling at warp </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">maxWarp</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// create instances of those two structs</span></span>
<span class="line"><span class="token keyword">let</span> janeway <span class="token operator">=</span> <span class="token class-name">Crew</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Kathryn Janeway&quot;</span></span><span class="token punctuation">,</span> rank<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Captain&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">let</span> voyager <span class="token operator">=</span> <span class="token class-name">Starship</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Voyager&quot;</span></span><span class="token punctuation">,</span> maxWarp<span class="token punctuation">:</span> <span class="token number">9.975</span><span class="token punctuation">,</span> captain<span class="token punctuation">:</span> janeway<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// grab a reference to the \`goToMaximumWarp()\` method</span></span>
<span class="line"><span class="token keyword">let</span> enterWarp <span class="token operator">=</span> voyager<span class="token punctuation">.</span>goToMaximumWarp</span>
<span class="line"></span>
<span class="line"><span class="token comment">// call that reference</span></span>
<span class="line"><span class="token function">enterWarp</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Because functions are first-class types in Swift, the last two lines are able to create a reference to the <code>goToMaximumWarp()</code> method called <code>enterWarp</code>, then call that later on whenever we want to. The problem is, you can&#39;t do the same thing for properties – you can&#39;t say &quot;create a reference to the captain&#39;s name property that I can check when the inevitable mutiny happens,&quot; because Swift will just read the property directly and you&#39;ll just get its original value.</p><p>This is fixed with keypaths: they are <em>uninvoked references to properties</em> just like our <code>enterWarp()</code> code. If you invoke the reference now you get the current value, but if you invoke the reference later you get the latest value. You can dig through any number of properties, and Swift uses its type inference to ensure you get the correct type back.</p><p>The Swift Evolution community spent quite a while discussing the correct syntax for keypaths because it needed to be something visually different from other Swift code, and the syntax they ended up with uses backslashes: <code>\\Starship.name</code>, <code>\\Starship.maxWarp</code>, and <code>\\Starship.captain.name</code>. You can assign those two to a variable then use them whenever you want, on any <code>Starship</code> instance. For example:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> nameKeyPath <span class="token operator">=</span> <span class="token punctuation">\\</span><span class="token class-name">Starship</span><span class="token punctuation">.</span>name</span>
<span class="line"><span class="token keyword">let</span> maxWarpKeyPath <span class="token operator">=</span> <span class="token punctuation">\\</span><span class="token class-name">Starship</span><span class="token punctuation">.</span>maxWarp</span>
<span class="line"><span class="token keyword">let</span> captainName <span class="token operator">=</span> <span class="token punctuation">\\</span><span class="token class-name">Starship</span><span class="token punctuation">.</span>captain<span class="token punctuation">.</span>name</span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> starshipName <span class="token operator">=</span> voyager<span class="token punctuation">[</span>keyPath<span class="token punctuation">:</span> nameKeyPath<span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">let</span> starshipMaxWarp <span class="token operator">=</span> voyager<span class="token punctuation">[</span>keyPath<span class="token punctuation">:</span> maxWarpKeyPath<span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">let</span> starshipCaptain <span class="token operator">=</span> voyager<span class="token punctuation">[</span>keyPath<span class="token punctuation">:</span> captainName<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That will make <code>starshipName</code> a string and <code>starshipMaxWarp</code> a double, because Swift is able to infer the types correctly. The third example there even goes into the property of a property, and Swift still figures it out correctly.</p>`,10),P={href:"https://github.com/apple/swift-evolution/blob/master/proposals/0161-key-paths.md",target:"_blank",rel:"noopener noreferrer"},N=n("code",null,"apple/swift-evolution",-1),E=n("hr",null,null,-1),M=n("h2",{id:"intermission",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#intermission"},[n("span",null,"Intermission")])],-1),H=n("strong",null,"you can download it for free with no obligation or catches",-1),A={href:"https://gumroad.com/l/natural-swift",target:"_blank",rel:"noopener noreferrer"},D=c(`<p>And now back to your regularly scheduled broadcast…</p><hr><h2 id="improved-dictionary-functionality" tabindex="-1"><a class="header-anchor" href="#improved-dictionary-functionality"><span>Improved dictionary functionality</span></a></h2><p>One of the most intriguing proposals for Swift 4 was to add some new functionality to dictionaries to make them more powerful, and also to make them behave more like you would expect in certain situations.</p><p>Let&#39;s start with a simple example: filtering dictionaries in Swift 3 does <em>not</em> return a new dictionary. Instead, it returns an array of tuples with key/value labels. For example:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> cities <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;Shanghai&quot;</span></span><span class="token punctuation">:</span> <span class="token number">24_256_800</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Karachi&quot;</span></span><span class="token punctuation">:</span> <span class="token number">23_500_000</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Beijing&quot;</span></span><span class="token punctuation">:</span> <span class="token number">21_516_000</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Seoul&quot;</span></span><span class="token punctuation">:</span> <span class="token number">9_995_000</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> massiveCities <span class="token operator">=</span> cities<span class="token punctuation">.</span>filter <span class="token punctuation">{</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span>value <span class="token operator">&gt;</span> <span class="token number">10_000_000</span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>After that code runs you can&#39;t read <code>massiveCities[&quot;Shanghai&quot;]</code> because it is no longer a dictionary. Instead, you need to use <code>massiveCities[0].value</code>, which isn&#39;t great.</p><p>As of Swift 4 this behaves more like you would expect: you get back a new dictionary. Obviously this will break any existing code that relies on the tuple-array return type.</p><p>Similarly, the <code>map()</code> method on dictionaries never quite worked the way many people hoped: you got a key-value tuple passed in, and could return a single value to be added to an array. For example:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> populations <span class="token operator">=</span> cities<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span>value <span class="token operator">*</span> <span class="token number">2</span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>That hasn&#39;t changed in Swift 4, but there is a new method called <code>mapValues()</code> that is going to be much more useful because it lets you transform the values and place them back into a dictionary using the original keys.</p><p>For example, this code will round and stringify all city populations, then put them back into a new dictionary with the same keys of Shanghai, Karachi, and Seoul:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> roundedCities <span class="token operator">=</span> cities<span class="token punctuation">.</span>mapValues <span class="token punctuation">{</span> <span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation"><span class="token short-argument">$0</span> <span class="token operator">/</span> <span class="token number">1_000_000</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> million people&quot;</span></span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>(In case you were wondering, it&#39;s not safe to map dictionary keys because you might create duplicates by accident.)</p><p>Easily my favorite new dictionary addition is a <code>grouping</code> initializer, which converts a sequence into a dictionary of sequences that are grouped by whatever you want. Continuing our <code>cities</code> example, we could use <code>cities.keys</code> to get back an array of city names, then group them by their first letter, like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> groupedCities <span class="token operator">=</span> <span class="token class-name">Dictionary</span><span class="token punctuation">(</span>grouping<span class="token punctuation">:</span> cities<span class="token punctuation">.</span>keys<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span>characters<span class="token punctuation">.</span>first<span class="token operator">!</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>groupedCities<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>That will output the following:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">[</span><span class="token property">&quot;B&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Beijing&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token property">&quot;S&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Shanghai&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Seoul&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token property">&quot;K&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Karachi&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Alternatively, we could group the cities based on the length of their names like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> groupedCities <span class="token operator">=</span> <span class="token class-name">Dictionary</span><span class="token punctuation">(</span>grouping<span class="token punctuation">:</span> cities<span class="token punctuation">.</span>keys<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span>count <span class="token punctuation">}</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>groupedCities<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>That will output the following:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">[</span><span class="token number">5</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Seoul&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Karachi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Beijing&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Shanghai&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Finally, it&#39;s now possible to access a dictionary key and provide a default value to use if the key is missing:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;name&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Taylor&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;city&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Nashville&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">let</span> name <span class="token operator">=</span> person<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;name&quot;</span></span><span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Anonymous&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Now, any experienced developer will probably argue that&#39;s better written using nil coalescing, and I agree. You could write this line instead using the current version of Swift:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> name <span class="token operator">=</span> person<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;name&quot;</span></span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token string-literal"><span class="token string">&quot;Anonymous&quot;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>However, that doesn&#39;t work when you&#39;re <em>modifying</em> the dictionary value rather than just reading it. You can&#39;t modify a dictionary value in place because accessing its key returns an optional – the key might not exist, after all. With Swift 4&#39;s default dictionary values you can write much more succinct code, such as this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">var</span> favoriteTVShows <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;Red Dwarf&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Blackadder&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Fawlty Towers&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Red Dwarf&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">var</span> favoriteCounts <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">for</span> show <span class="token keyword">in</span> favoriteTVShows <span class="token punctuation">{</span></span>
<span class="line">    favoriteCounts<span class="token punctuation">[</span>show<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That loops over every string in <code>favoriteTVShows</code>, and uses a dictionary called <code>favoriteCounts</code> to keep track of how often each item appears. We can modify the dictionary in one line of code because we know it will always have a value: either the default value of 0, or some higher number based on previous counting.</p>`,29),F={href:"https://github.com/apple/swift-evolution/blob/master/proposals/0165-dict.md",target:"_blank",rel:"noopener noreferrer"},B=n("code",null,"apple/swift-evolution",-1),K=c(`<hr><h2 id="strings-are-collections-again" tabindex="-1"><a class="header-anchor" href="#strings-are-collections-again"><span>Strings are collections again!</span></a></h2><p>This is a small change, but one guaranteed to make a lot of people happy: strings are collections again. This means you can reverse them, loop over them character-by-character, <code>map()</code> and <code>flatMap()</code> them, and more. For example:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> quote <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;It is a truth universally acknowledged that new Swift versions bring new features.&quot;</span></span></span>
<span class="line"><span class="token keyword">let</span> reversed <span class="token operator">=</span> quote<span class="token punctuation">.</span><span class="token function">reversed</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">for</span> letter <span class="token keyword">in</span> quote <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span>letter<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),L={href:"https://github.com/apple/swift/blob/master/docs/StringManifesto.md",target:"_blank",rel:"noopener noreferrer"},V=n("code",null,"apple/swift",-1),J=c(`<hr><h2 id="one-sided-ranges" tabindex="-1"><a class="header-anchor" href="#one-sided-ranges"><span>One-sided ranges</span></a></h2><p>Last but not least, Swift 4 introduces Python-like one-sided collection slicing, where the missing side is automatically inferred to be the start or end of the collection. This has no effect on existing code because it&#39;s a new use for the existing operator, so you don&#39;t need to worry about potential breakage.</p><p>Here&#39;s an example:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">let</span> characters <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;Dr Horrible&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Captain Hammer&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Penny&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Bad Horse&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Moist&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">let</span> bigParts <span class="token operator">=</span> characters<span class="token punctuation">[</span><span class="token operator">..&lt;</span><span class="token number">3</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">let</span> smallParts <span class="token operator">=</span> characters<span class="token punctuation">[</span><span class="token number">3</span><span class="token operator">...</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>bigParts<span class="token punctuation">)</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>smallParts<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That code will print out <code>[&quot;Dr Horrible&quot;, &quot;Captain Hammer&quot;, &quot;Penny&quot;]</code> then <code>[&quot;Bad Horse&quot;, &quot;Moist&quot;]</code>.</p>`,6),R={href:"https://github.com/apple/swift-evolution/blob/master/proposals/0172-one-sided-ranges.md",target:"_blank",rel:"noopener noreferrer"},z=n("code",null,"apple/swift-evolution",-1),Y=n("hr",null,null,-1),$=n("h2",{id:"there-s-more-still-to-come",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#there-s-more-still-to-come"},[n("span",null,"There's more still to come…")])],-1),X=n("p",null,"The first release of Xcode that ships with Swift 4 is likely to arrive in June, presumably along with iOS 11, tvOS 11, watchOS 4, and macOS Somewhere Else In California. What we've seen so far is already promising, particularly because it's clear the team is working hard to make Swift 4 as additive as possible. Primarily adding new features rather than breaking or modifying existing ones should make it easier to upgrade to, and hopefully signals the start of a new stability for the language.",-1),Z=n("p",null,"Although the Swift Evolution can be chaotic sometimes (access levels, anyone?), Swift 4 validates Apple's community approach once again. I've linked to several Swift Evolution proposals above, each of which were discussed extensively by the community to help reach consensus – this isn't just Apple engineers forcing through changes because they can, but instead is a sensible, considered approach to refining what is already a smart and elegant language.",-1),U={href:"https://github.com/apple/swift/blob/master/docs/ABIStabilityManifesto.md",target:"_blank",rel:"noopener noreferrer"},G=n("code",null,"apple/swift",-1);function Q(u,nn){const i=r("VPCard"),e=r("router-link"),t=r("FontIcon");return m(),k("div",null,[n("h1",w,[n("a",f,[n("span",null,h(u.$frontmatter.title)+" 관련",1)])]),a(i,p(l({title:"Swift > Article(s)",desc:"Article(s)",link:"/programming/swift/articles/README.md",logo:"/images/ico-wind.svg",background:"rgba(10,10,10,0.2)"})),null,16),n("nav",v,[n("ul",null,[n("li",null,[a(e,{to:"#swifty-encoding-and-decoding"},{default:o(()=>[s("Swifty encoding and decoding")]),_:1})]),n("li",null,[a(e,{to:"#multi-line-string-literals"},{default:o(()=>[s("Multi-line string literals")]),_:1})]),n("li",null,[a(e,{to:"#improved-keypaths-for-key-value-coding"},{default:o(()=>[s("Improved keypaths for key-value coding")]),_:1})]),n("li",null,[a(e,{to:"#intermission"},{default:o(()=>[s("Intermission")]),_:1})]),n("li",null,[a(e,{to:"#improved-dictionary-functionality"},{default:o(()=>[s("Improved dictionary functionality")]),_:1})]),n("li",null,[a(e,{to:"#strings-are-collections-again"},{default:o(()=>[s("Strings are collections again!")]),_:1})]),n("li",null,[a(e,{to:"#one-sided-ranges"},{default:o(()=>[s("One-sided ranges")]),_:1})]),n("li",null,[a(e,{to:"#there-s-more-still-to-come"},{default:o(()=>[s("There's more still to come…")]),_:1})])])]),y,a(i,p(l({title:"What's new in Swift 4.0 – Hacking with Swift",desc:"Hands-on code examples to help you learn what's new in Swift 4: new encoding and decoding, smarter keypaths, multi-line strings, and more!",link:"https://hackingwithswift.com/swift4",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),b,q,a(i,p(l({title:"What's new in iOS 11 for developers – Hacking with Swift",desc:"What's new in iOS 11 for developers",link:"https://hackingwithswift.com/whats-new-in-ios-11",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),a(i,p(l({title:"What's new in Swift 3.1 – Hacking with Swift",desc:"What's new in Swift 3.1",link:"https://hackingwithswift.com/swift3-1",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),a(i,p(l({title:"What's new in Swift 3.0 – Hacking with Swift",desc:"What's new in Swift 3.0",link:"https://hackingwithswift.com/swift3",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(54,94,226,0.2)"})),null,16),a(i,p(l({title:"Hacking with iOS – learn to code iPhone and iPad apps with free Swift tutorials",desc:"Learn Swift coding for iOS with these free tutorials – learn Swift, iOS, and Xcode",link:"/hackingwithswift.com/read/README.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),S,n("p",null,[s("Both "),_,s(" and its property list counterpart "),x,s(" have lots of options for customizing how they work: do you want compact JSON or pretty-printed JSON? Do you want to use ISO8601 dates or Unix epoch dates? Do you want to use binary property lists or XML? For more information on these and other options, see "),n("a",j,[s("the Swift Evolution proposal for this new feature ("),a(t,{icon:"iconfont icon-github"}),W,s(")")]),s(".")]),T,n("p",null,[s("For more information see "),n("a",I,[s("the Swift Evolution proposal for this new feature ("),a(t,{icon:"iconfont icon-github"}),C,s(")")]),s(".")]),O,n("p",null,[s("Future plans for this include being able to access array indexes and to create keypaths from strings at runtime – for more information see "),n("a",P,[s("the Swift Evolution proposal for this new feature ("),a(t,{icon:"iconfont icon-github"}),N,s(")")]),s(".")]),E,M,n("p",null,[s("If you're enjoying this article, you might like my free Natural Swift video. It gives you 75 minutes of hands-on coding that teaches functional programming, protocol-oriented programming, and value types, and "),H,s(" – "),n("a",A,[a(t,{icon:"fas fa-globe"}),s("just click here")]),s(".")]),D,n("p",null,[s("For more information see "),n("a",F,[s("the Swift Evolution proposal for these new features ("),a(t,{icon:"iconfont icon-github"}),B,s(")")]),s(".")]),K,n("p",null,[s("This change was introduced as part of a broad set of amendments called the "),n("a",L,[s("String Manifesto ("),a(t,{icon:"iconfont icon-github"}),V,s(")")]),s(".")]),J,n("p",null,[s("For more information see "),n("a",R,[s("the Swift Evolution proposal for this new feature ("),a(t,{icon:"iconfont icon-github"}),z,s(")")]),s(".")]),Y,$,X,Z,n("p",null,[s("One feature that was postponed was "),n("a",U,[s("ABI compatibility ("),a(t,{icon:"iconfont icon-github"}),G,s(")")]),s(", which would allow developers to distribute compiled libraries – one of the few key missing features that remain in Swift today. Hopefully we'll get it before Swift 5…")])])}const en=d(g,[["render",Q],["__file","swift4.html.vue"]]),tn=JSON.parse(`{"path":"/hackingwithswift.com/swift4.html","title":"What's new in Swift 4.0","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"What's new in Swift 4.0","description":"Hands-on code examples to help you learn what's new in Swift 4: new encoding and decoding, smarter keypaths, multi-line strings, and more!","icon":"fa-brands fa-swift","category":["Swift","Article(s)"],"tag":["blog","hackingwithswift.com","crashcourse","swift","swift-4.0","ios","xcode"],"head":[[{"meta":null},{"property":"og:title","content":"What's new in Swift 4.0"},{"property":"og:description","content":"Hands-on code examples to help you learn what's new in Swift 4: new encoding and decoding, smarter keypaths, multi-line strings, and more!"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/swift4.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/swift4.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"What's new in Swift 4.0"}],["meta",{"property":"og:description","content":"Hands-on code examples to help you learn what's new in Swift 4: new encoding and decoding, smarter keypaths, multi-line strings, and more!"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"hackingwithswift.com"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"swift-4.0"}],["meta",{"property":"article:tag","content":"ios"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:published_time","content":"2017-06-05T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"What's new in Swift 4.0\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2017-06-05T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[]}"]],"prev":"/programming/swift/articles/README.md","date":"2017-06-05T00:00:00.000Z","isOriginal":false},"headers":[{"level":2,"title":"Swifty encoding and decoding","slug":"swifty-encoding-and-decoding","link":"#swifty-encoding-and-decoding","children":[]},{"level":2,"title":"Multi-line string literals","slug":"multi-line-string-literals","link":"#multi-line-string-literals","children":[]},{"level":2,"title":"Improved keypaths for key-value coding","slug":"improved-keypaths-for-key-value-coding","link":"#improved-keypaths-for-key-value-coding","children":[]},{"level":2,"title":"Intermission","slug":"intermission","link":"#intermission","children":[]},{"level":2,"title":"Improved dictionary functionality","slug":"improved-dictionary-functionality","link":"#improved-dictionary-functionality","children":[]},{"level":2,"title":"Strings are collections again!","slug":"strings-are-collections-again","link":"#strings-are-collections-again","children":[]},{"level":2,"title":"One-sided ranges","slug":"one-sided-ranges","link":"#one-sided-ranges","children":[]},{"level":2,"title":"There's more still to come…","slug":"there-s-more-still-to-come","link":"#there-s-more-still-to-come","children":[]}],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":9.31,"words":2794},"filePathRelative":"hackingwithswift.com/swift4.md","localizedDate":"2017년 6월 5일","excerpt":"\\n"}`);export{en as comp,tn as data};
