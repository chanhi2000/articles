import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as l,b as n,t as r,e as s,n as e,g as a,f as u,r as o,o as d}from"./app-BgNevrm5.js";const h={},k={id:"frontmatter-title-관련",tabindex:"-1"},m={class:"header-anchor",href:"#frontmatter-title-관련"},g=n("nav",{class:"table-of-contents"},[n("ul")],-1),f=n("hr",null,null,-1),w=u(`<p>There’s a lot more you can do with notifications, but chances are the thing you <em>most</em> want to do is act on the user’s response – to show one or more options alongside your alert, then respond to the user’s choice.</p><p>We already set the <code>categoryIdentifier</code> property for our notification, which is a text string that identifies a type of alert. We can now use that same text string to create buttons for the user to choose from, and iOS will show them when any notifications of that type are shown.</p><p>This is done using two new classes: <code>UNNotificationAction</code> creates an individual button for the user to tap, and <code>UNNotificationCategory</code> groups multiple buttons together under a single identifier.</p><p>For this technique project we’re going to create one button, “Show me more…”, that will cause the app to launch when tapped. We’re also going to set the <code>delegate</code> property of the user notification center to be <code>self</code>, meaning that any alert-based messages that get sent will be routed to our view controller to be handled.</p><p>Creating a <code>UNNotificationAction</code> requires three parameters:</p><ol><li>An identifier, which is a unique text string that gets sent to you when the button is tapped.</li><li>A title, which is what user’s see in the interface.</li><li>Options, which describe any special options that relate to the action. You can choose from <code>.authenticationRequired</code>, <code>.destructive</code>, and <code>.foreground</code>.</li></ol><p>Once you have as many actions as you want, you group them together into a single <code>UNNotificationCategory</code> and give it the same identifier you used with a notification.</p><p>That’s it! Add this method to <code>ViewController</code> now:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">registerCategories</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> center <span class="token operator">=</span> <span class="token class-name">UNUserNotificationCenter</span><span class="token punctuation">.</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    center<span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">let</span> show <span class="token operator">=</span> <span class="token class-name">UNNotificationAction</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;show&quot;</span></span><span class="token punctuation">,</span> title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Tell me more…&quot;</span></span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">.</span>foreground<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">let</span> category <span class="token operator">=</span> <span class="token class-name">UNNotificationCategory</span><span class="token punctuation">(</span>identifier<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;alarm&quot;</span></span><span class="token punctuation">,</span> actions<span class="token punctuation">:</span> <span class="token punctuation">[</span>show<span class="token punctuation">]</span><span class="token punctuation">,</span> intentIdentifiers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    center<span class="token punctuation">.</span><span class="token function">setNotificationCategories</span><span class="token punctuation">(</span><span class="token punctuation">[</span>category<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You might have noticed the empty <code>intentIdentifiers</code> parameter in the category initializer - this is used to connect your notifications to intents, if you have created any.</p><p>You’ll get an error because you assigned <code>self</code> to be the delegate of the user notification center. To fix it, make the <code>ViewController</code> class conform to <code>UNUserNotificationCenterDelegate</code> like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">ViewController</span><span class="token punctuation">:</span> <span class="token class-name">UIViewController</span><span class="token punctuation">,</span> <span class="token class-name">UNUserNotificationCenterDelegate</span> <span class="token punctuation">{</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>You can call <code>registerCategories()</code> wherever you want, but in this project the safest place is probably right at the beginning of the <code>scheduleLocal()</code> method.</p><p>Now that we have registered the “alarm” category with a single button, the last thing to do is implement the <code>didReceive</code> method for the notification center. This is triggered on our view controller because we’re the center’s delegate, so it’s down to us to decide how to handle the notification.</p><p>We attached some customer data to the <code>userInfo</code> property of the notification content, and this is where it gets handed back – it’s your chance to link the notification to whatever app content it relates to.</p><p>When the user acts on a notification you can read its <code>actionIdentifier</code> property to see what they did. We have a single button with the “show” identifier, but there’s also <code>UNNotificationDefaultActionIdentifier</code> that gets sent when the user swiped on the notification to unlock their device and launch the app.</p><p>So: we can pull out our user info then decide what to do based on what the user chose. The method also accepts a completion handler closure that you should call once you’ve finished doing whatever you need to do. This might be much later on, so it’s marked with the <code>@escaping</code> keyword.</p><p>Here’s the code – add this method to <code>ViewController</code> now:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">userNotificationCenter</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> center<span class="token punctuation">:</span> <span class="token class-name">UNUserNotificationCenter</span><span class="token punctuation">,</span> didReceive response<span class="token punctuation">:</span> <span class="token class-name">UNNotificationResponse</span><span class="token punctuation">,</span> withCompletionHandler completionHandler<span class="token punctuation">:</span> <span class="token attribute atrule">@escaping</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// pull out the buried userInfo dictionary</span></span>
<span class="line">    <span class="token keyword">let</span> userInfo <span class="token operator">=</span> response<span class="token punctuation">.</span>notification<span class="token punctuation">.</span>request<span class="token punctuation">.</span>content<span class="token punctuation">.</span>userInfo</span>
<span class="line"></span>
<span class="line">    <span class="token keyword">if</span> <span class="token keyword">let</span> customData <span class="token operator">=</span> userInfo<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;customData&quot;</span></span><span class="token punctuation">]</span> <span class="token keyword">as</span><span class="token operator">?</span> <span class="token class-name">String</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Custom data received: </span><span class="token interpolation-punctuation punctuation">\\(</span><span class="token interpolation">customData</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">switch</span> response<span class="token punctuation">.</span>actionIdentifier <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">case</span> <span class="token class-name">UNNotificationDefaultActionIdentifier</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token comment">// the user swiped to unlock</span></span>
<span class="line">            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Default identifier&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">case</span> <span class="token string-literal"><span class="token string">&quot;show&quot;</span></span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token comment">// the user tapped our &quot;show more info…&quot; button</span></span>
<span class="line">            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Show more information…&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">default</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">break</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// you must call the completion handler when you&#39;re done</span></span>
<span class="line">    <span class="token function">completionHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Our project now creates notifications, attaches them to categories so you can create action buttons, then responds to whichever button was tapped by the user – we’re done!</p>`,20);function v(i,b){const t=o("VPCard"),c=o("VidStack");return d(),l("div",null,[n("h1",k,[n("a",m,[n("span",null,r(i.$frontmatter.title)+" 관련",1)])]),s(t,e(a({title:"Hacking with iOS – learn to code iPhone and iPad apps with free Swift tutorials",desc:"Learn Swift coding for iOS with these free tutorials – learn Swift, iOS, and Xcode",link:"/hackingwithswift.com/read/README.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),g,f,s(t,e(a({title:"Acting on responses | Hacking with iOS",desc:"Acting on responses",link:"https://hackingwithswift.com/read/21/3/acting-on-responses",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),s(c,{src:"youtube/t0l0-Kx_4l0"}),w])}const _=p(h,[["render",v],["__file","03-acting-on-responses.html.vue"]]),A=JSON.parse('{"path":"/hackingwithswift.com/read/21/03-acting-on-responses.html","title":"Acting on responses","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Acting on responses","description":"Article(s) > Acting on responses","category":["Swift","iOS","Article(s)"],"tag":["blog","hackingwithswift.com","crashcourse","swift","xcode","appstore","ios"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > Acting on responses"},{"property":"og:description","content":"Acting on responses"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/21/03-acting-on-responses.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/21/03-acting-on-responses.html"}],["meta",{"property":"og:site_name","content":"📚Bookshelf"}],["meta",{"property":"og:title","content":"Acting on responses"}],["meta",{"property":"og:description","content":"Article(s) > Acting on responses"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"hackingwithswift.com"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:tag","content":"ios"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Acting on responses\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[]}"]],"isOriginal":false},"headers":[],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":2.76,"words":829},"filePathRelative":"hackingwithswift.com/read/21/03-acting-on-responses.md","excerpt":"\\n"}');export{_ as comp,A as data};
