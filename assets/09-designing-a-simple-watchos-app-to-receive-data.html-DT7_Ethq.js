import{_ as r}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as d,b as e,t as u,e as s,n as o,g as c,d as n,f as a,r as p,o as h}from"./app-BgNevrm5.js";const m={},g={id:"frontmatter-title-á„€á…ªá†«á„…á…§á†«",tabindex:"-1"},k={class:"header-anchor",href:"#frontmatter-title-á„€á…ªá†«á„…á…§á†«"},w=e("nav",{class:"table-of-contents"},[e("ul")],-1),f=e("hr",null,null,-1),v=e("p",null,"So far we have a fully working iOS app that shows cards players can flip over, has a cheat in place for 3D Touch users so you can always guess correctly, and communication happening from iOS to watchOS. The next step is to write a simple watchOS app that is able to receive that data and make the device buzz gently.",-1),y=e("p",null,[n("We started our project with an Xcode watchOS template, so all this time you will have seen two watchOS folders in your Xcode project: WatchKit App and WatchKit Extension. Yes, cunningly they are two separate things. The "),e("em",null,"extension"),n(" contains all the code that gets run, and the "),e("em",null,"app"),n(" contains the user interface. Both run on the Apple Watch as of watchOS 2.0, but in watchOS 1.0 the extension used to run on your iPhone.")],-1),b=e("p",null,"The first thing we're going to do is design a very simple interface using WatchKit, which is the watchOS equivalent of UIKit. This interface is going to contain only a label and a button, telling users to check their phone for instructions. We haven't written those instructions yet, but all in good timeâ€¦",-1),S=e("code",null,"Interface.storyboard",-1),W=a('<p>Select the label, set its Lines property to be 0 so that it spans as many lines as necessary, then align its text center and give it the following content: &quot;Please read the instructions on your phone before continuing.&quot; Now select the button and give it the text &quot;I&#39;m Ready&quot;. Finally, select both the label and button then change their Vertical and Horizontal alignment properties to be Center.</p><p>All being well, your WatchKit interface should look like the screenshot below. Don&#39;t worry that the views go right to the edge â€“ the Watch&#39;s bezel blends seamlessly with the edge of the screen in its apps, so it will look fine on devices.</p><figure><img src="https://hackingwithswift.com/img/books/hws/37-5@2x.png" alt="WatchKit views have some similarities with UIKit, but arguably more differences" tabindex="0" loading="lazy"><figcaption>WatchKit views have some similarities with UIKit, but arguably more differences</figcaption></figure><p>That&#39;s it: that&#39;s our entire interface. Before we continue with any further coding, we need to create outlets for the label and button by using the Assistant Editor and Ctrl-dragging. Name the label <code>welcomeText</code> and the button <code>hideButton</code> â€“ you&#39;ll notice these have the types <code>WKInterfaceLabel</code> and <code>WKInterfaceButton</code> because we&#39;re in WatchKit now, not UIKit.</p>',4),_=e("code",null,"hideWelcomeText()",-1),O=e("code",null,"InterfaceController.swift",-1),x=a(`<p>The first thing we&#39;re going to do is identical to the code from iOS: set ourselves up as the delegate for the <code>WCSession</code> and activate it. So, start by adding this import:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token class-name">WatchConnectivity</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now add this to the <code>willActivate()</code> method â€“ for our purposes, that&#39;s the equivalent of <code>viewDidLoad()</code> in the iOS app:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">if</span> <span class="token class-name">WCSession</span><span class="token punctuation">.</span><span class="token function">isSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> session <span class="token operator">=</span> <span class="token class-name">WCSession</span><span class="token punctuation">.</span><span class="token keyword">default</span></span>
<span class="line">    session<span class="token punctuation">.</span>delegate <span class="token operator">=</span> <span class="token keyword">self</span></span>
<span class="line">    session<span class="token punctuation">.</span><span class="token function">activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The code is identical to iOS â€“ I told you this was going to be easy!</p><p>You&#39;ll get an error when you try to assign the delegate to the Watch&#39;s view controller, so you&#39;ll need to tell iOS you conform to the <code>WCSessionDelegate</code> protocol like this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">InterfaceController</span><span class="token punctuation">:</span> <span class="token class-name">WKInterfaceController</span><span class="token punctuation">,</span> <span class="token class-name">WCSessionDelegate</span> <span class="token punctuation">{</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>With that, we&#39;re almost done with watchOS. In fact, we just need to do two more things, starting with implementing the <code>hideWelcomeText()</code> method. All this needs to do is hide the label and the button we created so that the watch&#39;s screen is blank apart from the time in the corner â€“ we don&#39;t want any obvious UI in there that might alert people.</p><p>Hiding things in WatchKit is almost the same as iOS, so update the <code>hideWelcomeText()</code> to this:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token attribute atrule">@IBAction</span> <span class="token keyword">func</span> <span class="token function-definition function">hideWelcomeText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    welcomeText<span class="token punctuation">.</span><span class="token function">setHidden</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">    hideButton<span class="token punctuation">.</span><span class="token function">setHidden</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that you need to use <code>setHidden()</code> rather than just changing a <code>isHidden</code> property as you would in UIKit.</p><p>We also need to add an empty method in order to satisfy the <code>WCSessionDelegate</code> protocol. Add this now:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">session</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> session<span class="token punctuation">:</span> <span class="token class-name">WCSession</span><span class="token punctuation">,</span> activationDidCompleteWith activationState<span class="token punctuation">:</span> <span class="token class-name">WCSessionActivationState</span><span class="token punctuation">,</span> error<span class="token punctuation">:</span> <span class="token class-name">Error</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The last thing we need to do for our watchOS app is to make the device tap your wrist when it receives a message from iOS. To do this, we just need to implement the <code>didReceiveMessage</code> method for the <code>WCSession</code> so that it plays a haptic effect.</p><p>There are quite a few effects to choose from, but by far the most subtle is <code>WKHapticType.click</code>, which is so subtle that you can&#39;t help but marvel at the engineering of the Apple Watch. Add this code just beneath <code>hideWelcomeText()</code>:</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">session</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> session<span class="token punctuation">:</span> <span class="token class-name">WCSession</span><span class="token punctuation">,</span> didReceiveMessage message<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span> <span class="token punctuation">:</span> <span class="token keyword">Any</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">WKInterfaceDevice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">.</span>click<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>So, whenever the watch receives any message from the phone, it will tap your wrist. Perfect! Butâ€¦ we&#39;re not done yet. You see, we need to show some instructions on the iOS app so that everything functions correctly.</p><p>You see, not only does the Apple Watch go to sleep extremely quickly, but it also likes making noise to accompany haptic effects, which would rather spoil our hoax! So, to finish up we&#39;re going to add an alert to the iOS app reminding you to check your Apple Watch configuration every time it launches.</p>`,18),A=e("code",null,"ViewController.swift",-1),D=a(`<div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift" data-title="swift"><pre><code><span class="line"><span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">viewDidAppear</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> animated<span class="token punctuation">:</span> <span class="token class-name">Bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">viewDidAppear</span><span class="token punctuation">(</span>animated<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">let</span> instructions <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;Please ensure your Apple Watch is configured correctly. On your iPhone, launch Apple&#39;s &#39;Watch&#39; configuration app then choose General &gt; Wake Screen. On that screen, please disable Wake Screen On Wrist Raise, then select Wake For 70 Seconds. On your Apple Watch, please swipe up on your watch face and enable Silent Mode. You&#39;re done!&quot;</span></span></span>
<span class="line">    <span class="token keyword">let</span> ac <span class="token operator">=</span> <span class="token class-name">UIAlertController</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Adjust your settings&quot;</span></span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> instructions<span class="token punctuation">,</span> preferredStyle<span class="token punctuation">:</span> <span class="token punctuation">.</span>alert<span class="token punctuation">)</span></span>
<span class="line">    ac<span class="token punctuation">.</span><span class="token function">addAction</span><span class="token punctuation">(</span><span class="token class-name">UIAlertAction</span><span class="token punctuation">(</span>title<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;I&#39;m Ready&quot;</span></span><span class="token punctuation">,</span> style<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">present</span><span class="token punctuation">(</span>ac<span class="token punctuation">,</span> animated<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>That shows instructions to users every time the app runs. Note that you need to put it inside <code>viewDidAppear()</code> rather than <code>viewDidLoad()</code> because it presents an alert view controller.</p>`,2);function I(l,K){const i=p("VPCard"),t=p("FontIcon");return h(),d("div",null,[e("h1",g,[e("a",k,[e("span",null,u(l.$frontmatter.title)+" ê´€ë ¨",1)])]),s(i,o(c({title:"Hacking with iOS â€“ learn to code iPhone and iPad apps with free Swift tutorials",desc:"Learn Swift coding for iOS with these free tutorials â€“ learn Swift, iOS, and Xcode",link:"/hackingwithswift.com/read/README.md",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),w,f,s(i,o(c({title:"Designing a simple watchOS app to receive data | Hacking with iOS",desc:"Designing a simple watchOS app to receive data",link:"https://hackingwithswift.com/read/37/9/designing-a-simple-watchos-app-to-receive-data",logo:"https://hackingwithswift.com/favicon.svg",background:"rgba(174,10,10,0.2)"})),null,16),v,y,b,e("p",null,[n("Look inside the WatchKit App folder for "),s(t,{icon:"iconfont icon-xcode"}),S,n(", and open that in Interface Builder. Using the Object Library, just like on iOS, drag a label then a button into the small black space of our app's user interface. You will see that WatchKit automatically stacks its views vertically so the interface doesn't get too cluttered.")]),W,e("p",null,[n("Finally, create an action for when the button is tapped, again by Ctrl-dragging in the Assistant Editor. Name this "),_,n(". We're done with Interface Builder now, so please go back to the standard editor and open the "),s(t,{icon:"fa-brands fa-swift"}),O,n(" file from the WatchKit Extension.")]),x,e("p",null,[n("So, head back to "),s(t,{icon:"fa-brands fa-swift"}),A,n(" in your iOS app, then add this new method:")]),D])}const j=r(m,[["render",I],["__file","09-designing-a-simple-watchos-app-to-receive-data.html.vue"]]),q=JSON.parse('{"path":"/hackingwithswift.com/read/37/09-designing-a-simple-watchos-app-to-receive-data.html","title":"Designing a simple watchOS app to receive data","lang":"ko-KR","frontmatter":{"lang":"ko-KR","title":"Designing a simple watchOS app to receive data","description":"Article(s) > Designing a simple watchOS app to receive data","category":["Swift","iOS","Article(s)"],"tag":["blog","hackingwithswift.com","crashcourse","swift","xcode","appstore","ios"],"head":[[{"meta":null},{"property":"og:title","content":"Article(s) > Designing a simple watchOS app to receive data"},{"property":"og:description","content":"Designing a simple watchOS app to receive data"},{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/37/09-designing-a-simple-watchos-app-to-receive-data.html"}],["meta",{"property":"og:url","content":"https://chanhi2000.github.io/bookshelf/hackingwithswift.com/read/37/09-designing-a-simple-watchos-app-to-receive-data.html"}],["meta",{"property":"og:site_name","content":"ðŸ“šBookshelf"}],["meta",{"property":"og:title","content":"Designing a simple watchOS app to receive data"}],["meta",{"property":"og:description","content":"Article(s) > Designing a simple watchOS app to receive data"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://hackingwithswift.com/img/books/hws/37-5@2x.png"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"article:tag","content":"blog"}],["meta",{"property":"article:tag","content":"hackingwithswift.com"}],["meta",{"property":"article:tag","content":"crashcourse"}],["meta",{"property":"article:tag","content":"swift"}],["meta",{"property":"article:tag","content":"xcode"}],["meta",{"property":"article:tag","content":"appstore"}],["meta",{"property":"article:tag","content":"ios"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Designing a simple watchOS app to receive data\\",\\"image\\":[\\"https://hackingwithswift.com/img/books/hws/37-5@2x.png\\"],\\"dateModified\\":null,\\"author\\":[]}"]],"isOriginal":false},"headers":[],"git":{"contributors":[{"name":"chanhi2000","email":"chanhi2000@gmail.com","commits":2}]},"readingTime":{"minutes":4.18,"words":1253},"filePathRelative":"hackingwithswift.com/read/37/09-designing-a-simple-watchos-app-to-receive-data.md","excerpt":"\\n"}');export{j as comp,q as data};
